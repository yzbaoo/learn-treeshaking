{"ast":null,"code":"export function blobReader(blob, onChunk, chunkSize) {\n  if (chunkSize === void 0) {\n    chunkSize = 1024 * 1024;\n  }\n\n  return new Promise(function (resolve, reject) {\n    var fileReader = new FileReader();\n    fileReader.addEventListener(\"error\", reject);\n    fileReader.addEventListener(\"abort\", reject);\n    var size = blob.size;\n    var totalBytesRead = 0;\n\n    function read() {\n      if (totalBytesRead >= size) {\n        resolve();\n        return;\n      }\n\n      fileReader.readAsArrayBuffer(blob.slice(totalBytesRead, Math.min(size, totalBytesRead + chunkSize)));\n    }\n\n    fileReader.addEventListener(\"load\", function (event) {\n      var result = event.target.result;\n      onChunk(new Uint8Array(result));\n      totalBytesRead += result.byteLength;\n      read();\n    });\n    read();\n  });\n}","map":{"version":3,"names":["blobReader","blob","onChunk","chunkSize","Promise","resolve","reject","fileReader","FileReader","addEventListener","size","totalBytesRead","read","readAsArrayBuffer","slice","Math","min","event","result","target","Uint8Array","byteLength"],"sources":["/Users/yzbaoo/Desktop/huohua/ilc-web-packages/node_modules/@aws-sdk/chunked-blob-reader/dist-es/index.js"],"sourcesContent":["export function blobReader(blob, onChunk, chunkSize) {\n    if (chunkSize === void 0) { chunkSize = 1024 * 1024; }\n    return new Promise(function (resolve, reject) {\n        var fileReader = new FileReader();\n        fileReader.addEventListener(\"error\", reject);\n        fileReader.addEventListener(\"abort\", reject);\n        var size = blob.size;\n        var totalBytesRead = 0;\n        function read() {\n            if (totalBytesRead >= size) {\n                resolve();\n                return;\n            }\n            fileReader.readAsArrayBuffer(blob.slice(totalBytesRead, Math.min(size, totalBytesRead + chunkSize)));\n        }\n        fileReader.addEventListener(\"load\", function (event) {\n            var result = event.target.result;\n            onChunk(new Uint8Array(result));\n            totalBytesRead += result.byteLength;\n            read();\n        });\n        read();\n    });\n}\n"],"mappings":"AAAA,OAAO,SAASA,UAAT,CAAoBC,IAApB,EAA0BC,OAA1B,EAAmCC,SAAnC,EAA8C;EACjD,IAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;IAAEA,SAAS,GAAG,OAAO,IAAnB;EAA0B;;EACtD,OAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;IAC1C,IAAIC,UAAU,GAAG,IAAIC,UAAJ,EAAjB;IACAD,UAAU,CAACE,gBAAX,CAA4B,OAA5B,EAAqCH,MAArC;IACAC,UAAU,CAACE,gBAAX,CAA4B,OAA5B,EAAqCH,MAArC;IACA,IAAII,IAAI,GAAGT,IAAI,CAACS,IAAhB;IACA,IAAIC,cAAc,GAAG,CAArB;;IACA,SAASC,IAAT,GAAgB;MACZ,IAAID,cAAc,IAAID,IAAtB,EAA4B;QACxBL,OAAO;QACP;MACH;;MACDE,UAAU,CAACM,iBAAX,CAA6BZ,IAAI,CAACa,KAAL,CAAWH,cAAX,EAA2BI,IAAI,CAACC,GAAL,CAASN,IAAT,EAAeC,cAAc,GAAGR,SAAhC,CAA3B,CAA7B;IACH;;IACDI,UAAU,CAACE,gBAAX,CAA4B,MAA5B,EAAoC,UAAUQ,KAAV,EAAiB;MACjD,IAAIC,MAAM,GAAGD,KAAK,CAACE,MAAN,CAAaD,MAA1B;MACAhB,OAAO,CAAC,IAAIkB,UAAJ,CAAeF,MAAf,CAAD,CAAP;MACAP,cAAc,IAAIO,MAAM,CAACG,UAAzB;MACAT,IAAI;IACP,CALD;IAMAA,IAAI;EACP,CApBM,CAAP;AAqBH"},"metadata":{},"sourceType":"module"}