{"ast":null,"code":"/* Copyright 2015 William Summers, MetaTribal LLC\n * adapted from https://developer.mozilla.org/en-US/docs/JXON\n *\n * Licensed under the MIT License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://opensource.org/licenses/MIT\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @author William Summers\n * https://github.com/metatribal/xmlToJSON\n */\nvar DOMParser = require('xmldom').DOMParser;\n\nvar xmlToJSON = function () {\n  this.version = \"1.3.5\";\n  var options = {\n    // set up the default options\n    mergeCDATA: true,\n    // extract cdata and merge with text\n    normalize: true,\n    // collapse multiple spaces to single space\n    stripElemPrefix: true // for elements of same name in diff namespaces, you can enable namespaces and access the nskey property\n\n  };\n  var prefixMatch = new RegExp(/(?!xmlns)^.*:/);\n  var trimMatch = new RegExp(/^\\s+|\\s+$/g);\n\n  this.grokType = function (sValue) {\n    if (/^\\s*$/.test(sValue)) {\n      return null;\n    }\n\n    if (/^(?:true|false)$/i.test(sValue)) {\n      return sValue.toLowerCase() === \"true\";\n    }\n\n    if (isFinite(sValue)) {\n      return parseFloat(sValue);\n    }\n\n    return sValue;\n  };\n\n  this.parseString = function (xmlString, opt) {\n    if (xmlString) {\n      var xml = this.stringToXML(xmlString);\n\n      if (xml.getElementsByTagName('parsererror').length) {\n        return null;\n      } else {\n        return this.parseXML(xml, opt);\n      }\n    } else {\n      return null;\n    }\n  };\n\n  this.parseXML = function (oXMLParent, opt) {\n    // initialize options\n    for (var key in opt) {\n      options[key] = opt[key];\n    }\n\n    var vResult = {},\n        nLength = 0,\n        sCollectedTxt = \"\"; // iterate over the children\n\n    var childNum = oXMLParent.childNodes.length;\n\n    if (childNum) {\n      for (var oNode, sProp, vContent, nItem = 0; nItem < oXMLParent.childNodes.length; nItem++) {\n        oNode = oXMLParent.childNodes.item(nItem);\n\n        if (oNode.nodeType === 4) {\n          if (options.mergeCDATA) {\n            sCollectedTxt += oNode.nodeValue;\n          }\n        }\n        /* nodeType is \"CDATASection\" (4) */\n        else if (oNode.nodeType === 3) {\n          sCollectedTxt += oNode.nodeValue;\n        }\n        /* nodeType is \"Text\" (3) */\n        else if (oNode.nodeType === 1) {\n          /* nodeType is \"Element\" (1) */\n          if (nLength === 0) {\n            vResult = {};\n          } // using nodeName to support browser (IE) implementation with no 'localName' property\n\n\n          if (options.stripElemPrefix) {\n            sProp = oNode.nodeName.replace(prefixMatch, '');\n          } else {\n            sProp = oNode.nodeName;\n          }\n\n          vContent = xmlToJSON.parseXML(oNode);\n\n          if (vResult.hasOwnProperty(sProp)) {\n            if (vResult[sProp].constructor !== Array) {\n              vResult[sProp] = [vResult[sProp]];\n            }\n\n            vResult[sProp].push(vContent);\n          } else {\n            vResult[sProp] = vContent;\n            nLength++;\n          }\n        }\n      }\n    }\n\n    if (!Object.keys(vResult).length) {\n      // vResult = sCollectedTxt.replace(trimMatch, '') || ''; // by carsonxu 修复 getBucket返回的 Key 是 \" /\" 这种场景\n      vResult = sCollectedTxt || '';\n    }\n\n    return vResult;\n  }; // Convert xmlDocument to a string\n  // Returns null on failure\n\n\n  this.xmlToString = function (xmlDoc) {\n    try {\n      var xmlString = xmlDoc.xml ? xmlDoc.xml : new XMLSerializer().serializeToString(xmlDoc);\n      return xmlString;\n    } catch (err) {\n      return null;\n    }\n  }; // Convert a string to XML Node Structure\n  // Returns null on failure\n\n\n  this.stringToXML = function (xmlString) {\n    try {\n      var xmlDoc = null;\n\n      if (window.DOMParser) {\n        var parser = new DOMParser();\n        xmlDoc = parser.parseFromString(xmlString, \"text/xml\");\n        return xmlDoc;\n      } else {\n        xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\n        xmlDoc.async = false;\n        xmlDoc.loadXML(xmlString);\n        return xmlDoc;\n      }\n    } catch (e) {\n      return null;\n    }\n  };\n\n  return this;\n}.call({});\n\nvar xml2json = function (xmlString) {\n  return xmlToJSON.parseString(xmlString);\n};\n\nmodule.exports = xml2json;","map":{"version":3,"names":["DOMParser","require","xmlToJSON","version","options","mergeCDATA","normalize","stripElemPrefix","prefixMatch","RegExp","trimMatch","grokType","sValue","test","toLowerCase","isFinite","parseFloat","parseString","xmlString","opt","xml","stringToXML","getElementsByTagName","length","parseXML","oXMLParent","key","vResult","nLength","sCollectedTxt","childNum","childNodes","oNode","sProp","vContent","nItem","item","nodeType","nodeValue","nodeName","replace","hasOwnProperty","constructor","Array","push","Object","keys","xmlToString","xmlDoc","XMLSerializer","serializeToString","err","window","parser","parseFromString","ActiveXObject","async","loadXML","e","call","xml2json","module","exports"],"sources":["/Users/yzbaoo/Desktop/huohua/ilc-web-packages/node_modules/cos-js-sdk-v5/lib/xml2json.js"],"sourcesContent":["/* Copyright 2015 William Summers, MetaTribal LLC\n * adapted from https://developer.mozilla.org/en-US/docs/JXON\n *\n * Licensed under the MIT License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://opensource.org/licenses/MIT\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @author William Summers\n * https://github.com/metatribal/xmlToJSON\n */\nvar DOMParser = require('xmldom').DOMParser;\n\nvar xmlToJSON = (function () {\n\n    this.version = \"1.3.5\";\n\n    var options = { // set up the default options\n        mergeCDATA: true, // extract cdata and merge with text\n        normalize: true, // collapse multiple spaces to single space\n        stripElemPrefix: true, // for elements of same name in diff namespaces, you can enable namespaces and access the nskey property\n    };\n\n    var prefixMatch = new RegExp(/(?!xmlns)^.*:/);\n    var trimMatch = new RegExp(/^\\s+|\\s+$/g);\n\n    this.grokType = function (sValue) {\n        if (/^\\s*$/.test(sValue)) {\n            return null;\n        }\n        if (/^(?:true|false)$/i.test(sValue)) {\n            return sValue.toLowerCase() === \"true\";\n        }\n        if (isFinite(sValue)) {\n            return parseFloat(sValue);\n        }\n        return sValue;\n    };\n\n    this.parseString = function (xmlString, opt) {\n        if (xmlString) {\n            var xml = this.stringToXML(xmlString);\n            if (xml.getElementsByTagName('parsererror').length) {\n                return null;\n            } else {\n                return this.parseXML(xml, opt);\n            }\n        } else {\n            return null;\n        }\n    };\n\n    this.parseXML = function (oXMLParent, opt) {\n\n        // initialize options\n        for (var key in opt) {\n            options[key] = opt[key];\n        }\n\n        var vResult = {},\n            nLength = 0,\n            sCollectedTxt = \"\";\n\n        // iterate over the children\n        var childNum = oXMLParent.childNodes.length;\n        if (childNum) {\n            for (var oNode, sProp, vContent, nItem = 0; nItem < oXMLParent.childNodes.length; nItem++) {\n                oNode = oXMLParent.childNodes.item(nItem);\n\n                if (oNode.nodeType === 4) {\n                    if (options.mergeCDATA) {\n                        sCollectedTxt += oNode.nodeValue;\n                    }\n                } /* nodeType is \"CDATASection\" (4) */\n                else if (oNode.nodeType === 3) {\n                    sCollectedTxt += oNode.nodeValue;\n                } /* nodeType is \"Text\" (3) */\n                else if (oNode.nodeType === 1) { /* nodeType is \"Element\" (1) */\n\n                    if (nLength === 0) {\n                        vResult = {};\n                    }\n\n                    // using nodeName to support browser (IE) implementation with no 'localName' property\n                    if (options.stripElemPrefix) {\n                        sProp = oNode.nodeName.replace(prefixMatch, '');\n                    } else {\n                        sProp = oNode.nodeName;\n                    }\n\n                    vContent = xmlToJSON.parseXML(oNode);\n\n                    if (vResult.hasOwnProperty(sProp)) {\n                        if (vResult[sProp].constructor !== Array) {\n                            vResult[sProp] = [vResult[sProp]];\n                        }\n                        vResult[sProp].push(vContent);\n\n                    } else {\n                        vResult[sProp] = vContent;\n                        nLength++;\n                    }\n                }\n            }\n        }\n\n        if (!Object.keys(vResult).length) {\n            // vResult = sCollectedTxt.replace(trimMatch, '') || ''; // by carsonxu 修复 getBucket返回的 Key 是 \" /\" 这种场景\n            vResult = sCollectedTxt || '';\n        }\n\n        return vResult;\n    };\n\n    // Convert xmlDocument to a string\n    // Returns null on failure\n    this.xmlToString = function (xmlDoc) {\n        try {\n            var xmlString = xmlDoc.xml ? xmlDoc.xml : (new XMLSerializer()).serializeToString(xmlDoc);\n            return xmlString;\n        } catch (err) {\n            return null;\n        }\n    };\n\n    // Convert a string to XML Node Structure\n    // Returns null on failure\n    this.stringToXML = function (xmlString) {\n        try {\n            var xmlDoc = null;\n\n            if (window.DOMParser) {\n\n                var parser = new DOMParser();\n                xmlDoc = parser.parseFromString(xmlString, \"text/xml\");\n\n                return xmlDoc;\n            } else {\n                xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\n                xmlDoc.async = false;\n                xmlDoc.loadXML(xmlString);\n\n                return xmlDoc;\n            }\n        } catch (e) {\n            return null;\n        }\n    };\n\n    return this;\n\n}).call({});\n\nvar xml2json = function (xmlString) {\n    return xmlToJSON.parseString(xmlString);\n};\n\nmodule.exports = xml2json;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}