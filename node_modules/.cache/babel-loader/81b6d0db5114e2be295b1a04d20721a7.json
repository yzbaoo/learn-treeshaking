{"ast":null,"code":"'use strict';\n\nconst util = require('./util');\n\nconst convertToJson = function (node, options, parentTagName) {\n  const jObj = {}; // when no child node or attr is present\n\n  if ((!node.child || util.isEmptyObject(node.child)) && (!node.attrsMap || util.isEmptyObject(node.attrsMap))) {\n    return util.isExist(node.val) ? node.val : '';\n  } // otherwise create a textnode if node has some text\n\n\n  if (util.isExist(node.val) && !(typeof node.val === 'string' && (node.val === '' || node.val === options.cdataPositionChar))) {\n    const asArray = util.isTagNameInArrayMode(node.tagname, options.arrayMode, parentTagName);\n    jObj[options.textNodeName] = asArray ? [node.val] : node.val;\n  }\n\n  util.merge(jObj, node.attrsMap, options.arrayMode);\n  const keys = Object.keys(node.child);\n\n  for (let index = 0; index < keys.length; index++) {\n    const tagName = keys[index];\n\n    if (node.child[tagName] && node.child[tagName].length > 1) {\n      jObj[tagName] = [];\n\n      for (let tag in node.child[tagName]) {\n        if (node.child[tagName].hasOwnProperty(tag)) {\n          jObj[tagName].push(convertToJson(node.child[tagName][tag], options, tagName));\n        }\n      }\n    } else {\n      const result = convertToJson(node.child[tagName][0], options, tagName);\n      const asArray = options.arrayMode === true && typeof result === 'object' || util.isTagNameInArrayMode(tagName, options.arrayMode, parentTagName);\n      jObj[tagName] = asArray ? [result] : result;\n    }\n  } //add value\n\n\n  return jObj;\n};\n\nexports.convertToJson = convertToJson;","map":{"version":3,"names":["util","require","convertToJson","node","options","parentTagName","jObj","child","isEmptyObject","attrsMap","isExist","val","cdataPositionChar","asArray","isTagNameInArrayMode","tagname","arrayMode","textNodeName","merge","keys","Object","index","length","tagName","tag","hasOwnProperty","push","result","exports"],"sources":["/Users/yzbaoo/Desktop/huohua/ilc-web-packages/node_modules/fast-xml-parser/src/node2json.js"],"sourcesContent":["'use strict';\n\nconst util = require('./util');\n\nconst convertToJson = function(node, options, parentTagName) {\n  const jObj = {};\n\n  // when no child node or attr is present\n  if ((!node.child || util.isEmptyObject(node.child)) && (!node.attrsMap || util.isEmptyObject(node.attrsMap))) {\n    return util.isExist(node.val) ? node.val : '';\n  }\n\n  // otherwise create a textnode if node has some text\n  if (util.isExist(node.val) && !(typeof node.val === 'string' && (node.val === '' || node.val === options.cdataPositionChar))) {\n    const asArray = util.isTagNameInArrayMode(node.tagname, options.arrayMode, parentTagName)\n    jObj[options.textNodeName] = asArray ? [node.val] : node.val;\n  }\n\n  util.merge(jObj, node.attrsMap, options.arrayMode);\n\n  const keys = Object.keys(node.child);\n  for (let index = 0; index < keys.length; index++) {\n    const tagName = keys[index];\n    if (node.child[tagName] && node.child[tagName].length > 1) {\n      jObj[tagName] = [];\n      for (let tag in node.child[tagName]) {\n        if (node.child[tagName].hasOwnProperty(tag)) {\n          jObj[tagName].push(convertToJson(node.child[tagName][tag], options, tagName));\n        }\n      }\n    } else {\n      const result = convertToJson(node.child[tagName][0], options, tagName);\n      const asArray = (options.arrayMode === true && typeof result === 'object') || util.isTagNameInArrayMode(tagName, options.arrayMode, parentTagName);\n      jObj[tagName] = asArray ? [result] : result;\n    }\n  }\n\n  //add value\n  return jObj;\n};\n\nexports.convertToJson = convertToJson;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}