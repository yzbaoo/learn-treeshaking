{"ast":null,"code":"var REQUEST = require('../lib/request');\n\nvar util = require('./util'); // Bucket 相关\n\n/**\n * 获取用户的 bucket 列表\n * @param  {Object}  params         回调函数，必须，下面为参数列表\n * 无特殊参数\n * @param  {Function}  callback     回调函数，必须\n */\n\n\nfunction getService(params, callback) {\n  if (typeof params === 'function') {\n    callback = params;\n    params = {};\n  }\n\n  var protocol = this.options.Protocol || (util.isBrowser && location.protocol === 'http:' ? 'http:' : 'https:');\n  var domain = this.options.ServiceDomain;\n  var appId = params.AppId || this.options.appId;\n  var region = params.Region;\n\n  if (domain) {\n    domain = domain.replace(/\\{\\{AppId\\}\\}/ig, appId || '').replace(/\\{\\{Region\\}\\}/ig, region || '').replace(/\\{\\{.*?\\}\\}/ig, '');\n\n    if (!/^[a-zA-Z]+:\\/\\//.test(domain)) {\n      domain = protocol + '//' + domain;\n    }\n\n    if (domain.slice(-1) === '/') {\n      domain = domain.slice(0, -1);\n    }\n  } else if (region) {\n    domain = protocol + '//cos.' + region + '.myqcloud.com';\n  } else {\n    domain = protocol + '//service.cos.myqcloud.com';\n  }\n\n  var SignHost = '';\n  var standardHost = region ? 'cos.' + region + '.myqcloud.com' : 'service.cos.myqcloud.com';\n  var urlHost = domain.replace(/^https?:\\/\\/([^/]+)(\\/.*)?$/, '$1');\n  if (standardHost === urlHost) SignHost = standardHost;\n  submitRequest.call(this, {\n    Action: 'name/cos:GetService',\n    url: domain,\n    method: 'GET',\n    headers: params.Headers,\n    SignHost: SignHost\n  }, function (err, data) {\n    if (err) return callback(err);\n    var buckets = data && data.ListAllMyBucketsResult && data.ListAllMyBucketsResult.Buckets && data.ListAllMyBucketsResult.Buckets.Bucket || [];\n    buckets = util.isArray(buckets) ? buckets : [buckets];\n    var owner = data && data.ListAllMyBucketsResult && data.ListAllMyBucketsResult.Owner || {};\n    callback(null, {\n      Buckets: buckets,\n      Owner: owner,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 创建 Bucket，并初始化访问权限\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n *     @param  {String}  params.ACL                 用户自定义文件权限，可以设置：private，public-read；默认值：private，非必须\n *     @param  {String}  params.GrantRead           赋予被授权者读的权限，格式x-cos-grant-read: uin=\" \",uin=\" \"，非必须\n *     @param  {String}  params.GrantWrite          赋予被授权者写的权限，格式x-cos-grant-write: uin=\" \",uin=\" \"，非必须\n *     @param  {String}  params.GrantFullControl    赋予被授权者读写权限，格式x-cos-grant-full-control: uin=\" \",uin=\" \"，非必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n *     @return  {String}  data.Location             操作地址\n */\n\n\nfunction putBucket(params, callback) {\n  var self = this;\n  var xml = '';\n\n  if (params['BucketAZConfig']) {\n    var CreateBucketConfiguration = {\n      BucketAZConfig: params.BucketAZConfig\n    };\n    xml = util.json2xml({\n      CreateBucketConfiguration: CreateBucketConfiguration\n    });\n  }\n\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucket',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    body: xml\n  }, function (err, data) {\n    if (err) return callback(err);\n    var url = getUrl({\n      protocol: self.options.Protocol,\n      domain: self.options.Domain,\n      bucket: params.Bucket,\n      region: params.Region,\n      isLocation: true\n    });\n    callback(null, {\n      Location: url,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 查看是否存在该Bucket，是否有权限访问\n * @param  {Object}  params                     参数对象，必须\n *     @param  {String}  params.Bucket          Bucket名称，必须\n *     @param  {String}  params.Region          地域名称，必须\n * @param  {Function}  callback                 回调函数，必须\n * @return  {Object}  err                       请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                      返回的数据\n *     @return  {Boolean}  data.BucketExist     Bucket是否存在\n *     @return  {Boolean}  data.BucketAuth      是否有 Bucket 的访问权限\n */\n\n\nfunction headBucket(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:HeadBucket',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    method: 'HEAD'\n  }, callback);\n}\n/**\n * 获取 Bucket 下的 object 列表\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n *     @param  {String}  params.Prefix              前缀匹配，用来规定返回的文件前缀地址，非必须\n *     @param  {String}  params.Delimiter           定界符为一个符号，如果有Prefix，则将Prefix到delimiter之间的相同路径归为一类，非必须\n *     @param  {String}  params.Marker              默认以UTF-8二进制顺序列出条目，所有列出条目从marker开始，非必须\n *     @param  {String}  params.MaxKeys             单次返回最大的条目数量，默认1000，非必须\n *     @param  {String}  params.EncodingType        规定返回值的编码方式，非必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n *     @return  {Object}  data.ListBucketResult     返回的 object 列表信息\n */\n\n\nfunction getBucket(params, callback) {\n  var reqParams = {};\n  reqParams['prefix'] = params['Prefix'] || '';\n  reqParams['delimiter'] = params['Delimiter'];\n  reqParams['marker'] = params['Marker'];\n  reqParams['max-keys'] = params['MaxKeys'];\n  reqParams['encoding-type'] = params['EncodingType'];\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucket',\n    ResourceKey: reqParams['prefix'],\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    qs: reqParams\n  }, function (err, data) {\n    if (err) return callback(err);\n    var ListBucketResult = data.ListBucketResult || {};\n    var Contents = ListBucketResult.Contents || [];\n    var CommonPrefixes = ListBucketResult.CommonPrefixes || [];\n    Contents = util.isArray(Contents) ? Contents : [Contents];\n    CommonPrefixes = util.isArray(CommonPrefixes) ? CommonPrefixes : [CommonPrefixes];\n    var result = util.clone(ListBucketResult);\n    util.extend(result, {\n      Contents: Contents,\n      CommonPrefixes: CommonPrefixes,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n    callback(null, result);\n  });\n}\n/**\n * 删除 Bucket\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n * @param  {Function}  callback             回调函数，必须\n * @return  {Object}  err                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                  返回的数据\n *     @return  {String}  data.Location     操作地址\n */\n\n\nfunction deleteBucket(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteBucket',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    method: 'DELETE'\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 设置 Bucket 的 权限列表\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n *     @param  {String}  params.ACL                 用户自定义文件权限，可以设置：private，public-read；默认值：private，非必须\n *     @param  {String}  params.GrantRead           赋予被授权者读的权限，格式x-cos-grant-read: uin=\" \",uin=\" \"，非必须\n *     @param  {String}  params.GrantWrite          赋予被授权者写的权限，格式x-cos-grant-write: uin=\" \",uin=\" \"，非必须\n *     @param  {String}  params.GrantFullControl    赋予被授权者读写权限，格式x-cos-grant-full-control: uin=\" \",uin=\" \"，非必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n */\n\n\nfunction putBucketAcl(params, callback) {\n  var headers = params.Headers;\n  var xml = '';\n\n  if (params['AccessControlPolicy']) {\n    var AccessControlPolicy = util.clone(params['AccessControlPolicy'] || {});\n    var Grants = AccessControlPolicy.Grants || AccessControlPolicy.Grant;\n    Grants = util.isArray(Grants) ? Grants : [Grants];\n    delete AccessControlPolicy.Grant;\n    delete AccessControlPolicy.Grants;\n    AccessControlPolicy.AccessControlList = {\n      Grant: Grants\n    };\n    xml = util.json2xml({\n      AccessControlPolicy: AccessControlPolicy\n    });\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  } // Grant Header 去重\n\n\n  util.each(headers, function (val, key) {\n    if (key.indexOf('x-cos-grant-') === 0) {\n      headers[key] = uniqGrant(headers[key]);\n    }\n  });\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketACL',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: headers,\n    action: 'acl',\n    body: xml\n  }, function (err, data) {\n    if (err) return callback(err);\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的 权限列表\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n *     @return  {Object}  data.AccessControlPolicy  访问权限信息\n */\n\n\nfunction getBucketAcl(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketACL',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'acl'\n  }, function (err, data) {\n    if (err) return callback(err);\n    var AccessControlPolicy = data.AccessControlPolicy || {};\n    var Owner = AccessControlPolicy.Owner || {};\n    var Grant = AccessControlPolicy.AccessControlList.Grant || [];\n    Grant = util.isArray(Grant) ? Grant : [Grant];\n    var result = decodeAcl(AccessControlPolicy);\n\n    if (data.headers && data.headers['x-cos-acl']) {\n      result.ACL = data.headers['x-cos-acl'];\n    }\n\n    result = util.extend(result, {\n      Owner: Owner,\n      Grants: Grant,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n    callback(null, result);\n  });\n}\n/**\n * 设置 Bucket 的 跨域设置\n * @param  {Object}  params                             参数对象，必须\n *     @param  {String}  params.Bucket                  Bucket名称，必须\n *     @param  {String}  params.Region                  地域名称，必须\n *     @param  {Object}  params.CORSConfiguration       相关的跨域设置，必须\n * @param  {Array}  params.CORSConfiguration.CORSRules  对应的跨域规则\n * @param  {Function}  callback                         回调函数，必须\n * @return  {Object}  err                               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                              返回的数据\n */\n\n\nfunction putBucketCors(params, callback) {\n  var CORSConfiguration = params['CORSConfiguration'] || {};\n  var CORSRules = CORSConfiguration['CORSRules'] || params['CORSRules'] || [];\n  CORSRules = util.clone(util.isArray(CORSRules) ? CORSRules : [CORSRules]);\n  util.each(CORSRules, function (rule) {\n    util.each(['AllowedOrigin', 'AllowedHeader', 'AllowedMethod', 'ExposeHeader'], function (key) {\n      var sKey = key + 's';\n      var val = rule[sKey] || rule[key] || [];\n      delete rule[sKey];\n      rule[key] = util.isArray(val) ? val : [val];\n    });\n  });\n  var xml = util.json2xml({\n    CORSConfiguration: {\n      CORSRule: CORSRules\n    }\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketCORS',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'cors',\n    headers: headers\n  }, function (err, data) {\n    if (err) return callback(err);\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的 跨域设置\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n *     @return  {Object}  data.CORSRules            Bucket的跨域设置\n */\n\n\nfunction getBucketCors(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketCORS',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'cors'\n  }, function (err, data) {\n    if (err) {\n      if (err.statusCode === 404 && err.error && err.error.Code === 'NoSuchCORSConfiguration') {\n        var result = {\n          CORSRules: [],\n          statusCode: err.statusCode\n        };\n        err.headers && (result.headers = err.headers);\n        callback(null, result);\n      } else {\n        callback(err);\n      }\n\n      return;\n    }\n\n    var CORSConfiguration = data.CORSConfiguration || {};\n    var CORSRules = CORSConfiguration.CORSRules || CORSConfiguration.CORSRule || [];\n    CORSRules = util.clone(util.isArray(CORSRules) ? CORSRules : [CORSRules]);\n    util.each(CORSRules, function (rule) {\n      util.each(['AllowedOrigin', 'AllowedHeader', 'AllowedMethod', 'ExposeHeader'], function (key) {\n        var sKey = key + 's';\n        var val = rule[sKey] || rule[key] || [];\n        delete rule[key];\n        rule[sKey] = util.isArray(val) ? val : [val];\n      });\n    });\n    callback(null, {\n      CORSRules: CORSRules,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 删除 Bucket 的 跨域设置\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n * @param  {Function}  callback             回调函数，必须\n * @return  {Object}  err                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                  返回的数据\n */\n\n\nfunction deleteBucketCors(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteBucketCORS',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'cors'\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode || err.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的 地域信息\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据，包含地域信息 LocationConstraint\n */\n\n\nfunction getBucketLocation(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketLocation',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'location'\n  }, callback);\n}\n\nfunction putBucketPolicy(params, callback) {\n  var Policy = params['Policy'];\n\n  try {\n    if (typeof Policy === 'string') Policy = JSON.parse(Policy);\n  } catch (e) {}\n\n  if (!Policy || typeof Policy === 'string') return callback(util.error(new Error('Policy format error')));\n  var PolicyStr = JSON.stringify(Policy);\n  if (!Policy.version) Policy.version = '2.0';\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/json';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(PolicyStr));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketPolicy',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    action: 'policy',\n    body: PolicyStr,\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的读取权限策略\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction getBucketPolicy(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketPolicy',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'policy',\n    rawBody: true\n  }, function (err, data) {\n    if (err) {\n      if (err.statusCode && err.statusCode === 403) {\n        return callback(util.error(err, {\n          ErrorStatus: 'Access Denied'\n        }));\n      }\n\n      if (err.statusCode && err.statusCode === 405) {\n        return callback(util.error(err, {\n          ErrorStatus: 'Method Not Allowed'\n        }));\n      }\n\n      if (err.statusCode && err.statusCode === 404) {\n        return callback(util.error(err, {\n          ErrorStatus: 'Policy Not Found'\n        }));\n      }\n\n      return callback(err);\n    }\n\n    var Policy = {};\n\n    try {\n      Policy = JSON.parse(data.body);\n    } catch (e) {}\n\n    callback(null, {\n      Policy: Policy,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 删除 Bucket 的 跨域设置\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n * @param  {Function}  callback             回调函数，必须\n * @return  {Object}  err                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                  返回的数据\n */\n\n\nfunction deleteBucketPolicy(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteBucketPolicy',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'policy'\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode || err.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 设置 Bucket 的标签\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {Array}   params.TagSet  标签设置，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction putBucketTagging(params, callback) {\n  var Tagging = params['Tagging'] || {};\n  var Tags = Tagging.TagSet || Tagging.Tags || params['Tags'] || [];\n  Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);\n  var xml = util.json2xml({\n    Tagging: {\n      TagSet: {\n        Tag: Tags\n      }\n    }\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketTagging',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'tagging',\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的标签设置\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction getBucketTagging(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketTagging',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'tagging'\n  }, function (err, data) {\n    if (err) {\n      if (err.statusCode === 404 && err.error && (err.error === \"Not Found\" || err.error.Code === 'NoSuchTagSet')) {\n        var result = {\n          Tags: [],\n          statusCode: err.statusCode\n        };\n        err.headers && (result.headers = err.headers);\n        callback(null, result);\n      } else {\n        callback(err);\n      }\n\n      return;\n    }\n\n    var Tags = [];\n\n    try {\n      Tags = data.Tagging.TagSet.Tag || [];\n    } catch (e) {}\n\n    Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);\n    callback(null, {\n      Tags: Tags,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 删除 Bucket 的 标签设置\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回的数据\n */\n\n\nfunction deleteBucketTagging(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteBucketTagging',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'tagging'\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n\nfunction putBucketLifecycle(params, callback) {\n  var LifecycleConfiguration = params['LifecycleConfiguration'] || {};\n  var Rules = LifecycleConfiguration.Rules || params.Rules || [];\n  Rules = util.clone(Rules);\n  var xml = util.json2xml({\n    LifecycleConfiguration: {\n      Rule: Rules\n    }\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketLifecycle',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'lifecycle',\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n\nfunction getBucketLifecycle(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketLifecycle',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'lifecycle'\n  }, function (err, data) {\n    if (err) {\n      if (err.statusCode === 404 && err.error && err.error.Code === 'NoSuchLifecycleConfiguration') {\n        var result = {\n          Rules: [],\n          statusCode: err.statusCode\n        };\n        err.headers && (result.headers = err.headers);\n        callback(null, result);\n      } else {\n        callback(err);\n      }\n\n      return;\n    }\n\n    var Rules = [];\n\n    try {\n      Rules = data.LifecycleConfiguration.Rule || [];\n    } catch (e) {}\n\n    Rules = util.clone(util.isArray(Rules) ? Rules : [Rules]);\n    callback(null, {\n      Rules: Rules,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n\nfunction deleteBucketLifecycle(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteBucketLifecycle',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'lifecycle'\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n\nfunction putBucketVersioning(params, callback) {\n  if (!params['VersioningConfiguration']) {\n    callback(util.error(new Error('missing param VersioningConfiguration')));\n    return;\n  }\n\n  var VersioningConfiguration = params['VersioningConfiguration'] || {};\n  var xml = util.json2xml({\n    VersioningConfiguration: VersioningConfiguration\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketVersioning',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'versioning',\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n\nfunction getBucketVersioning(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketVersioning',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'versioning'\n  }, function (err, data) {\n    if (!err) {\n      !data.VersioningConfiguration && (data.VersioningConfiguration = {});\n    }\n\n    callback(err, data);\n  });\n}\n\nfunction putBucketReplication(params, callback) {\n  var ReplicationConfiguration = util.clone(params.ReplicationConfiguration);\n  var xml = util.json2xml({\n    ReplicationConfiguration: ReplicationConfiguration\n  });\n  xml = xml.replace(/<(\\/?)Rules>/ig, '<$1Rule>');\n  xml = xml.replace(/<(\\/?)Tags>/ig, '<$1Tag>');\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketReplication',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'replication',\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n\nfunction getBucketReplication(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketReplication',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'replication'\n  }, function (err, data) {\n    if (err) {\n      if (err.statusCode === 404 && err.error && (err.error === 'Not Found' || err.error.Code === 'ReplicationConfigurationnotFoundError')) {\n        var result = {\n          ReplicationConfiguration: {\n            Rules: []\n          },\n          statusCode: err.statusCode\n        };\n        err.headers && (result.headers = err.headers);\n        callback(null, result);\n      } else {\n        callback(err);\n      }\n\n      return;\n    }\n\n    !data.ReplicationConfiguration && (data.ReplicationConfiguration = {});\n\n    if (data.ReplicationConfiguration.Rule) {\n      data.ReplicationConfiguration.Rules = util.makeArray(data.ReplicationConfiguration.Rule);\n      delete data.ReplicationConfiguration.Rule;\n    }\n\n    callback(err, data);\n  });\n}\n\nfunction deleteBucketReplication(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteBucketReplication',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'replication'\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 设置 Bucket 静态网站配置信息\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n *     @param  {Object}  params.WebsiteConfiguration                        地域名称，必须\n *         @param  {Object}   WebsiteConfiguration.IndexDocument            索引文档，必须\n *         @param  {Object}   WebsiteConfiguration.ErrorDocument            错误文档，非必须\n *         @param  {Object}   WebsiteConfiguration.RedirectAllRequestsTo    重定向所有请求，非必须\n *         @param  {Array}   params.RoutingRules                            重定向规则，非必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\n\n\nfunction putBucketWebsite(params, callback) {\n  if (!params['WebsiteConfiguration']) {\n    callback(util.error(new Error('missing param WebsiteConfiguration')));\n    return;\n  }\n\n  var WebsiteConfiguration = util.clone(params['WebsiteConfiguration'] || {});\n  var RoutingRules = WebsiteConfiguration['RoutingRules'] || WebsiteConfiguration['RoutingRule'] || [];\n  RoutingRules = util.isArray(RoutingRules) ? RoutingRules : [RoutingRules];\n  delete WebsiteConfiguration.RoutingRule;\n  delete WebsiteConfiguration.RoutingRules;\n  if (RoutingRules.length) WebsiteConfiguration.RoutingRules = {\n    RoutingRule: RoutingRules\n  };\n  var xml = util.json2xml({\n    WebsiteConfiguration: WebsiteConfiguration\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketWebsite',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'website',\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的静态网站配置信息\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction getBucketWebsite(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketWebsite',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    headers: params.Headers,\n    action: 'website'\n  }, function (err, data) {\n    if (err) {\n      if (err.statusCode === 404 && err.error.Code === 'NoSuchWebsiteConfiguration') {\n        var result = {\n          WebsiteConfiguration: {},\n          statusCode: err.statusCode\n        };\n        err.headers && (result.headers = err.headers);\n        callback(null, result);\n      } else {\n        callback(err);\n      }\n\n      return;\n    }\n\n    var WebsiteConfiguration = data.WebsiteConfiguration || {};\n\n    if (WebsiteConfiguration['RoutingRules']) {\n      var RoutingRules = util.clone(WebsiteConfiguration['RoutingRules'].RoutingRule || []);\n      RoutingRules = util.makeArray(RoutingRules);\n      WebsiteConfiguration.RoutingRules = RoutingRules;\n    }\n\n    callback(null, {\n      WebsiteConfiguration: WebsiteConfiguration,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 删除 Bucket 的静态网站配置\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction deleteBucketWebsite(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteBucketWebsite',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'website'\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 设置 Bucket 的防盗链白名单或者黑名单\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n *     @param  {Object}  params.RefererConfiguration                        地域名称，必须\n *         @param  {String}   RefererConfiguration.Status                   是否开启防盗链，枚举值：Enabled、Disabled\n *         @param  {String}   RefererConfiguration.RefererType              防盗链类型，枚举值：Black-List、White-List，必须\n *         @param  {Array}   RefererConfiguration.DomianList.Domain         生效域名，必须\n *         @param  {String}   RefererConfiguration.EmptyReferConfiguration  ，非必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\n\n\nfunction putBucketReferer(params, callback) {\n  if (!params['RefererConfiguration']) {\n    callback(util.error(new Error('missing param RefererConfiguration')));\n    return;\n  }\n\n  var RefererConfiguration = util.clone(params['RefererConfiguration'] || {});\n  var DomainList = RefererConfiguration['DomainList'] || {};\n  var Domains = DomainList['Domains'] || DomainList['Domain'] || [];\n  Domains = util.isArray(Domains) ? Domains : [Domains];\n  if (Domains.length) RefererConfiguration.DomainList = {\n    Domain: Domains\n  };\n  var xml = util.json2xml({\n    RefererConfiguration: RefererConfiguration\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketReferer',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'referer',\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的防盗链白名单或者黑名单\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction getBucketReferer(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketReferer',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    headers: params.Headers,\n    action: 'referer'\n  }, function (err, data) {\n    if (err) {\n      if (err.statusCode === 404 && err.error.Code === 'NoSuchRefererConfiguration') {\n        var result = {\n          WebsiteConfiguration: {},\n          statusCode: err.statusCode\n        };\n        err.headers && (result.headers = err.headers);\n        callback(null, result);\n      } else {\n        callback(err);\n      }\n\n      return;\n    }\n\n    var RefererConfiguration = data.RefererConfiguration || {};\n\n    if (RefererConfiguration['DomainList']) {\n      var Domains = util.makeArray(RefererConfiguration['DomainList'].Domain || []);\n      RefererConfiguration.DomainList = {\n        Domains: Domains\n      };\n    }\n\n    callback(null, {\n      RefererConfiguration: RefererConfiguration,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 设置 Bucket 自定义域名\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\n\n\nfunction putBucketDomain(params, callback) {\n  var DomainConfiguration = params['DomainConfiguration'] || {};\n  var DomainRule = DomainConfiguration.DomainRule || params.DomainRule || [];\n  DomainRule = util.clone(DomainRule);\n  var xml = util.json2xml({\n    DomainConfiguration: {\n      DomainRule: DomainRule\n    }\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketDomain',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'domain',\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的自定义域名\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction getBucketDomain(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketDomain',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'domain'\n  }, function (err, data) {\n    if (err) return callback(err);\n    var DomainRule = [];\n\n    try {\n      DomainRule = data.DomainConfiguration.DomainRule || [];\n    } catch (e) {}\n\n    DomainRule = util.clone(util.isArray(DomainRule) ? DomainRule : [DomainRule]);\n    callback(null, {\n      DomainRule: DomainRule,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 删除 Bucket 自定义域名\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction deleteBucketDomain(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteBucketDomain',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'domain'\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 设置 Bucket 的回源\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\n\n\nfunction putBucketOrigin(params, callback) {\n  var OriginConfiguration = params['OriginConfiguration'] || {};\n  var OriginRule = OriginConfiguration.OriginRule || params.OriginRule || [];\n  OriginRule = util.clone(OriginRule);\n  var xml = util.json2xml({\n    OriginConfiguration: {\n      OriginRule: OriginRule\n    }\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketOrigin',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'origin',\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的回源\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction getBucketOrigin(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketOrigin',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'origin'\n  }, function (err, data) {\n    if (err) return callback(err);\n    var OriginRule = [];\n\n    try {\n      OriginRule = data.OriginConfiguration.OriginRule || [];\n    } catch (e) {}\n\n    OriginRule = util.clone(util.isArray(OriginRule) ? OriginRule : [OriginRule]);\n    callback(null, {\n      OriginRule: OriginRule,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 删除 Bucket 的回源\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction deleteBucketOrigin(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteBucketOrigin',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'origin'\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 设置 Bucket 的日志记录\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n *     @param  {(Object|String)}  params.BucketLoggingStatus                         说明日志记录配置的状态，如果无子节点信息则意为关闭日志记录，必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\n\n\nfunction putBucketLogging(params, callback) {\n  var xml = util.json2xml({\n    BucketLoggingStatus: params['BucketLoggingStatus'] || ''\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketLogging',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'logging',\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的日志记录\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction getBucketLogging(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketLogging',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'logging'\n  }, function (err, data) {\n    if (err) return callback(err);\n    callback(null, {\n      BucketLoggingStatus: data.BucketLoggingStatus,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 创建/编辑 Bucket 的清单任务\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n *     @param  {String}  params.Id                                          清单任务的名称，必须\n *     @param  {Object}  params.InventoryConfiguration                      包含清单的配置参数，必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\n\n\nfunction putBucketInventory(params, callback) {\n  var InventoryConfiguration = util.clone(params['InventoryConfiguration']);\n\n  if (InventoryConfiguration.OptionalFields) {\n    var Field = InventoryConfiguration.OptionalFields || [];\n    InventoryConfiguration.OptionalFields = {\n      Field: Field\n    };\n  }\n\n  if (InventoryConfiguration.Destination && InventoryConfiguration.Destination.COSBucketDestination && InventoryConfiguration.Destination.COSBucketDestination.Encryption) {\n    var Encryption = InventoryConfiguration.Destination.COSBucketDestination.Encryption;\n\n    if (Object.keys(Encryption).indexOf('SSECOS') > -1) {\n      Encryption['SSE-COS'] = Encryption['SSECOS'];\n      delete Encryption['SSECOS'];\n    }\n  }\n\n  var xml = util.json2xml({\n    InventoryConfiguration: InventoryConfiguration\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketInventory',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'inventory',\n    qs: {\n      id: params['Id']\n    },\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的清单任务信息\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {String}  params.Id      清单任务的名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction getBucketInventory(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketInventory',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'inventory',\n    qs: {\n      id: params['Id']\n    }\n  }, function (err, data) {\n    if (err) return callback(err);\n    var InventoryConfiguration = data['InventoryConfiguration'];\n\n    if (InventoryConfiguration && InventoryConfiguration.OptionalFields && InventoryConfiguration.OptionalFields.Field) {\n      var Field = InventoryConfiguration.OptionalFields.Field;\n\n      if (!util.isArray(Field)) {\n        Field = [Field];\n      }\n\n      InventoryConfiguration.OptionalFields = Field;\n    }\n\n    if (InventoryConfiguration.Destination && InventoryConfiguration.Destination.COSBucketDestination && InventoryConfiguration.Destination.COSBucketDestination.Encryption) {\n      var Encryption = InventoryConfiguration.Destination.COSBucketDestination.Encryption;\n\n      if (Object.keys(Encryption).indexOf('SSE-COS') > -1) {\n        Encryption['SSECOS'] = Encryption['SSE-COS'];\n        delete Encryption['SSE-COS'];\n      }\n    }\n\n    callback(null, {\n      InventoryConfiguration: InventoryConfiguration,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Bucket 的清单任务信息\n * @param  {Object}  params                             参数对象，必须\n *     @param  {String}  params.Bucket                  Bucket名称，必须\n *     @param  {String}  params.Region                  地域名称，必须\n *     @param  {String}  params.ContinuationToken       当 COS 响应体中 IsTruncated 为 true，且 NextContinuationToken 节点中存在参数值时，您可以将这个参数作为 continuation-token 参数值，以获取下一页的清单任务信息，非必须\n * @param  {Function}  callback                         回调函数，必须\n * @return  {Object}  err                               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                              返回数据\n */\n\n\nfunction listBucketInventory(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:ListBucketInventory',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'inventory',\n    qs: {\n      'continuation-token': params['ContinuationToken']\n    }\n  }, function (err, data) {\n    if (err) return callback(err);\n    var ListInventoryConfigurationResult = data['ListInventoryConfigurationResult'];\n    var InventoryConfigurations = ListInventoryConfigurationResult.InventoryConfiguration || [];\n    InventoryConfigurations = util.isArray(InventoryConfigurations) ? InventoryConfigurations : [InventoryConfigurations];\n    delete ListInventoryConfigurationResult['InventoryConfiguration'];\n    util.each(InventoryConfigurations, function (InventoryConfiguration) {\n      if (InventoryConfiguration && InventoryConfiguration.OptionalFields && InventoryConfiguration.OptionalFields.Field) {\n        var Field = InventoryConfiguration.OptionalFields.Field;\n\n        if (!util.isArray(Field)) {\n          Field = [Field];\n        }\n\n        InventoryConfiguration.OptionalFields = Field;\n      }\n\n      if (InventoryConfiguration.Destination && InventoryConfiguration.Destination.COSBucketDestination && InventoryConfiguration.Destination.COSBucketDestination.Encryption) {\n        var Encryption = InventoryConfiguration.Destination.COSBucketDestination.Encryption;\n\n        if (Object.keys(Encryption).indexOf('SSE-COS') > -1) {\n          Encryption['SSECOS'] = Encryption['SSE-COS'];\n          delete Encryption['SSE-COS'];\n        }\n      }\n    });\n    ListInventoryConfigurationResult.InventoryConfigurations = InventoryConfigurations;\n    util.extend(ListInventoryConfigurationResult, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n    callback(null, ListInventoryConfigurationResult);\n  });\n}\n/**\n * 删除 Bucket 的清单任务\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {String}  params.Id      清单任务的名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\n\n\nfunction deleteBucketInventory(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteBucketInventory',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'inventory',\n    qs: {\n      id: params['Id']\n    }\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/* 全球加速 */\n\n\nfunction putBucketAccelerate(params, callback) {\n  if (!params['AccelerateConfiguration']) {\n    callback(util.error(new Error('missing param AccelerateConfiguration')));\n    return;\n  }\n\n  var configuration = {\n    AccelerateConfiguration: params.AccelerateConfiguration || {}\n  };\n  var xml = util.json2xml(configuration);\n  var headers = {};\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketAccelerate',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'accelerate',\n    headers: headers\n  }, function (err, data) {\n    if (err) return callback(err);\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n\nfunction getBucketAccelerate(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketAccelerate',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    action: 'accelerate'\n  }, function (err, data) {\n    if (!err) {\n      !data.AccelerateConfiguration && (data.AccelerateConfiguration = {});\n    }\n\n    callback(err, data);\n  });\n}\n\nfunction putBucketEncryption(params, callback) {\n  var conf = params.ServerSideEncryptionConfiguration || {};\n  var Rules = conf.Rule || conf.Rules || [];\n  var xml = util.json2xml({\n    ServerSideEncryptionConfiguration: {\n      Rule: Rules\n    }\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutBucketEncryption',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'encryption',\n    headers: headers\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n\nfunction getBucketEncryption(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketEncryption',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'encryption'\n  }, function (err, data) {\n    if (err) {\n      if (err.statusCode === 404 && err.code === 'NoSuchEncryptionConfiguration') {\n        var result = {\n          EncryptionConfiguration: {\n            Rules: []\n          },\n          statusCode: err.statusCode\n        };\n        err.headers && (result.headers = err.headers);\n        callback(null, result);\n      } else {\n        callback(err);\n      }\n\n      return;\n    }\n\n    var Rules = util.makeArray(data.EncryptionConfiguration && data.EncryptionConfiguration.Rule || []);\n    data.EncryptionConfiguration = {\n      Rules: Rules\n    };\n    callback(err, data);\n  });\n}\n\nfunction deleteBucketEncryption(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteBucketReplication',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'encryption'\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n} // Object 相关\n\n/**\n * 取回对应Object的元数据，Head的权限与Get的权限一致\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n *     @param  {String}  params.Key                 文件名称，必须\n *     @param  {String}  params.IfModifiedSince     当Object在指定时间后被修改，则返回对应Object元信息，否则返回304，非必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          为指定 object 的元数据，如果设置了 IfModifiedSince ，且文件未修改，则返回一个对象，NotModified 属性为 true\n *     @return  {Boolean}  data.NotModified         是否在 IfModifiedSince 时间点之后未修改该 object，则为 true\n */\n\n\nfunction headObject(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:HeadObject',\n    method: 'HEAD',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    VersionId: params.VersionId,\n    headers: params.Headers\n  }, function (err, data) {\n    if (err) {\n      var statusCode = err.statusCode;\n\n      if (params.Headers['If-Modified-Since'] && statusCode && statusCode === 304) {\n        return callback(null, {\n          NotModified: true,\n          statusCode: statusCode\n        });\n      }\n\n      return callback(err);\n    }\n\n    data.ETag = util.attr(data.headers, 'etag', '');\n    callback(null, data);\n  });\n}\n\nfunction listObjectVersions(params, callback) {\n  var reqParams = {};\n  reqParams['prefix'] = params['Prefix'] || '';\n  reqParams['delimiter'] = params['Delimiter'];\n  reqParams['key-marker'] = params['KeyMarker'];\n  reqParams['version-id-marker'] = params['VersionIdMarker'];\n  reqParams['max-keys'] = params['MaxKeys'];\n  reqParams['encoding-type'] = params['EncodingType'];\n  submitRequest.call(this, {\n    Action: 'name/cos:GetBucketObjectVersions',\n    ResourceKey: reqParams['prefix'],\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    qs: reqParams,\n    action: 'versions'\n  }, function (err, data) {\n    if (err) return callback(err);\n    var ListVersionsResult = data.ListVersionsResult || {};\n    var DeleteMarkers = ListVersionsResult.DeleteMarker || [];\n    DeleteMarkers = util.isArray(DeleteMarkers) ? DeleteMarkers : [DeleteMarkers];\n    var Versions = ListVersionsResult.Version || [];\n    Versions = util.isArray(Versions) ? Versions : [Versions];\n    var result = util.clone(ListVersionsResult);\n    delete result.DeleteMarker;\n    delete result.Version;\n    util.extend(result, {\n      DeleteMarkers: DeleteMarkers,\n      Versions: Versions,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n    callback(null, result);\n  });\n}\n/**\n * 下载 object\n * @param  {Object}  params                                 参数对象，必须\n *     @param  {String}  params.Bucket                      Bucket名称，必须\n *     @param  {String}  params.Region                      地域名称，必须\n *     @param  {String}  params.Key                         文件名称，必须\n *     @param  {WriteStream}  params.Output                 文件写入流，非必须\n *     @param  {String}  params.IfModifiedSince             当Object在指定时间后被修改，则返回对应Object元信息，否则返回304，非必须\n *     @param  {String}  params.IfUnmodifiedSince           如果文件修改时间早于或等于指定时间，才返回文件内容。否则返回 412 (precondition failed)，非必须\n *     @param  {String}  params.IfMatch                     当 ETag 与指定的内容一致，才返回文件。否则返回 412 (precondition failed)，非必须\n *     @param  {String}  params.IfNoneMatch                 当 ETag 与指定的内容不一致，才返回文件。否则返回304 (not modified)，非必须\n *     @param  {String}  params.ResponseContentType         设置返回头部中的 Content-Type 参数，非必须\n *     @param  {String}  params.ResponseContentLanguage     设置返回头部中的 Content-Language 参数，非必须\n *     @param  {String}  params.ResponseExpires             设置返回头部中的 Content-Expires 参数，非必须\n *     @param  {String}  params.ResponseCacheControl        设置返回头部中的 Cache-Control 参数，非必须\n *     @param  {String}  params.ResponseContentDisposition  设置返回头部中的 Content-Disposition 参数，非必须\n *     @param  {String}  params.ResponseContentEncoding     设置返回头部中的 Content-Encoding 参数，非必须\n * @param  {Function}  callback                             回调函数，必须\n * @param  {Object}  err                                    请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @param  {Object}  data                                   为对应的 object 数据，包括 body 和 headers\n */\n\n\nfunction getObject(params, callback) {\n  var reqParams = params.Query || {};\n  var reqParamsStr = params.QueryString || '';\n  var onProgress = util.throttleOnProgress.call(this, 0, params.onProgress);\n  reqParams['response-content-type'] = params['ResponseContentType'];\n  reqParams['response-content-language'] = params['ResponseContentLanguage'];\n  reqParams['response-expires'] = params['ResponseExpires'];\n  reqParams['response-cache-control'] = params['ResponseCacheControl'];\n  reqParams['response-content-disposition'] = params['ResponseContentDisposition'];\n  reqParams['response-content-encoding'] = params['ResponseContentEncoding']; // 如果用户自己传入了 output\n\n  submitRequest.call(this, {\n    Action: 'name/cos:GetObject',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    VersionId: params.VersionId,\n    DataType: params.DataType,\n    headers: params.Headers,\n    qs: reqParams,\n    qsStr: reqParamsStr,\n    rawBody: true,\n    onDownloadProgress: onProgress\n  }, function (err, data) {\n    onProgress(null, true);\n\n    if (err) {\n      var statusCode = err.statusCode;\n\n      if (params.Headers['If-Modified-Since'] && statusCode && statusCode === 304) {\n        return callback(null, {\n          NotModified: true\n        });\n      }\n\n      return callback(err);\n    }\n\n    callback(null, {\n      Body: data.body,\n      ETag: util.attr(data.headers, 'etag', ''),\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 上传 object\n * @param  {Object} params                                          参数对象，必须\n *     @param  {String}  params.Bucket                              Bucket名称，必须\n *     @param  {String}  params.Region                              地域名称，必须\n *     @param  {String}  params.Key                                 文件名称，必须\n *     @param  {File || Blob || String}  params.Body                上传文件对象或字符串，必须\n *     @param  {String}  params.CacheControl                        RFC 2616 中定义的缓存策略，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentDisposition                  RFC 2616 中定义的文件名称，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentEncoding                     RFC 2616 中定义的编码格式，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentLength                       RFC 2616 中定义的 HTTP 请求内容长度（字节），必须\n *     @param  {String}  params.ContentType                         RFC 2616 中定义的内容类型（MIME），将作为 Object 元数据保存，非必须\n *     @param  {String}  params.Expect                              当使用 Expect: 100-continue 时，在收到服务端确认后，才会发送请求内容，非必须\n *     @param  {String}  params.Expires                             RFC 2616 中定义的过期时间，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ACL                                 允许用户自定义文件权限，有效值：private | public-read，非必须\n *     @param  {String}  params.GrantRead                           赋予被授权者读取对象的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantReadAcp                        赋予被授权者读取对象的访问控制列表（ACL）的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantWriteAcp                       赋予被授权者写入对象的访问控制列表（ACL）的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantFullControl                    赋予被授权者操作对象的所有权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.StorageClass                        设置对象的存储级别，枚举值：STANDARD、STANDARD_IA、ARCHIVE，默认值：STANDARD，非必须\n *     @param  {String}  params.x-cos-meta-*                        允许用户自定义的头部信息，将作为对象的元数据保存。大小限制2KB，非必须\n *     @param  {String}  params.ContentSha1                         RFC 3174 中定义的 160-bit 内容 SHA-1 算法校验，非必须\n *     @param  {String}  params.ServerSideEncryption                支持按照指定的加密算法进行服务端数据加密，格式 x-cos-server-side-encryption: \"AES256\"，非必须\n *     @param  {Function}  params.onProgress                        上传进度回调函数\n * @param  {Function}  callback                                     回调函数，必须\n * @return  {Object}  err                                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                          为对应的 object 数据\n *     @return  {String}  data.ETag                                 为对应上传文件的 ETag 值\n */\n\n\nfunction putObject(params, callback) {\n  var self = this;\n  var FileSize = params.ContentLength;\n  var onProgress = util.throttleOnProgress.call(self, FileSize, params.onProgress); // 特殊处理 Cache-Control、Content-Type，避免代理更改这两个字段导致写入到 Object 属性里\n\n  var headers = params.Headers;\n  if (!headers['Cache-Control'] && !headers['cache-control']) headers['Cache-Control'] = '';\n  if (!headers['Content-Type'] && !headers['content-type']) headers['Content-Type'] = params.Body && params.Body.type || '';\n  var needCalcMd5 = params.UploadAddMetaMd5 || self.options.UploadAddMetaMd5 || self.options.UploadCheckContentMd5;\n  util.getBodyMd5(needCalcMd5, params.Body, function (md5) {\n    if (md5) {\n      if (self.options.UploadCheckContentMd5) headers['Content-MD5'] = util.binaryBase64(md5);\n      if (params.UploadAddMetaMd5 || self.options.UploadAddMetaMd5) headers['x-cos-meta-md5'] = md5;\n    }\n\n    if (params.ContentLength !== undefined) headers['Content-Length'] = params.ContentLength;\n    onProgress(null, true); // 任务状态开始 uploading\n\n    submitRequest.call(self, {\n      Action: 'name/cos:PutObject',\n      TaskId: params.TaskId,\n      method: 'PUT',\n      Bucket: params.Bucket,\n      Region: params.Region,\n      Key: params.Key,\n      headers: params.Headers,\n      qs: params.Query,\n      body: params.Body,\n      onProgress: onProgress\n    }, function (err, data) {\n      if (err) {\n        onProgress(null, true);\n        return callback(err);\n      }\n\n      onProgress({\n        loaded: FileSize,\n        total: FileSize\n      }, true);\n      var url = getUrl({\n        ForcePathStyle: self.options.ForcePathStyle,\n        protocol: self.options.Protocol,\n        domain: self.options.Domain,\n        bucket: params.Bucket,\n        region: !self.options.UseAccelerate ? params.Region : 'accelerate',\n        object: params.Key\n      });\n      url = url.substr(url.indexOf('://') + 3);\n      data.Location = url;\n      data.ETag = util.attr(data.headers, 'etag', '');\n      callback(null, data);\n    });\n  }, params.onHashProgress);\n}\n/**\n * 删除 object\n * @param  {Object}  params                     参数对象，必须\n *     @param  {String}  params.Bucket          Bucket名称，必须\n *     @param  {String}  params.Region          地域名称，必须\n *     @param  {String}  params.Key             object名称，必须\n * @param  {Function}  callback                 回调函数，必须\n * @param  {Object}  err                        请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @param  {Object}  data                       删除操作成功之后返回的数据\n */\n\n\nfunction deleteObject(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteObject',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    headers: params.Headers,\n    VersionId: params.VersionId,\n    action: params.Recursive ? 'recursive' : ''\n  }, function (err, data) {\n    if (err) {\n      var statusCode = err.statusCode;\n\n      if (statusCode && statusCode === 404) {\n        return callback(null, {\n          BucketNotFound: true,\n          statusCode: statusCode\n        });\n      } else {\n        return callback(err);\n      }\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 object 的 权限列表\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n *     @param  {String}  params.Key                 object名称，必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n *     @return  {Object}  data.AccessControlPolicy  权限列表\n */\n\n\nfunction getObjectAcl(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetObjectACL',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    headers: params.Headers,\n    action: 'acl'\n  }, function (err, data) {\n    if (err) return callback(err);\n    var AccessControlPolicy = data.AccessControlPolicy || {};\n    var Owner = AccessControlPolicy.Owner || {};\n    var Grant = AccessControlPolicy.AccessControlList && AccessControlPolicy.AccessControlList.Grant || [];\n    Grant = util.isArray(Grant) ? Grant : [Grant];\n    var result = decodeAcl(AccessControlPolicy);\n    delete result.GrantWrite;\n\n    if (data.headers && data.headers['x-cos-acl']) {\n      result.ACL = data.headers['x-cos-acl'];\n    }\n\n    result = util.extend(result, {\n      Owner: Owner,\n      Grants: Grant,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n    callback(null, result);\n  });\n}\n/**\n * 设置 object 的 权限列表\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {String}  params.Key     object名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回的数据\n */\n\n\nfunction putObjectAcl(params, callback) {\n  var headers = params.Headers;\n  var xml = '';\n\n  if (params['AccessControlPolicy']) {\n    var AccessControlPolicy = util.clone(params['AccessControlPolicy'] || {});\n    var Grants = AccessControlPolicy.Grants || AccessControlPolicy.Grant;\n    Grants = util.isArray(Grants) ? Grants : [Grants];\n    delete AccessControlPolicy.Grant;\n    delete AccessControlPolicy.Grants;\n    AccessControlPolicy.AccessControlList = {\n      Grant: Grants\n    };\n    xml = util.json2xml({\n      AccessControlPolicy: AccessControlPolicy\n    });\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  } // Grant Header 去重\n\n\n  util.each(headers, function (val, key) {\n    if (key.indexOf('x-cos-grant-') === 0) {\n      headers[key] = uniqGrant(headers[key]);\n    }\n  });\n  submitRequest.call(this, {\n    Action: 'name/cos:PutObjectACL',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    action: 'acl',\n    headers: headers,\n    body: xml\n  }, function (err, data) {\n    if (err) return callback(err);\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * Options Object请求实现跨域访问的预请求。即发出一个 OPTIONS 请求给服务器以确认是否可以进行跨域操作。\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {String}  params.Key     object名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回的数据\n */\n\n\nfunction optionsObject(params, callback) {\n  var headers = params.Headers;\n  headers['Origin'] = params['Origin'];\n  headers['Access-Control-Request-Method'] = params['AccessControlRequestMethod'];\n  headers['Access-Control-Request-Headers'] = params['AccessControlRequestHeaders'];\n  submitRequest.call(this, {\n    Action: 'name/cos:OptionsObject',\n    method: 'OPTIONS',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    headers: headers\n  }, function (err, data) {\n    if (err) {\n      if (err.statusCode && err.statusCode === 403) {\n        return callback(null, {\n          OptionsForbidden: true,\n          statusCode: err.statusCode\n        });\n      }\n\n      return callback(err);\n    }\n\n    var headers = data.headers || {};\n    callback(null, {\n      AccessControlAllowOrigin: headers['access-control-allow-origin'],\n      AccessControlAllowMethods: headers['access-control-allow-methods'],\n      AccessControlAllowHeaders: headers['access-control-allow-headers'],\n      AccessControlExposeHeaders: headers['access-control-expose-headers'],\n      AccessControlMaxAge: headers['access-control-max-age'],\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * @param  {Object}                                     参数列表\n *     @param  {String}  Bucket                         Bucket 名称\n *     @param  {String}  Region                         地域名称\n *     @param  {String}  Key                            文件名称\n *     @param  {String}  CopySource                     源文件URL绝对路径，可以通过versionid子资源指定历史版本\n *     @param  {String}  ACL                            允许用户自定义文件权限。有效值：private，public-read默认值：private。\n *     @param  {String}  GrantRead                      赋予被授权者读的权限，格式 x-cos-grant-read: uin=\" \",uin=\" \"，当需要给子账户授权时，uin=\"RootAcountID/SubAccountID\"，当需要给根账户授权时，uin=\"RootAcountID\"。\n *     @param  {String}  GrantWrite                     赋予被授权者写的权限，格式 x-cos-grant-write: uin=\" \",uin=\" \"，当需要给子账户授权时，uin=\"RootAcountID/SubAccountID\"，当需要给根账户授权时，uin=\"RootAcountID\"。\n *     @param  {String}  GrantFullControl               赋予被授权者读写权限，格式 x-cos-grant-full-control: uin=\" \",uin=\" \"，当需要给子账户授权时，uin=\"RootAcountID/SubAccountID\"，当需要给根账户授权时，uin=\"RootAcountID\"。\n *     @param  {String}  MetadataDirective              是否拷贝元数据，枚举值：Copy, Replaced，默认值Copy。假如标记为Copy，忽略Header中的用户元数据信息直接复制；假如标记为Replaced，按Header信息修改元数据。当目标路径和原路径一致，即用户试图修改元数据时，必须为Replaced\n *     @param  {String}  CopySourceIfModifiedSince      当Object在指定时间后被修改，则执行操作，否则返回412。可与x-cos-copy-source-If-None-Match一起使用，与其他条件联合使用返回冲突。\n *     @param  {String}  CopySourceIfUnmodifiedSince    当Object在指定时间后未被修改，则执行操作，否则返回412。可与x-cos-copy-source-If-Match一起使用，与其他条件联合使用返回冲突。\n *     @param  {String}  CopySourceIfMatch              当Object的ETag和给定一致时，则执行操作，否则返回412。可与x-cos-copy-source-If-Unmodified-Since一起使用，与其他条件联合使用返回冲突。\n *     @param  {String}  CopySourceIfNoneMatch          当Object的ETag和给定不一致时，则执行操作，否则返回412。可与x-cos-copy-source-If-Modified-Since一起使用，与其他条件联合使用返回冲突。\n *     @param  {String}  StorageClass                   存储级别，枚举值：存储级别，枚举值：Standard, Standard_IA，Archive；默认值：Standard\n *     @param  {String}  CacheControl                   指定所有缓存机制在整个请求/响应链中必须服从的指令。\n *     @param  {String}  ContentDisposition             MIME 协议的扩展，MIME 协议指示 MIME 用户代理如何显示附加的文件\n *     @param  {String}  ContentEncoding                HTTP 中用来对「采用何种编码格式传输正文」进行协定的一对头部字段\n *     @param  {String}  ContentLength                  设置响应消息的实体内容的大小，单位为字节\n *     @param  {String}  ContentType                    RFC 2616 中定义的 HTTP 请求内容类型（MIME），例如text/plain\n *     @param  {String}  Expect                         请求的特定的服务器行为\n *     @param  {String}  Expires                        响应过期的日期和时间\n *     @param  {String}  params.ServerSideEncryption   支持按照指定的加密算法进行服务端数据加密，格式 x-cos-server-side-encryption: \"AES256\"，非必须\n *     @param  {String}  ContentLanguage                指定内容语言\n *     @param  {String}  x-cos-meta-*                   允许用户自定义的头部信息，将作为 Object 元数据返回。大小限制2K。\n */\n\n\nfunction putObjectCopy(params, callback) {\n  // 特殊处理 Cache-Control\n  var self = this;\n  var headers = params.Headers;\n  if (!headers['Cache-Control'] && !headers['cache-control']) headers['Cache-Control'] = '';\n  var CopySource = params.CopySource || '';\n  var m = util.getSourceParams.call(this, CopySource);\n\n  if (!m) {\n    callback(util.error(new Error('CopySource format error')));\n    return;\n  }\n\n  var SourceBucket = m[1];\n  var SourceRegion = m[3];\n  var SourceKey = decodeURIComponent(m[4]);\n  submitRequest.call(this, {\n    Scope: [{\n      action: 'name/cos:GetObject',\n      bucket: SourceBucket,\n      region: SourceRegion,\n      prefix: SourceKey\n    }, {\n      action: 'name/cos:PutObject',\n      bucket: params.Bucket,\n      region: params.Region,\n      prefix: params.Key\n    }],\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    VersionId: params.VersionId,\n    headers: params.Headers\n  }, function (err, data) {\n    if (err) return callback(err);\n    var result = util.clone(data.CopyObjectResult || {});\n    var url = getUrl({\n      ForcePathStyle: self.options.ForcePathStyle,\n      protocol: self.options.Protocol,\n      domain: self.options.Domain,\n      bucket: params.Bucket,\n      region: params.Region,\n      object: params.Key,\n      isLocation: true\n    });\n    util.extend(result, {\n      Location: url,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n    callback(null, result);\n  });\n}\n\nfunction uploadPartCopy(params, callback) {\n  var CopySource = params.CopySource || '';\n  var m = util.getSourceParams.call(this, CopySource);\n\n  if (!m) {\n    callback(util.error(new Error('CopySource format error')));\n    return;\n  }\n\n  var SourceBucket = m[1];\n  var SourceRegion = m[3];\n  var SourceKey = decodeURIComponent(m[4]);\n  submitRequest.call(this, {\n    Scope: [{\n      action: 'name/cos:GetObject',\n      bucket: SourceBucket,\n      region: SourceRegion,\n      prefix: SourceKey\n    }, {\n      action: 'name/cos:PutObject',\n      bucket: params.Bucket,\n      region: params.Region,\n      prefix: params.Key\n    }],\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    VersionId: params.VersionId,\n    qs: {\n      partNumber: params['PartNumber'],\n      uploadId: params['UploadId']\n    },\n    headers: params.Headers\n  }, function (err, data) {\n    if (err) return callback(err);\n    var result = util.clone(data.CopyPartResult || {});\n    util.extend(result, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n    callback(null, result);\n  });\n}\n\nfunction deleteMultipleObject(params, callback) {\n  var Objects = params.Objects || [];\n  var Quiet = params.Quiet;\n  Objects = util.isArray(Objects) ? Objects : [Objects];\n  var xml = util.json2xml({\n    Delete: {\n      Object: Objects,\n      Quiet: Quiet || false\n    }\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  var Scope = util.map(Objects, function (v) {\n    return {\n      action: 'name/cos:DeleteObject',\n      bucket: params.Bucket,\n      region: params.Region,\n      prefix: v.Key\n    };\n  });\n  submitRequest.call(this, {\n    Scope: Scope,\n    method: 'POST',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    body: xml,\n    action: 'delete',\n    headers: headers\n  }, function (err, data) {\n    if (err) return callback(err);\n    var DeleteResult = data.DeleteResult || {};\n    var Deleted = DeleteResult.Deleted || [];\n    var Errors = DeleteResult.Error || [];\n    Deleted = util.isArray(Deleted) ? Deleted : [Deleted];\n    Errors = util.isArray(Errors) ? Errors : [Errors];\n    var result = util.clone(DeleteResult);\n    util.extend(result, {\n      Error: Errors,\n      Deleted: Deleted,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n    callback(null, result);\n  });\n}\n\nfunction restoreObject(params, callback) {\n  var headers = params.Headers;\n\n  if (!params['RestoreRequest']) {\n    callback(util.error(new Error('missing param RestoreRequest')));\n    return;\n  }\n\n  var RestoreRequest = params.RestoreRequest || {};\n  var xml = util.json2xml({\n    RestoreRequest: RestoreRequest\n  });\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:RestoreObject',\n    method: 'POST',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    VersionId: params.VersionId,\n    body: xml,\n    action: 'restore',\n    headers: headers\n  }, callback);\n}\n/**\n * 设置 Object 的标签\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Object名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {Array}   params.TagSet  标签设置，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/42998\n * @return  {Object}  data              返回数据\n */\n\n\nfunction putObjectTagging(params, callback) {\n  var Tagging = params['Tagging'] || {};\n  var Tags = Tagging.TagSet || Tagging.Tags || params['Tags'] || [];\n  Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);\n  var xml = util.json2xml({\n    Tagging: {\n      TagSet: {\n        Tag: Tags\n      }\n    }\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:PutObjectTagging',\n    method: 'PUT',\n    Bucket: params.Bucket,\n    Key: params.Key,\n    Region: params.Region,\n    body: xml,\n    action: 'tagging',\n    headers: headers,\n    VersionId: params.VersionId\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 获取 Object 的标签设置\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/42998\n * @return  {Object}  data              返回数据\n */\n\n\nfunction getObjectTagging(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:GetObjectTagging',\n    method: 'GET',\n    Key: params.Key,\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    action: 'tagging',\n    VersionId: params.VersionId\n  }, function (err, data) {\n    if (err) {\n      if (err.statusCode === 404 && err.error && (err.error === \"Not Found\" || err.error.Code === 'NoSuchTagSet')) {\n        var result = {\n          Tags: [],\n          statusCode: err.statusCode\n        };\n        err.headers && (result.headers = err.headers);\n        callback(null, result);\n      } else {\n        callback(err);\n      }\n\n      return;\n    }\n\n    var Tags = [];\n\n    try {\n      Tags = data.Tagging.TagSet.Tag || [];\n    } catch (e) {}\n\n    Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);\n    callback(null, {\n      Tags: Tags,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 删除 Object 的 标签设置\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Object名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/42998\n * @return  {Object}  data              返回的数据\n */\n\n\nfunction deleteObjectTagging(params, callback) {\n  submitRequest.call(this, {\n    Action: 'name/cos:DeleteObjectTagging',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    headers: params.Headers,\n    action: 'tagging',\n    VersionId: params.VersionId\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 使用 SQL 语句从指定对象（CSV 格式或者 JSON 格式）中检索内容\n * @param  {Object}  params                   参数对象，必须\n *     @param  {String}  params.Bucket        Object名称，必须\n *     @param  {String}  params.Region        地域名称，必须\n *     @param  {Object}  params.SelectRequest 地域名称，必须\n * @param  {Function}  callback               回调函数，必须\n * @return  {Object}  err                     请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/42998\n * @return  {Object}  data                    返回的数据\n */\n\n\nfunction selectObjectContent(params, callback) {\n  var SelectType = params['SelectType'];\n  if (!SelectType) return callback(util.error(new Error('missing param SelectType')));\n  var SelectRequest = params['SelectRequest'] || {};\n  var xml = util.json2xml({\n    SelectRequest: SelectRequest\n  });\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:GetObject',\n    method: 'POST',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    headers: params.Headers,\n    action: 'select',\n    qs: {\n      'select-type': params['SelectType']\n    },\n    VersionId: params.VersionId,\n    body: xml,\n    DataType: 'arraybuffer',\n    rawBody: true\n  }, function (err, data) {\n    if (err && err.statusCode === 204) {\n      return callback(null, {\n        statusCode: err.statusCode\n      });\n    } else if (err) {\n      return callback(err);\n    }\n\n    var result = util.parseSelectPayload(data.body);\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers,\n      Body: result.body,\n      Payload: result.payload\n    });\n  });\n} // 分块上传\n\n/**\n * 初始化分块上传\n * @param  {Object}  params                                     参数对象，必须\n *     @param  {String}  params.Bucket                          Bucket名称，必须\n *     @param  {String}  params.Region                          地域名称，必须\n *     @param  {String}  params.Key                             object名称，必须\n *     @param  {String}  params.UploadId                        object名称，必须\n *     @param  {String}  params.CacheControl                    RFC 2616 中定义的缓存策略，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentDisposition              RFC 2616 中定义的文件名称，将作为 Object 元数据保存    ，非必须\n *     @param  {String}  params.ContentEncoding                 RFC 2616 中定义的编码格式，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentType                     RFC 2616 中定义的内容类型（MIME），将作为 Object 元数据保存，非必须\n *     @param  {String}  params.Expires                         RFC 2616 中定义的过期时间，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ACL                             允许用户自定义文件权限，非必须\n *     @param  {String}  params.GrantRead                       赋予被授权者读的权限 ，非必须\n *     @param  {String}  params.GrantWrite                      赋予被授权者写的权限 ，非必须\n *     @param  {String}  params.GrantFullControl                赋予被授权者读写权限 ，非必须\n *     @param  {String}  params.StorageClass                    设置Object的存储级别，枚举值：Standard，Standard_IA，Archive，非必须\n *     @param  {String}  params.ServerSideEncryption           支持按照指定的加密算法进行服务端数据加密，格式 x-cos-server-side-encryption: \"AES256\"，非必须\n * @param  {Function}  callback                                 回调函数，必须\n * @return  {Object}  err                                       请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                      返回的数据\n */\n\n\nfunction multipartInit(params, callback) {\n  var self = this; // 特殊处理 Cache-Control\n\n  var headers = params.Headers; // 特殊处理 Cache-Control、Content-Type\n\n  if (!headers['Cache-Control'] && !headers['cache-control']) headers['Cache-Control'] = '';\n  if (!headers['Content-Type'] && !headers['content-type']) headers['Content-Type'] = params.Body && params.Body.type || '';\n  util.getBodyMd5(params.Body && (params.UploadAddMetaMd5 || self.options.UploadAddMetaMd5), params.Body, function (md5) {\n    if (md5) params.Headers['x-cos-meta-md5'] = md5;\n    submitRequest.call(self, {\n      Action: 'name/cos:InitiateMultipartUpload',\n      method: 'POST',\n      Bucket: params.Bucket,\n      Region: params.Region,\n      Key: params.Key,\n      action: 'uploads',\n      headers: params.Headers,\n      qs: params.Query\n    }, function (err, data) {\n      if (err) return callback(err);\n      data = util.clone(data || {});\n\n      if (data && data.InitiateMultipartUploadResult) {\n        return callback(null, util.extend(data.InitiateMultipartUploadResult, {\n          statusCode: data.statusCode,\n          headers: data.headers\n        }));\n      }\n\n      callback(null, data);\n    });\n  }, params.onHashProgress);\n}\n/**\n * 分块上传\n * @param  {Object}  params                                 参数对象，必须\n *     @param  {String}  params.Bucket                      Bucket名称，必须\n *     @param  {String}  params.Region                      地域名称，必须\n *     @param  {String}  params.Key                         object名称，必须\n *     @param  {File || Blob || String}  params.Body        上传文件对象或字符串\n *     @param  {String} params.ContentLength                RFC 2616 中定义的 HTTP 请求内容长度（字节），非必须\n *     @param  {String} params.Expect                       当使用 Expect: 100-continue 时，在收到服务端确认后，才会发送请求内容，非必须\n *     @param  {String} params.ServerSideEncryption         支持按照指定的加密算法进行服务端数据加密，格式 x-cos-server-side-encryption: \"AES256\"，非必须\n *     @param  {String} params.ContentSha1                  RFC 3174 中定义的 160-bit 内容 SHA-1 算法校验值，非必须\n * @param  {Function}  callback                             回调函数，必须\n *     @return  {Object}  err                               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n *     @return  {Object}  data                              返回的数据\n *     @return  {Object}  data.ETag                         返回的文件分块 sha1 值\n */\n\n\nfunction multipartUpload(params, callback) {\n  var self = this;\n  util.getFileSize('multipartUpload', params, function () {\n    util.getBodyMd5(self.options.UploadCheckContentMd5, params.Body, function (md5) {\n      if (md5) params.Headers['Content-MD5'] = util.binaryBase64(md5);\n      submitRequest.call(self, {\n        Action: 'name/cos:UploadPart',\n        TaskId: params.TaskId,\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        qs: {\n          partNumber: params['PartNumber'],\n          uploadId: params['UploadId']\n        },\n        headers: params.Headers,\n        onProgress: params.onProgress,\n        body: params.Body || null\n      }, function (err, data) {\n        if (err) return callback(err);\n        callback(null, {\n          ETag: util.attr(data.headers, 'etag', ''),\n          statusCode: data.statusCode,\n          headers: data.headers\n        });\n      });\n    });\n  });\n}\n/**\n * 完成分块上传\n * @param  {Object}  params                             参数对象，必须\n *     @param  {String}  params.Bucket                  Bucket名称，必须\n *     @param  {String}  params.Region                  地域名称，必须\n *     @param  {String}  params.Key                     object名称，必须\n *     @param  {Array}   params.Parts                   分块信息列表，必须\n *     @param  {String}  params.Parts[i].PartNumber     块编号，必须\n *     @param  {String}  params.Parts[i].ETag           分块的 sha1 校验值\n * @param  {Function}  callback                         回调函数，必须\n * @return  {Object}  err                               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                              返回的数据\n *     @return  {Object}  data.CompleteMultipartUpload  完成分块上传后的文件信息，包括Location, Bucket, Key 和 ETag\n */\n\n\nfunction multipartComplete(params, callback) {\n  var self = this;\n  var UploadId = params.UploadId;\n  var Parts = params['Parts'];\n\n  for (var i = 0, len = Parts.length; i < len; i++) {\n    if (Parts[i]['ETag'] && Parts[i]['ETag'].indexOf('\"') === 0) {\n      continue;\n    }\n\n    Parts[i]['ETag'] = '\"' + Parts[i]['ETag'] + '\"';\n  }\n\n  var xml = util.json2xml({\n    CompleteMultipartUpload: {\n      Part: Parts\n    }\n  }); // CSP/ceph CompleteMultipartUpload 接口 body 写死了限制 1MB，这里醉倒 10000 片时，xml 字符串去掉空格853KB\n\n  xml = xml.replace(/\\n\\s*/g, '');\n  var headers = params.Headers;\n  headers['Content-Type'] = 'application/xml';\n  headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n  submitRequest.call(this, {\n    Action: 'name/cos:CompleteMultipartUpload',\n    method: 'POST',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    qs: {\n      uploadId: UploadId\n    },\n    body: xml,\n    headers: headers\n  }, function (err, data) {\n    if (err) return callback(err);\n    var url = getUrl({\n      ForcePathStyle: self.options.ForcePathStyle,\n      protocol: self.options.Protocol,\n      domain: self.options.Domain,\n      bucket: params.Bucket,\n      region: params.Region,\n      object: params.Key,\n      isLocation: true\n    });\n    var res = data.CompleteMultipartUploadResult || {};\n\n    if (res.ProcessResults) {\n      if (res && res.ProcessResults) {\n        res.UploadResult = {\n          OriginalInfo: {\n            Key: res.Key,\n            Location: url,\n            ETag: res.ETag,\n            ImageInfo: res.ImageInfo\n          },\n          ProcessResults: res.ProcessResults\n        };\n        delete res.ImageInfo;\n        delete res.ProcessResults;\n      }\n    }\n\n    var result = util.extend(res, {\n      Location: url,\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n    callback(null, result);\n  });\n}\n/**\n * 分块上传任务列表查询\n * @param  {Object}  params                                 参数对象，必须\n *     @param  {String}  params.Bucket                      Bucket名称，必须\n *     @param  {String}  params.Region                      地域名称，必须\n *     @param  {String}  params.Delimiter                   定界符为一个符号，如果有Prefix，则将Prefix到delimiter之间的相同路径归为一类，定义为Common Prefix，然后列出所有Common Prefix。如果没有Prefix，则从路径起点开始，非必须\n *     @param  {String}  params.EncodingType                规定返回值的编码方式，非必须\n *     @param  {String}  params.Prefix                      前缀匹配，用来规定返回的文件前缀地址，非必须\n *     @param  {String}  params.MaxUploads                  单次返回最大的条目数量，默认1000，非必须\n *     @param  {String}  params.KeyMarker                   与upload-id-marker一起使用 </Br>当upload-id-marker未被指定时，ObjectName字母顺序大于key-marker的条目将被列出 </Br>当upload-id-marker被指定时，ObjectName字母顺序大于key-marker的条目被列出，ObjectName字母顺序等于key-marker同时UploadId大于upload-id-marker的条目将被列出，非必须\n *     @param  {String}  params.UploadIdMarker              与key-marker一起使用 </Br>当key-marker未被指定时，upload-id-marker将被忽略 </Br>当key-marker被指定时，ObjectName字母顺序大于key-marker的条目被列出，ObjectName字母顺序等于key-marker同时UploadId大于upload-id-marker的条目将被列出，非必须\n * @param  {Function}  callback                             回调函数，必须\n * @return  {Object}  err                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                  返回的数据\n *     @return  {Object}  data.ListMultipartUploadsResult   分块上传任务信息\n */\n\n\nfunction multipartList(params, callback) {\n  var reqParams = {};\n  reqParams['delimiter'] = params['Delimiter'];\n  reqParams['encoding-type'] = params['EncodingType'];\n  reqParams['prefix'] = params['Prefix'] || '';\n  reqParams['max-uploads'] = params['MaxUploads'];\n  reqParams['key-marker'] = params['KeyMarker'];\n  reqParams['upload-id-marker'] = params['UploadIdMarker'];\n  reqParams = util.clearKey(reqParams);\n  submitRequest.call(this, {\n    Action: 'name/cos:ListMultipartUploads',\n    ResourceKey: reqParams['prefix'],\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    headers: params.Headers,\n    qs: reqParams,\n    action: 'uploads'\n  }, function (err, data) {\n    if (err) return callback(err);\n\n    if (data && data.ListMultipartUploadsResult) {\n      var Upload = data.ListMultipartUploadsResult.Upload || [];\n      Upload = util.isArray(Upload) ? Upload : [Upload];\n      data.ListMultipartUploadsResult.Upload = Upload;\n    }\n\n    var result = util.clone(data.ListMultipartUploadsResult || {});\n    util.extend(result, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n    callback(null, result);\n  });\n}\n/**\n * 上传的分块列表查询\n * @param  {Object}  params                                 参数对象，必须\n *     @param  {String}  params.Bucket                      Bucket名称，必须\n *     @param  {String}  params.Region                      地域名称，必须\n *     @param  {String}  params.Key                         object名称，必须\n *     @param  {String}  params.UploadId                    标示本次分块上传的ID，必须\n *     @param  {String}  params.EncodingType                规定返回值的编码方式，非必须\n *     @param  {String}  params.MaxParts                    单次返回最大的条目数量，默认1000，非必须\n *     @param  {String}  params.PartNumberMarker            默认以UTF-8二进制顺序列出条目，所有列出条目从marker开始，非必须\n * @param  {Function}  callback                             回调函数，必须\n * @return  {Object}  err                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                  返回的数据\n *     @return  {Object}  data.ListMultipartUploadsResult   分块信息\n */\n\n\nfunction multipartListPart(params, callback) {\n  var reqParams = {};\n  reqParams['uploadId'] = params['UploadId'];\n  reqParams['encoding-type'] = params['EncodingType'];\n  reqParams['max-parts'] = params['MaxParts'];\n  reqParams['part-number-marker'] = params['PartNumberMarker'];\n  submitRequest.call(this, {\n    Action: 'name/cos:ListParts',\n    method: 'GET',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    headers: params.Headers,\n    qs: reqParams\n  }, function (err, data) {\n    if (err) return callback(err);\n    var ListPartsResult = data.ListPartsResult || {};\n    var Part = ListPartsResult.Part || [];\n    Part = util.isArray(Part) ? Part : [Part];\n    ListPartsResult.Part = Part;\n    var result = util.clone(ListPartsResult);\n    util.extend(result, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n    callback(null, result);\n  });\n}\n/**\n * 抛弃分块上传\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n *     @param  {String}  params.Key         object名称，必须\n *     @param  {String}  params.UploadId    标示本次分块上传的ID，必须\n * @param  {Function}  callback             回调函数，必须\n *     @return  {Object}    err             请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n *     @return  {Object}    data            返回的数据\n */\n\n\nfunction multipartAbort(params, callback) {\n  var reqParams = {};\n  reqParams['uploadId'] = params['UploadId'];\n  submitRequest.call(this, {\n    Action: 'name/cos:AbortMultipartUpload',\n    method: 'DELETE',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    headers: params.Headers,\n    qs: reqParams\n  }, function (err, data) {\n    if (err) return callback(err);\n    callback(null, {\n      statusCode: data.statusCode,\n      headers: data.headers\n    });\n  });\n}\n/**\n * 抛弃分块上传\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n *     @param  {String}  params.Key         object名称，必须\n *     @param  {String}  params.UploadId    标示本次分块上传的ID，必须\n * @param  {Function}  callback             回调函数，必须\n *     @return  {Object}    err             请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n *     @return  {Object}    data            返回的数据\n */\n\n\nfunction request(params, callback) {\n  submitRequest.call(this, {\n    method: params.Method,\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Key: params.Key,\n    action: params.Action,\n    headers: params.Headers,\n    qs: params.Query,\n    body: params.Body,\n    Url: params.Url,\n    rawBody: params.RawBody\n  }, function (err, data) {\n    if (err) return callback(err);\n\n    if (data && data.body) {\n      data.Body = data.body;\n      delete data.body;\n    }\n\n    callback(err, data);\n  });\n}\n/**\n * 追加上传\n * @param  {Object}  params                                         参数对象，必须\n *     @param  {String}  params.Bucket                              Bucket名称，必须\n *     @param  {String}  params.Region                              地域名称，必须\n *     @param  {String}  params.Key                                 object名称，必须\n *     @param  {File || Blob || String}  params.Body                上传文件对象或字符串\n *     @param  {Number}  params.Position                            追加操作的起始点，单位为字节，必须\n *     @param  {String}  params.CacheControl                        RFC 2616 中定义的缓存策略，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentDisposition                  RFC 2616 中定义的文件名称，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentEncoding                     RFC 2616 中定义的编码格式，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentLength                       RFC 2616 中定义的 HTTP 请求内容长度（字节），必须\n *     @param  {String}  params.ContentType                         RFC 2616 中定义的内容类型（MIME），将作为 Object 元数据保存，非必须\n *     @param  {String}  params.Expect                              当使用 Expect: 100-continue 时，在收到服务端确认后，才会发送请求内容，非必须\n *     @param  {String}  params.Expires                             RFC 2616 中定义的过期时间，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ACL                                 允许用户自定义文件权限，有效值：private | public-read，非必须\n *     @param  {String}  params.GrantRead                           赋予被授权者读取对象的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantReadAcp                        赋予被授权者读取对象的访问控制列表（ACL）的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantWriteAcp                       赋予被授权者写入对象的访问控制列表（ACL）的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantFullControl                    赋予被授权者操作对象的所有权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.StorageClass                        设置对象的存储级别，枚举值：STANDARD、STANDARD_IA、ARCHIVE，默认值：STANDARD，非必须\n *     @param  {String}  params.x-cos-meta-*                        允许用户自定义的头部信息，将作为对象的元数据保存。大小限制2KB，非必须\n *     @param  {String}  params.ContentSha1                         RFC 3174 中定义的 160-bit 内容 SHA-1 算法校验，非必须\n *     @param  {String}  params.ServerSideEncryption                支持按照指定的加密算法进行服务端数据加密，格式 x-cos-server-side-encryption: \"AES256\"，非必须\n * @param  {Function}  callback                                     回调函数，必须\n *     @return  {Object}    err                                     请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n *     @return  {Object}    data                                    返回的数据\n */\n\n\nfunction appendObject(params, callback) {\n  // 特殊处理 Cache-Control、Content-Type，避免代理更改这两个字段导致写入到 Object 属性里\n  var headers = params.Headers;\n  if (!headers['Cache-Control'] && !headers['cache-control']) headers['Cache-Control'] = '';\n  if (!headers['Content-Type'] && !headers['content-type']) headers['Content-Type'] = params.Body && params.Body.type || '';\n  submitRequest.call(this, {\n    Action: 'name/cos:AppendObject',\n    method: 'POST',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    action: 'append',\n    Key: params.Key,\n    body: params.Body,\n    qs: {\n      position: params.Position\n    },\n    headers: params.Headers\n  }, function (err, data) {\n    if (err) return callback(err);\n    callback(null, data);\n  });\n}\n/**\n * 获取签名\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Method  请求方法，必须\n *     @param  {String}  params.Key     object名称，必须\n *     @param  {String}  params.Expires 名超时时间，单位秒，可选\n * @return  {String}  data              返回签名字符串\n */\n\n\nfunction getAuth(params) {\n  var self = this;\n  return util.getAuth({\n    SecretId: params.SecretId || this.options.SecretId || '',\n    SecretKey: params.SecretKey || this.options.SecretKey || '',\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Method: params.Method,\n    Key: params.Key,\n    Query: params.Query,\n    Headers: params.Headers,\n    Expires: params.Expires,\n    UseRawKey: self.options.UseRawKey,\n    SystemClockOffset: self.options.SystemClockOffset\n  });\n}\n/**\n * 获取文件下载链接\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n *     @param  {String}  params.Key         object名称，必须\n *     @param  {String}  params.Method      请求的方法，可选\n *     @param  {String}  params.Expires     签名超时时间，单位秒，可选\n * @param  {Function}  callback             回调函数，必须\n *     @return  {Object}    err             请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n *     @return  {Object}    data            返回的数据\n */\n\n\nfunction getObjectUrl(params, callback) {\n  var self = this;\n  var url = getUrl({\n    ForcePathStyle: self.options.ForcePathStyle,\n    protocol: params.Protocol || self.options.Protocol,\n    domain: params.Domain || self.options.Domain,\n    bucket: params.Bucket,\n    region: params.Region,\n    object: params.Key\n  });\n  var queryParamsStr = '';\n\n  if (params.Query) {\n    queryParamsStr += util.obj2str(params.Query);\n  }\n\n  if (params.QueryString) {\n    queryParamsStr += (queryParamsStr ? '&' : '') + params.QueryString;\n  }\n\n  var syncUrl = url;\n\n  if (params.Sign !== undefined && !params.Sign) {\n    queryParamsStr && (syncUrl += '?' + queryParamsStr);\n    callback(null, {\n      Url: syncUrl\n    });\n    return syncUrl;\n  } // 签名加上 Host，避免跨桶访问\n\n\n  var SignHost = getSignHost.call(this, {\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Url: url\n  });\n  var AuthData = getAuthorizationAsync.call(this, {\n    Action: (params.Method || '').toUpperCase() === 'PUT' ? 'name/cos:PutObject' : 'name/cos:GetObject',\n    Bucket: params.Bucket || '',\n    Region: params.Region || '',\n    Method: params.Method || 'get',\n    Key: params.Key,\n    Expires: params.Expires,\n    Headers: params.Headers,\n    Query: params.Query,\n    SignHost: SignHost\n  }, function (err, AuthData) {\n    if (!callback) return;\n\n    if (err) {\n      callback(err);\n      return;\n    } // 兼容万象url qUrlParamList需要再encode一次\n\n\n    var replaceUrlParamList = function (url) {\n      var urlParams = url.match(/q-url-param-list.*?(?=&)/g)[0];\n      var encodedParams = 'q-url-param-list=' + encodeURIComponent(urlParams.replace(/q-url-param-list=/, '')).toLowerCase();\n      var reg = new RegExp(urlParams, 'g');\n      var replacedUrl = url.replace(reg, encodedParams);\n      return replacedUrl;\n    };\n\n    var signUrl = url;\n    signUrl += '?' + (AuthData.Authorization.indexOf('q-signature') > -1 ? replaceUrlParamList(AuthData.Authorization) : 'sign=' + encodeURIComponent(AuthData.Authorization));\n    AuthData.SecurityToken && (signUrl += '&x-cos-security-token=' + AuthData.SecurityToken);\n    AuthData.ClientIP && (signUrl += '&clientIP=' + AuthData.ClientIP);\n    AuthData.ClientUA && (signUrl += '&clientUA=' + AuthData.ClientUA);\n    AuthData.Token && (signUrl += '&token=' + AuthData.Token);\n    queryParamsStr && (signUrl += '&' + queryParamsStr);\n    setTimeout(function () {\n      callback(null, {\n        Url: signUrl\n      });\n    });\n  });\n\n  if (AuthData) {\n    syncUrl += '?' + AuthData.Authorization + (AuthData.SecurityToken ? '&x-cos-security-token=' + AuthData.SecurityToken : '');\n    queryParamsStr && (syncUrl += '&' + queryParamsStr);\n  } else {\n    queryParamsStr && (syncUrl += '?' + queryParamsStr);\n  }\n\n  return syncUrl;\n}\n/**\n * 私有方法\n */\n\n\nfunction decodeAcl(AccessControlPolicy) {\n  var result = {\n    GrantFullControl: [],\n    GrantWrite: [],\n    GrantRead: [],\n    GrantReadAcp: [],\n    GrantWriteAcp: [],\n    ACL: ''\n  };\n  var GrantMap = {\n    'FULL_CONTROL': 'GrantFullControl',\n    'WRITE': 'GrantWrite',\n    'READ': 'GrantRead',\n    'READ_ACP': 'GrantReadAcp',\n    'WRITE_ACP': 'GrantWriteAcp'\n  };\n  var AccessControlList = AccessControlPolicy && AccessControlPolicy.AccessControlList || {};\n  var Grant = AccessControlList.Grant;\n\n  if (Grant) {\n    Grant = util.isArray(Grant) ? Grant : [Grant];\n  }\n\n  var PublicAcl = {\n    READ: 0,\n    WRITE: 0,\n    FULL_CONTROL: 0\n  };\n  Grant && Grant.length && util.each(Grant, function (item) {\n    if (item.Grantee.ID === 'qcs::cam::anyone:anyone' || item.Grantee.URI === 'http://cam.qcloud.com/groups/global/AllUsers') {\n      PublicAcl[item.Permission] = 1;\n    } else if (item.Grantee.ID !== AccessControlPolicy.Owner.ID) {\n      result[GrantMap[item.Permission]].push('id=\"' + item.Grantee.ID + '\"');\n    }\n  });\n\n  if (PublicAcl.FULL_CONTROL || PublicAcl.WRITE && PublicAcl.READ) {\n    result.ACL = 'public-read-write';\n  } else if (PublicAcl.READ) {\n    result.ACL = 'public-read';\n  } else {\n    result.ACL = 'private';\n  }\n\n  util.each(GrantMap, function (item) {\n    result[item] = uniqGrant(result[item].join(','));\n  });\n  return result;\n} // Grant 去重\n\n\nfunction uniqGrant(str) {\n  var arr = str.split(',');\n  var exist = {};\n  var i, item;\n\n  for (i = 0; i < arr.length;) {\n    item = arr[i].trim();\n\n    if (exist[item]) {\n      arr.splice(i, 1);\n    } else {\n      exist[item] = true;\n      arr[i] = item;\n      i++;\n    }\n  }\n\n  return arr.join(',');\n} // 生成操作 url\n\n\nfunction getUrl(params) {\n  var region = params.region || '';\n  var longBucket = params.bucket || '';\n  var shortBucket = longBucket.substr(0, longBucket.lastIndexOf('-'));\n  var appId = longBucket.substr(longBucket.lastIndexOf('-') + 1);\n  var domain = params.domain;\n  var object = params.object;\n\n  if (typeof domain === 'function') {\n    domain = domain({\n      Bucket: longBucket,\n      Region: region\n    });\n  }\n\n  var protocol = params.protocol || (util.isBrowser && location.protocol === 'http:' ? 'http:' : 'https:');\n\n  if (!domain) {\n    if (['cn-south', 'cn-south-2', 'cn-north', 'cn-east', 'cn-southwest', 'sg'].indexOf(region) > -1) {\n      domain = '{Region}.myqcloud.com';\n    } else {\n      domain = 'cos.{Region}.myqcloud.com';\n    }\n\n    if (!params.ForcePathStyle) {\n      domain = '{Bucket}.' + domain;\n    }\n  }\n\n  domain = domain.replace(/\\{\\{AppId\\}\\}/ig, appId).replace(/\\{\\{Bucket\\}\\}/ig, shortBucket).replace(/\\{\\{Region\\}\\}/ig, region).replace(/\\{\\{.*?\\}\\}/ig, '');\n  domain = domain.replace(/\\{AppId\\}/ig, appId).replace(/\\{BucketName\\}/ig, shortBucket).replace(/\\{Bucket\\}/ig, longBucket).replace(/\\{Region\\}/ig, region).replace(/\\{.*?\\}/ig, '');\n\n  if (!/^[a-zA-Z]+:\\/\\//.test(domain)) {\n    domain = protocol + '//' + domain;\n  } // 去掉域名最后的斜杆\n\n\n  if (domain.slice(-1) === '/') {\n    domain = domain.slice(0, -1);\n  }\n\n  var url = domain;\n\n  if (params.ForcePathStyle) {\n    url += '/' + longBucket;\n  }\n\n  url += '/';\n\n  if (object) {\n    url += util.camSafeUrlEncode(object).replace(/%2F/g, '/');\n  }\n\n  if (params.isLocation) {\n    url = url.replace(/^https?:\\/\\//, '');\n  }\n\n  return url;\n}\n\nvar getSignHost = function (opt) {\n  if (!opt.Bucket || !opt.Bucket) return '';\n  var url = opt.Url || getUrl({\n    ForcePathStyle: this.options.ForcePathStyle,\n    protocol: this.options.Protocol,\n    domain: this.options.Domain,\n    bucket: opt.Bucket,\n    region: opt.Region\n  });\n  var urlHost = url.replace(/^https?:\\/\\/([^/]+)(\\/.*)?$/, '$1');\n  var standardHostReg = new RegExp('^([a-z\\\\d-]+-\\\\d+\\\\.)?(cos|cosv6|ci|pic)\\\\.([a-z\\\\d-]+)\\\\.myqcloud\\\\.com$');\n  if (standardHostReg.test(urlHost)) return urlHost;\n  return '';\n}; // 异步获取签名\n\n\nfunction getAuthorizationAsync(params, callback) {\n  var headers = util.clone(params.Headers);\n  var headerHost = '';\n  util.each(headers, function (v, k) {\n    (v === '' || ['content-type', 'cache-control', 'expires'].indexOf(k.toLowerCase()) > -1) && delete headers[k];\n    if (k.toLowerCase() === 'host') headerHost = v;\n  }); // Host 加入签名计算\n\n  if (!headerHost && params.SignHost) headers.Host = params.SignHost; // 获取凭证的回调，避免用户 callback 多次\n\n  var cbDone = false;\n\n  var cb = function (err, AuthData) {\n    if (cbDone) return;\n    cbDone = true;\n\n    if (AuthData && AuthData.XCosSecurityToken && !AuthData.SecurityToken) {\n      AuthData = util.clone(AuthData);\n      AuthData.SecurityToken = AuthData.XCosSecurityToken;\n      delete AuthData.XCosSecurityToken;\n    }\n\n    callback && callback(err, AuthData);\n  };\n\n  var self = this;\n  var Bucket = params.Bucket || '';\n  var Region = params.Region || ''; // PathName\n\n  var KeyName = params.Key || '';\n\n  if (self.options.ForcePathStyle && Bucket) {\n    KeyName = Bucket + '/' + KeyName;\n  }\n\n  var Pathname = '/' + KeyName; // Action、ResourceKey\n\n  var StsData = {};\n  var Scope = params.Scope;\n\n  if (!Scope) {\n    var Action = params.Action || '';\n    var ResourceKey = params.ResourceKey || params.Key || '';\n    Scope = params.Scope || [{\n      action: Action,\n      bucket: Bucket,\n      region: Region,\n      prefix: ResourceKey\n    }];\n  }\n\n  var ScopeKey = util.md5(JSON.stringify(Scope)); // STS\n\n  self._StsCache = self._StsCache || [];\n\n  (function () {\n    var i, AuthData;\n\n    for (i = self._StsCache.length - 1; i >= 0; i--) {\n      AuthData = self._StsCache[i];\n      var compareTime = Math.round(util.getSkewTime(self.options.SystemClockOffset) / 1000) + 30;\n\n      if (AuthData.StartTime && compareTime < AuthData.StartTime || compareTime >= AuthData.ExpiredTime) {\n        self._StsCache.splice(i, 1);\n\n        continue;\n      }\n\n      if (!AuthData.ScopeLimit || AuthData.ScopeLimit && AuthData.ScopeKey === ScopeKey) {\n        StsData = AuthData;\n        break;\n      }\n    }\n  })();\n\n  var calcAuthByTmpKey = function () {\n    var KeyTime = StsData.StartTime && StsData.ExpiredTime ? StsData.StartTime + ';' + StsData.ExpiredTime : '';\n    var Authorization = util.getAuth({\n      SecretId: StsData.TmpSecretId,\n      SecretKey: StsData.TmpSecretKey,\n      Method: params.Method,\n      Pathname: Pathname,\n      Query: params.Query,\n      Headers: headers,\n      Expires: params.Expires,\n      UseRawKey: self.options.UseRawKey,\n      SystemClockOffset: self.options.SystemClockOffset,\n      KeyTime: KeyTime\n    });\n    var AuthData = {\n      Authorization: Authorization,\n      SecurityToken: StsData.SecurityToken || StsData.XCosSecurityToken || '',\n      Token: StsData.Token || '',\n      ClientIP: StsData.ClientIP || '',\n      ClientUA: StsData.ClientUA || ''\n    };\n    cb(null, AuthData);\n  };\n\n  var checkAuthError = function (AuthData) {\n    if (AuthData.Authorization) {\n      // 检查签名格式\n      var formatAllow = false;\n      var auth = AuthData.Authorization;\n\n      if (auth) {\n        if (auth.indexOf(' ') > -1) {\n          formatAllow = false;\n        } else if (auth.indexOf('q-sign-algorithm=') > -1 && auth.indexOf('q-ak=') > -1 && auth.indexOf('q-sign-time=') > -1 && auth.indexOf('q-key-time=') > -1 && auth.indexOf('q-url-param-list=') > -1) {\n          formatAllow = true;\n        } else {\n          try {\n            auth = atob(auth);\n\n            if (auth.indexOf('a=') > -1 && auth.indexOf('k=') > -1 && auth.indexOf('t=') > -1 && auth.indexOf('r=') > -1 && auth.indexOf('b=') > -1) {\n              formatAllow = true;\n            }\n          } catch (e) {}\n        }\n      }\n\n      if (!formatAllow) return util.error(new Error('getAuthorization callback params format error'));\n    } else {\n      if (!AuthData.TmpSecretId) return util.error(new Error('getAuthorization callback params missing \"TmpSecretId\"'));\n      if (!AuthData.TmpSecretKey) return util.error(new Error('getAuthorization callback params missing \"TmpSecretKey\"'));\n      if (!AuthData.SecurityToken && !AuthData.XCosSecurityToken) return util.error(new Error('getAuthorization callback params missing \"SecurityToken\"'));\n      if (!AuthData.ExpiredTime) return util.error(new Error('getAuthorization callback params missing \"ExpiredTime\"'));\n      if (AuthData.ExpiredTime && AuthData.ExpiredTime.toString().length !== 10) return util.error(new Error('getAuthorization callback params \"ExpiredTime\" should be 10 digits'));\n      if (AuthData.StartTime && AuthData.StartTime.toString().length !== 10) return util.error(new Error('getAuthorization callback params \"StartTime\" should be 10 StartTime'));\n    }\n\n    return false;\n  }; // 先判断是否有临时密钥\n\n\n  if (StsData.ExpiredTime && StsData.ExpiredTime - util.getSkewTime(self.options.SystemClockOffset) / 1000 > 60) {\n    // 如果缓存的临时密钥有效，并还有超过60秒有效期就直接使用\n    calcAuthByTmpKey();\n  } else if (self.options.getAuthorization) {\n    // 外部计算签名或获取临时密钥\n    self.options.getAuthorization.call(self, {\n      Bucket: Bucket,\n      Region: Region,\n      Method: params.Method,\n      Key: KeyName,\n      Pathname: Pathname,\n      Query: params.Query,\n      Headers: headers,\n      Scope: Scope,\n      SystemClockOffset: self.options.SystemClockOffset\n    }, function (AuthData) {\n      if (typeof AuthData === 'string') AuthData = {\n        Authorization: AuthData\n      };\n      var AuthError = checkAuthError(AuthData);\n      if (AuthError) return cb(AuthError);\n\n      if (AuthData.Authorization) {\n        cb(null, AuthData);\n      } else {\n        StsData = AuthData || {};\n        StsData.Scope = Scope;\n        StsData.ScopeKey = ScopeKey;\n\n        self._StsCache.push(StsData);\n\n        calcAuthByTmpKey();\n      }\n    });\n  } else if (self.options.getSTS) {\n    // 外部获取临时密钥\n    self.options.getSTS.call(self, {\n      Bucket: Bucket,\n      Region: Region\n    }, function (data) {\n      StsData = data || {};\n      StsData.Scope = Scope;\n      StsData.ScopeKey = ScopeKey;\n      if (!StsData.TmpSecretId) StsData.TmpSecretId = StsData.SecretId;\n      if (!StsData.TmpSecretKey) StsData.TmpSecretKey = StsData.SecretKey;\n      var AuthError = checkAuthError(StsData);\n      if (AuthError) return cb(AuthError);\n\n      self._StsCache.push(StsData);\n\n      calcAuthByTmpKey();\n    });\n  } else {\n    // 内部计算获取签名\n    return function () {\n      var Authorization = util.getAuth({\n        SecretId: params.SecretId || self.options.SecretId,\n        SecretKey: params.SecretKey || self.options.SecretKey,\n        Method: params.Method,\n        Pathname: Pathname,\n        Query: params.Query,\n        Headers: headers,\n        Expires: params.Expires,\n        UseRawKey: self.options.UseRawKey,\n        SystemClockOffset: self.options.SystemClockOffset\n      });\n      var AuthData = {\n        Authorization: Authorization,\n        SecurityToken: self.options.SecurityToken || self.options.XCosSecurityToken\n      };\n      cb(null, AuthData);\n      return AuthData;\n    }();\n  }\n\n  return '';\n} // 调整时间偏差\n\n\nfunction allowRetry(err) {\n  var allowRetry = false;\n  var isTimeError = false;\n  var serverDate = err.headers && (err.headers.date || err.headers.Date) || err.error && err.error.ServerTime;\n\n  try {\n    var errorCode = err.error.Code;\n    var errorMessage = err.error.Message;\n\n    if (errorCode === 'RequestTimeTooSkewed' || errorCode === 'AccessDenied' && errorMessage === 'Request has expired') {\n      isTimeError = true;\n    }\n  } catch (e) {}\n\n  if (err) {\n    if (isTimeError && serverDate) {\n      var serverTime = Date.parse(serverDate);\n\n      if (this.options.CorrectClockSkew && Math.abs(util.getSkewTime(this.options.SystemClockOffset) - serverTime) >= 30000) {\n        console.error('error: Local time is too skewed.');\n        this.options.SystemClockOffset = serverTime - Date.now();\n        allowRetry = true;\n      }\n    } else if (Math.floor(err.statusCode / 100) === 5) {\n      allowRetry = true;\n    }\n  }\n\n  return allowRetry;\n} // 获取签名并发起请求\n\n\nfunction submitRequest(params, callback) {\n  var self = this; // 处理 headers\n\n  !params.headers && (params.headers = {}); // 处理 query\n\n  !params.qs && (params.qs = {});\n  params.VersionId && (params.qs.versionId = params.VersionId);\n  params.qs = util.clearKey(params.qs); // 清理 undefined 和 null 字段\n\n  params.headers && (params.headers = util.clearKey(params.headers));\n  params.qs && (params.qs = util.clearKey(params.qs));\n  var Query = util.clone(params.qs);\n  params.action && (Query[params.action] = '');\n  var paramsUrl = params.url || params.Url;\n  var SignHost = params.SignHost || getSignHost.call(this, {\n    Bucket: params.Bucket,\n    Region: params.Region,\n    Url: paramsUrl\n  });\n\n  var next = function (tryTimes) {\n    var oldClockOffset = self.options.SystemClockOffset;\n    getAuthorizationAsync.call(self, {\n      Bucket: params.Bucket || '',\n      Region: params.Region || '',\n      Method: params.method,\n      Key: params.Key,\n      Query: Query,\n      Headers: params.headers,\n      SignHost: SignHost,\n      Action: params.Action,\n      ResourceKey: params.ResourceKey,\n      Scope: params.Scope\n    }, function (err, AuthData) {\n      if (err) {\n        callback(err);\n        return;\n      }\n\n      params.AuthData = AuthData;\n\n      _submitRequest.call(self, params, function (err, data) {\n        if (err && tryTimes < 2 && (oldClockOffset !== self.options.SystemClockOffset || allowRetry.call(self, err))) {\n          if (params.headers) {\n            delete params.headers.Authorization;\n            delete params.headers['token'];\n            delete params.headers['clientIP'];\n            delete params.headers['clientUA'];\n            params.headers['x-cos-security-token'] && delete params.headers['x-cos-security-token'];\n            params.headers['x-ci-security-token'] && delete params.headers['x-ci-security-token'];\n          }\n\n          next(tryTimes + 1);\n        } else {\n          callback(err, data);\n        }\n      });\n    });\n  };\n\n  next(1);\n} // 发起请求\n\n\nfunction _submitRequest(params, callback) {\n  var self = this;\n  var TaskId = params.TaskId;\n  if (TaskId && !self._isRunningTask(TaskId)) return;\n  var bucket = params.Bucket;\n  var region = params.Region;\n  var object = params.Key;\n  var method = params.method || 'GET';\n  var url = params.Url || params.url;\n  var body = params.body;\n  var rawBody = params.rawBody; // url\n\n  if (self.options.UseAccelerate) {\n    region = 'accelerate';\n  }\n\n  url = url || getUrl({\n    ForcePathStyle: self.options.ForcePathStyle,\n    protocol: self.options.Protocol,\n    domain: self.options.Domain,\n    bucket: bucket,\n    region: region,\n    object: object\n  });\n\n  if (params.action) {\n    url = url + '?' + params.action;\n  }\n\n  if (params.qsStr) {\n    if (url.indexOf('?') > -1) {\n      url = url + '&' + params.qsStr;\n    } else {\n      url = url + '?' + params.qsStr;\n    }\n  }\n\n  var opt = {\n    method: method,\n    url: url,\n    headers: params.headers,\n    qs: params.qs,\n    body: body\n  }; // 兼容ci接口\n\n  var token = 'x-cos-security-token';\n\n  if (util.isCIHost(url)) {\n    token = 'x-ci-security-token';\n  } // 获取签名\n\n\n  opt.headers.Authorization = params.AuthData.Authorization;\n  params.AuthData.Token && (opt.headers['token'] = params.AuthData.Token);\n  params.AuthData.ClientIP && (opt.headers['clientIP'] = params.AuthData.ClientIP);\n  params.AuthData.ClientUA && (opt.headers['clientUA'] = params.AuthData.ClientUA);\n  params.AuthData.SecurityToken && (opt.headers[token] = params.AuthData.SecurityToken); // 清理 undefined 和 null 字段\n\n  opt.headers && (opt.headers = util.clearKey(opt.headers));\n  opt = util.clearKey(opt); // progress\n\n  if (params.onProgress && typeof params.onProgress === 'function') {\n    var contentLength = body && (body.size || body.length) || 0;\n\n    opt.onProgress = function (e) {\n      if (TaskId && !self._isRunningTask(TaskId)) return;\n      var loaded = e ? e.loaded : 0;\n      params.onProgress({\n        loaded: loaded,\n        total: contentLength\n      });\n    };\n  }\n\n  if (params.onDownloadProgress) {\n    opt.onDownloadProgress = params.onDownloadProgress;\n  }\n\n  if (params.DataType) {\n    opt.dataType = params.DataType;\n  }\n\n  if (this.options.Timeout) {\n    opt.timeout = this.options.Timeout;\n  }\n\n  self.options.ForcePathStyle && (opt.pathStyle = self.options.ForcePathStyle);\n  self.emit('before-send', opt);\n  var sender = (self.options.Request || REQUEST)(opt, function (r) {\n    if (r.error === 'abort') return;\n    var receive = {\n      options: opt,\n      error: err,\n      statusCode: response && response.statusCode || 0,\n      headers: response && response.headers || {},\n      body: body\n    };\n    self.emit('after-receive', receive);\n    err = receive.error;\n    body = receive.body;\n    response = {\n      statusCode: receive.statusCode,\n      headers: receive.headers\n    }; // 抛出事件，允许修改返回值的 error、statusCode、statusMessage、body\n\n    self.emit('after-receive', r);\n    var response = {\n      statusCode: r.statusCode,\n      statusMessage: r.statusMessage,\n      headers: r.headers\n    };\n    var err = r.error;\n    var body = r.body; // 返回内容添加 状态码 和 headers\n\n    var hasReturned;\n\n    var cb = function (err, data) {\n      TaskId && self.off('inner-kill-task', killTask);\n      if (hasReturned) return;\n      hasReturned = true;\n      var attrs = {};\n      response && response.statusCode && (attrs.statusCode = response.statusCode);\n      response && response.headers && (attrs.headers = response.headers);\n\n      if (err) {\n        err = util.extend(err || {}, attrs);\n        callback(err, null);\n      } else {\n        data = util.extend(data || {}, attrs);\n        callback(null, data);\n      }\n\n      sender = null;\n    }; // 请求错误，发生网络错误\n\n\n    if (err) return cb(util.error(err)); // 请求返回码不为 200\n\n    var statusCode = response.statusCode;\n    var statusSuccess = Math.floor(statusCode / 100) === 2; // 200 202 204 206\n    // 不对 body 进行转换，body 直接挂载返回\n\n    if (rawBody && statusSuccess) return cb(null, {\n      body: body\n    }); // 解析 xml body\n\n    var json;\n\n    try {\n      json = body && body.indexOf('<') > -1 && body.indexOf('>') > -1 && util.xml2json(body) || {};\n    } catch (e) {\n      json = {};\n    } // 处理返回值\n\n\n    var xmlError = json && json.Error;\n\n    if (statusSuccess) {\n      // 正确返回，状态码 2xx 时，body 不会有 Error\n      cb(null, json);\n    } else if (xmlError) {\n      // 正常返回了 xml body，且有 Error 节点\n      cb(util.error(new Error(xmlError.Message), {\n        code: xmlError.Code,\n        error: xmlError\n      }));\n    } else if (statusCode) {\n      // 有错误的状态码\n      cb(util.error(new Error(response.statusMessage), {\n        code: '' + statusCode\n      }));\n    } else if (statusCode) {\n      // 无状态码，或者获取不到状态码\n      cb(util.error(new Error('statusCode error')));\n    }\n  }); // kill task\n\n  var killTask = function (data) {\n    if (data.TaskId === TaskId) {\n      sender && sender.abort && sender.abort();\n      self.off('inner-kill-task', killTask);\n    }\n  };\n\n  TaskId && self.on('inner-kill-task', killTask);\n}\n\nvar API_MAP = {\n  // Bucket 相关方法\n  getService: getService,\n  // Bucket\n  putBucket: putBucket,\n  headBucket: headBucket,\n  // Bucket\n  getBucket: getBucket,\n  deleteBucket: deleteBucket,\n  putBucketAcl: putBucketAcl,\n  // BucketACL\n  getBucketAcl: getBucketAcl,\n  putBucketCors: putBucketCors,\n  // BucketCors\n  getBucketCors: getBucketCors,\n  deleteBucketCors: deleteBucketCors,\n  getBucketLocation: getBucketLocation,\n  // BucketLocation\n  getBucketPolicy: getBucketPolicy,\n  // BucketPolicy\n  putBucketPolicy: putBucketPolicy,\n  deleteBucketPolicy: deleteBucketPolicy,\n  putBucketTagging: putBucketTagging,\n  // BucketTagging\n  getBucketTagging: getBucketTagging,\n  deleteBucketTagging: deleteBucketTagging,\n  putBucketLifecycle: putBucketLifecycle,\n  // BucketLifecycle\n  getBucketLifecycle: getBucketLifecycle,\n  deleteBucketLifecycle: deleteBucketLifecycle,\n  putBucketVersioning: putBucketVersioning,\n  // BucketVersioning\n  getBucketVersioning: getBucketVersioning,\n  putBucketReplication: putBucketReplication,\n  // BucketReplication\n  getBucketReplication: getBucketReplication,\n  deleteBucketReplication: deleteBucketReplication,\n  putBucketWebsite: putBucketWebsite,\n  // BucketWebsite\n  getBucketWebsite: getBucketWebsite,\n  deleteBucketWebsite: deleteBucketWebsite,\n  putBucketReferer: putBucketReferer,\n  // BucketReferer\n  getBucketReferer: getBucketReferer,\n  putBucketDomain: putBucketDomain,\n  // BucketDomain\n  getBucketDomain: getBucketDomain,\n  deleteBucketDomain: deleteBucketDomain,\n  putBucketOrigin: putBucketOrigin,\n  // BucketOrigin\n  getBucketOrigin: getBucketOrigin,\n  deleteBucketOrigin: deleteBucketOrigin,\n  putBucketLogging: putBucketLogging,\n  // BucketLogging\n  getBucketLogging: getBucketLogging,\n  putBucketInventory: putBucketInventory,\n  // BucketInventory\n  getBucketInventory: getBucketInventory,\n  listBucketInventory: listBucketInventory,\n  deleteBucketInventory: deleteBucketInventory,\n  putBucketAccelerate: putBucketAccelerate,\n  getBucketAccelerate: getBucketAccelerate,\n  putBucketEncryption: putBucketEncryption,\n  getBucketEncryption: getBucketEncryption,\n  deleteBucketEncryption: deleteBucketEncryption,\n  // Object 相关方法\n  getObject: getObject,\n  headObject: headObject,\n  listObjectVersions: listObjectVersions,\n  putObject: putObject,\n  deleteObject: deleteObject,\n  getObjectAcl: getObjectAcl,\n  putObjectAcl: putObjectAcl,\n  optionsObject: optionsObject,\n  putObjectCopy: putObjectCopy,\n  deleteMultipleObject: deleteMultipleObject,\n  restoreObject: restoreObject,\n  putObjectTagging: putObjectTagging,\n  getObjectTagging: getObjectTagging,\n  deleteObjectTagging: deleteObjectTagging,\n  selectObjectContent: selectObjectContent,\n  appendObject: appendObject,\n  // 分块上传相关方法\n  uploadPartCopy: uploadPartCopy,\n  multipartInit: multipartInit,\n  multipartUpload: multipartUpload,\n  multipartComplete: multipartComplete,\n  multipartList: multipartList,\n  multipartListPart: multipartListPart,\n  multipartAbort: multipartAbort,\n  // 工具方法\n  request: request,\n  getObjectUrl: getObjectUrl,\n  getAuth: getAuth\n};\n\nfunction warnOldApi(apiName, fn, proto) {\n  util.each(['Cors', 'Acl'], function (suffix) {\n    if (apiName.slice(-suffix.length) === suffix) {\n      var oldName = apiName.slice(0, -suffix.length) + suffix.toUpperCase();\n      var apiFn = util.apiWrapper(apiName, fn);\n      var warned = false;\n\n      proto[oldName] = function () {\n        !warned && console.warn('warning: cos.' + oldName + ' has been deprecated. Please Use cos.' + apiName + ' instead.');\n        warned = true;\n        apiFn.apply(this, arguments);\n      };\n    }\n  });\n}\n\nmodule.exports.init = function (COS, task) {\n  task.transferToTaskMethod(API_MAP, 'putObject');\n  util.each(API_MAP, function (fn, apiName) {\n    COS.prototype[apiName] = util.apiWrapper(apiName, fn);\n    warnOldApi(apiName, fn, COS.prototype);\n  });\n};","map":{"version":3,"names":["REQUEST","require","util","getService","params","callback","protocol","options","Protocol","isBrowser","location","domain","ServiceDomain","appId","AppId","region","Region","replace","test","slice","SignHost","standardHost","urlHost","submitRequest","call","Action","url","method","headers","Headers","err","data","buckets","ListAllMyBucketsResult","Buckets","Bucket","isArray","owner","Owner","statusCode","putBucket","self","xml","CreateBucketConfiguration","BucketAZConfig","json2xml","body","getUrl","Domain","bucket","isLocation","Location","headBucket","getBucket","reqParams","ResourceKey","qs","ListBucketResult","Contents","CommonPrefixes","result","clone","extend","deleteBucket","putBucketAcl","AccessControlPolicy","Grants","Grant","AccessControlList","binaryBase64","md5","each","val","key","indexOf","uniqGrant","action","getBucketAcl","decodeAcl","ACL","putBucketCors","CORSConfiguration","CORSRules","rule","sKey","CORSRule","getBucketCors","error","Code","deleteBucketCors","getBucketLocation","putBucketPolicy","Policy","JSON","parse","e","Error","PolicyStr","stringify","version","getBucketPolicy","rawBody","ErrorStatus","deleteBucketPolicy","putBucketTagging","Tagging","Tags","TagSet","Tag","getBucketTagging","deleteBucketTagging","putBucketLifecycle","LifecycleConfiguration","Rules","Rule","getBucketLifecycle","deleteBucketLifecycle","putBucketVersioning","VersioningConfiguration","getBucketVersioning","putBucketReplication","ReplicationConfiguration","getBucketReplication","makeArray","deleteBucketReplication","putBucketWebsite","WebsiteConfiguration","RoutingRules","RoutingRule","length","getBucketWebsite","Key","deleteBucketWebsite","putBucketReferer","RefererConfiguration","DomainList","Domains","getBucketReferer","putBucketDomain","DomainConfiguration","DomainRule","getBucketDomain","deleteBucketDomain","putBucketOrigin","OriginConfiguration","OriginRule","getBucketOrigin","deleteBucketOrigin","putBucketLogging","BucketLoggingStatus","getBucketLogging","putBucketInventory","InventoryConfiguration","OptionalFields","Field","Destination","COSBucketDestination","Encryption","Object","keys","id","getBucketInventory","listBucketInventory","ListInventoryConfigurationResult","InventoryConfigurations","deleteBucketInventory","putBucketAccelerate","configuration","AccelerateConfiguration","getBucketAccelerate","putBucketEncryption","conf","ServerSideEncryptionConfiguration","getBucketEncryption","code","EncryptionConfiguration","deleteBucketEncryption","headObject","VersionId","NotModified","ETag","attr","listObjectVersions","ListVersionsResult","DeleteMarkers","DeleteMarker","Versions","Version","getObject","Query","reqParamsStr","QueryString","onProgress","throttleOnProgress","DataType","qsStr","onDownloadProgress","Body","putObject","FileSize","ContentLength","type","needCalcMd5","UploadAddMetaMd5","UploadCheckContentMd5","getBodyMd5","undefined","TaskId","loaded","total","ForcePathStyle","UseAccelerate","object","substr","onHashProgress","deleteObject","Recursive","BucketNotFound","getObjectAcl","GrantWrite","putObjectAcl","optionsObject","OptionsForbidden","AccessControlAllowOrigin","AccessControlAllowMethods","AccessControlAllowHeaders","AccessControlExposeHeaders","AccessControlMaxAge","putObjectCopy","CopySource","m","getSourceParams","SourceBucket","SourceRegion","SourceKey","decodeURIComponent","Scope","prefix","CopyObjectResult","uploadPartCopy","partNumber","uploadId","CopyPartResult","deleteMultipleObject","Objects","Quiet","Delete","map","v","DeleteResult","Deleted","Errors","restoreObject","RestoreRequest","putObjectTagging","getObjectTagging","deleteObjectTagging","selectObjectContent","SelectType","SelectRequest","parseSelectPayload","Payload","payload","multipartInit","InitiateMultipartUploadResult","multipartUpload","getFileSize","multipartComplete","UploadId","Parts","i","len","CompleteMultipartUpload","Part","res","CompleteMultipartUploadResult","ProcessResults","UploadResult","OriginalInfo","ImageInfo","multipartList","clearKey","ListMultipartUploadsResult","Upload","multipartListPart","ListPartsResult","multipartAbort","request","Method","Url","RawBody","appendObject","position","Position","getAuth","SecretId","SecretKey","Expires","UseRawKey","SystemClockOffset","getObjectUrl","queryParamsStr","obj2str","syncUrl","Sign","getSignHost","AuthData","getAuthorizationAsync","toUpperCase","replaceUrlParamList","urlParams","match","encodedParams","encodeURIComponent","toLowerCase","reg","RegExp","replacedUrl","signUrl","Authorization","SecurityToken","ClientIP","ClientUA","Token","setTimeout","GrantFullControl","GrantRead","GrantReadAcp","GrantWriteAcp","GrantMap","PublicAcl","READ","WRITE","FULL_CONTROL","item","Grantee","ID","URI","Permission","push","join","str","arr","split","exist","trim","splice","longBucket","shortBucket","lastIndexOf","camSafeUrlEncode","opt","standardHostReg","headerHost","k","Host","cbDone","cb","XCosSecurityToken","KeyName","Pathname","StsData","ScopeKey","_StsCache","compareTime","Math","round","getSkewTime","StartTime","ExpiredTime","ScopeLimit","calcAuthByTmpKey","KeyTime","TmpSecretId","TmpSecretKey","checkAuthError","formatAllow","auth","atob","toString","getAuthorization","AuthError","getSTS","allowRetry","isTimeError","serverDate","date","Date","ServerTime","errorCode","errorMessage","Message","serverTime","CorrectClockSkew","abs","console","now","floor","versionId","paramsUrl","next","tryTimes","oldClockOffset","_submitRequest","_isRunningTask","token","isCIHost","contentLength","size","dataType","Timeout","timeout","pathStyle","emit","sender","Request","r","receive","response","statusMessage","hasReturned","off","killTask","attrs","statusSuccess","json","xml2json","xmlError","abort","on","API_MAP","warnOldApi","apiName","fn","proto","suffix","oldName","apiFn","apiWrapper","warned","warn","apply","arguments","module","exports","init","COS","task","transferToTaskMethod","prototype"],"sources":["/Users/yzbaoo/Desktop/huohua/ilc-web-packages/node_modules/cos-js-sdk-v5/src/base.js"],"sourcesContent":["var REQUEST = require('../lib/request');\nvar util = require('./util');\n\n\n// Bucket 相关\n\n/**\n * 获取用户的 bucket 列表\n * @param  {Object}  params         回调函数，必须，下面为参数列表\n * 无特殊参数\n * @param  {Function}  callback     回调函数，必须\n */\nfunction getService(params, callback) {\n\n    if (typeof params === 'function') {\n        callback = params;\n        params = {};\n    }\n    var protocol = this.options.Protocol || (util.isBrowser && location.protocol === 'http:' ? 'http:' : 'https:');\n    var domain = this.options.ServiceDomain;\n    var appId = params.AppId || this.options.appId;\n    var region = params.Region;\n    if (domain) {\n        domain = domain.replace(/\\{\\{AppId\\}\\}/ig, appId || '')\n            .replace(/\\{\\{Region\\}\\}/ig, region || '').replace(/\\{\\{.*?\\}\\}/ig, '');\n        if (!/^[a-zA-Z]+:\\/\\//.test(domain)) {\n            domain = protocol + '//' + domain;\n        }\n        if (domain.slice(-1) === '/') {\n            domain = domain.slice(0, -1);\n        }\n    } else if (region) {\n        domain = protocol + '//cos.' + region + '.myqcloud.com';\n    } else {\n        domain = protocol + '//service.cos.myqcloud.com';\n    }\n\n    var SignHost = '';\n    var standardHost = region ? 'cos.' + region + '.myqcloud.com' : 'service.cos.myqcloud.com';\n    var urlHost = domain.replace(/^https?:\\/\\/([^/]+)(\\/.*)?$/, '$1');\n    if (standardHost === urlHost) SignHost = standardHost;\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetService',\n        url: domain,\n        method: 'GET',\n        headers: params.Headers,\n        SignHost: SignHost,\n    }, function (err, data) {\n        if (err) return callback(err);\n        var buckets = (data && data.ListAllMyBucketsResult && data.ListAllMyBucketsResult.Buckets\n            && data.ListAllMyBucketsResult.Buckets.Bucket) || [];\n        buckets = util.isArray(buckets) ? buckets : [buckets];\n        var owner = (data && data.ListAllMyBucketsResult && data.ListAllMyBucketsResult.Owner) || {};\n        callback(null, {\n            Buckets: buckets,\n            Owner: owner,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 创建 Bucket，并初始化访问权限\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n *     @param  {String}  params.ACL                 用户自定义文件权限，可以设置：private，public-read；默认值：private，非必须\n *     @param  {String}  params.GrantRead           赋予被授权者读的权限，格式x-cos-grant-read: uin=\" \",uin=\" \"，非必须\n *     @param  {String}  params.GrantWrite          赋予被授权者写的权限，格式x-cos-grant-write: uin=\" \",uin=\" \"，非必须\n *     @param  {String}  params.GrantFullControl    赋予被授权者读写权限，格式x-cos-grant-full-control: uin=\" \",uin=\" \"，非必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n *     @return  {String}  data.Location             操作地址\n */\nfunction putBucket(params, callback) {\n\n    var self = this;\n\n    var xml = '';\n    if(params['BucketAZConfig']){\n        var CreateBucketConfiguration = {\n            BucketAZConfig: params.BucketAZConfig\n        };\n        xml = util.json2xml({CreateBucketConfiguration: CreateBucketConfiguration});\n    }\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucket',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        body: xml,\n    }, function (err, data) {\n        if (err) return callback(err);\n        var url = getUrl({\n            protocol: self.options.Protocol,\n            domain: self.options.Domain,\n            bucket: params.Bucket,\n            region: params.Region,\n            isLocation: true,\n        });\n        callback(null, {\n            Location: url,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 查看是否存在该Bucket，是否有权限访问\n * @param  {Object}  params                     参数对象，必须\n *     @param  {String}  params.Bucket          Bucket名称，必须\n *     @param  {String}  params.Region          地域名称，必须\n * @param  {Function}  callback                 回调函数，必须\n * @return  {Object}  err                       请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                      返回的数据\n *     @return  {Boolean}  data.BucketExist     Bucket是否存在\n *     @return  {Boolean}  data.BucketAuth      是否有 Bucket 的访问权限\n */\nfunction headBucket(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:HeadBucket',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        method: 'HEAD',\n    }, callback);\n}\n\n/**\n * 获取 Bucket 下的 object 列表\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n *     @param  {String}  params.Prefix              前缀匹配，用来规定返回的文件前缀地址，非必须\n *     @param  {String}  params.Delimiter           定界符为一个符号，如果有Prefix，则将Prefix到delimiter之间的相同路径归为一类，非必须\n *     @param  {String}  params.Marker              默认以UTF-8二进制顺序列出条目，所有列出条目从marker开始，非必须\n *     @param  {String}  params.MaxKeys             单次返回最大的条目数量，默认1000，非必须\n *     @param  {String}  params.EncodingType        规定返回值的编码方式，非必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n *     @return  {Object}  data.ListBucketResult     返回的 object 列表信息\n */\nfunction getBucket(params, callback) {\n    var reqParams = {};\n    reqParams['prefix'] = params['Prefix'] || '';\n    reqParams['delimiter'] = params['Delimiter'];\n    reqParams['marker'] = params['Marker'];\n    reqParams['max-keys'] = params['MaxKeys'];\n    reqParams['encoding-type'] = params['EncodingType'];\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucket',\n        ResourceKey: reqParams['prefix'],\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        qs: reqParams,\n    }, function (err, data) {\n        if (err) return callback(err);\n        var ListBucketResult = data.ListBucketResult || {};\n        var Contents = ListBucketResult.Contents || [];\n        var CommonPrefixes = ListBucketResult.CommonPrefixes || [];\n\n        Contents = util.isArray(Contents) ? Contents : [Contents];\n        CommonPrefixes = util.isArray(CommonPrefixes) ? CommonPrefixes : [CommonPrefixes];\n\n        var result = util.clone(ListBucketResult);\n        util.extend(result, {\n            Contents: Contents,\n            CommonPrefixes: CommonPrefixes,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n\n        callback(null, result);\n    });\n}\n\n/**\n * 删除 Bucket\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n * @param  {Function}  callback             回调函数，必须\n * @return  {Object}  err                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                  返回的数据\n *     @return  {String}  data.Location     操作地址\n */\nfunction deleteBucket(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteBucket',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        method: 'DELETE',\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 设置 Bucket 的 权限列表\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n *     @param  {String}  params.ACL                 用户自定义文件权限，可以设置：private，public-read；默认值：private，非必须\n *     @param  {String}  params.GrantRead           赋予被授权者读的权限，格式x-cos-grant-read: uin=\" \",uin=\" \"，非必须\n *     @param  {String}  params.GrantWrite          赋予被授权者写的权限，格式x-cos-grant-write: uin=\" \",uin=\" \"，非必须\n *     @param  {String}  params.GrantFullControl    赋予被授权者读写权限，格式x-cos-grant-full-control: uin=\" \",uin=\" \"，非必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n */\nfunction putBucketAcl(params, callback) {\n    var headers = params.Headers;\n\n    var xml = '';\n    if (params['AccessControlPolicy']) {\n        var AccessControlPolicy = util.clone(params['AccessControlPolicy'] || {});\n        var Grants = AccessControlPolicy.Grants || AccessControlPolicy.Grant;\n        Grants = util.isArray(Grants) ? Grants : [Grants];\n        delete AccessControlPolicy.Grant;\n        delete AccessControlPolicy.Grants;\n        AccessControlPolicy.AccessControlList = {Grant: Grants};\n        xml = util.json2xml({AccessControlPolicy: AccessControlPolicy});\n\n        headers['Content-Type'] = 'application/xml';\n        headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n    }\n\n    // Grant Header 去重\n    util.each(headers, function (val, key) {\n        if (key.indexOf('x-cos-grant-') === 0) {\n            headers[key] = uniqGrant(headers[key]);\n        }\n    });\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketACL',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: headers,\n        action: 'acl',\n        body: xml,\n    }, function (err, data) {\n        if (err) return callback(err);\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的 权限列表\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n *     @return  {Object}  data.AccessControlPolicy  访问权限信息\n */\nfunction getBucketAcl(params, callback) {\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketACL',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'acl',\n    }, function (err, data) {\n        if (err) return callback(err);\n        var AccessControlPolicy = data.AccessControlPolicy || {};\n        var Owner = AccessControlPolicy.Owner || {};\n        var Grant = AccessControlPolicy.AccessControlList.Grant || [];\n        Grant = util.isArray(Grant) ? Grant : [Grant];\n        var result = decodeAcl(AccessControlPolicy);\n        if (data.headers && data.headers['x-cos-acl']) {\n            result.ACL = data.headers['x-cos-acl'];\n        }\n        result = util.extend(result, {\n            Owner: Owner,\n            Grants: Grant,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n        callback(null, result);\n    });\n}\n\n/**\n * 设置 Bucket 的 跨域设置\n * @param  {Object}  params                             参数对象，必须\n *     @param  {String}  params.Bucket                  Bucket名称，必须\n *     @param  {String}  params.Region                  地域名称，必须\n *     @param  {Object}  params.CORSConfiguration       相关的跨域设置，必须\n * @param  {Array}  params.CORSConfiguration.CORSRules  对应的跨域规则\n * @param  {Function}  callback                         回调函数，必须\n * @return  {Object}  err                               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                              返回的数据\n */\nfunction putBucketCors(params, callback) {\n\n    var CORSConfiguration = params['CORSConfiguration'] || {};\n    var CORSRules = CORSConfiguration['CORSRules'] || params['CORSRules'] || [];\n    CORSRules = util.clone(util.isArray(CORSRules) ? CORSRules : [CORSRules]);\n    util.each(CORSRules, function (rule) {\n        util.each(['AllowedOrigin', 'AllowedHeader', 'AllowedMethod', 'ExposeHeader'], function (key) {\n            var sKey = key + 's';\n            var val = rule[sKey] || rule[key] || [];\n            delete rule[sKey];\n            rule[key] = util.isArray(val) ? val : [val];\n        });\n    });\n\n    var xml = util.json2xml({CORSConfiguration: {CORSRule: CORSRules}});\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketCORS',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'cors',\n        headers: headers,\n    }, function (err, data) {\n        if (err) return callback(err);\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的 跨域设置\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n *     @return  {Object}  data.CORSRules            Bucket的跨域设置\n */\nfunction getBucketCors(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketCORS',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'cors',\n    }, function (err, data) {\n        if (err) {\n            if (err.statusCode === 404 && err.error && err.error.Code === 'NoSuchCORSConfiguration') {\n                var result = {\n                    CORSRules: [],\n                    statusCode: err.statusCode,\n                };\n                err.headers && (result.headers = err.headers);\n                callback(null, result);\n            } else {\n                callback(err);\n            }\n            return;\n        }\n        var CORSConfiguration = data.CORSConfiguration || {};\n        var CORSRules = CORSConfiguration.CORSRules || CORSConfiguration.CORSRule || [];\n        CORSRules = util.clone(util.isArray(CORSRules) ? CORSRules : [CORSRules]);\n\n        util.each(CORSRules, function (rule) {\n            util.each(['AllowedOrigin', 'AllowedHeader', 'AllowedMethod', 'ExposeHeader'], function (key) {\n                var sKey = key + 's';\n                var val = rule[sKey] || rule[key] || [];\n                delete rule[key];\n                rule[sKey] = util.isArray(val) ? val : [val];\n            });\n        });\n\n        callback(null, {\n            CORSRules: CORSRules,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 删除 Bucket 的 跨域设置\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n * @param  {Function}  callback             回调函数，必须\n * @return  {Object}  err                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                  返回的数据\n */\nfunction deleteBucketCors(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteBucketCORS',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'cors',\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode || err.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的 地域信息\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据，包含地域信息 LocationConstraint\n */\nfunction getBucketLocation(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketLocation',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'location',\n    }, callback);\n}\n\nfunction putBucketPolicy(params, callback) {\n    var Policy = params['Policy'];\n    try {\n        if (typeof Policy === 'string') Policy = JSON.parse(Policy);\n    } catch (e) {\n    }\n    if (!Policy || typeof Policy === 'string') return callback(util.error(new Error('Policy format error')));\n    var PolicyStr = JSON.stringify(Policy);\n    if (!Policy.version) Policy.version = '2.0';\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/json';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(PolicyStr));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketPolicy',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        action: 'policy',\n        body: PolicyStr,\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的读取权限策略\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction getBucketPolicy(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketPolicy',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'policy',\n        rawBody: true,\n    }, function (err, data) {\n        if (err) {\n            if (err.statusCode && err.statusCode === 403) {\n                return callback(util.error(err, {ErrorStatus: 'Access Denied'}));\n            }\n            if (err.statusCode && err.statusCode === 405) {\n                return callback(util.error(err, {ErrorStatus: 'Method Not Allowed'}));\n            }\n            if (err.statusCode && err.statusCode === 404) {\n                return callback(util.error(err, {ErrorStatus: 'Policy Not Found'}));\n            }\n            return callback(err);\n        }\n        var Policy = {};\n        try {\n            Policy = JSON.parse(data.body);\n        } catch (e) {\n        }\n        callback(null, {\n            Policy: Policy,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 删除 Bucket 的 跨域设置\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n * @param  {Function}  callback             回调函数，必须\n * @return  {Object}  err                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                  返回的数据\n */\nfunction deleteBucketPolicy(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteBucketPolicy',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'policy',\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode || err.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 设置 Bucket 的标签\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {Array}   params.TagSet  标签设置，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction putBucketTagging(params, callback) {\n\n    var Tagging = params['Tagging'] || {};\n    var Tags = Tagging.TagSet || Tagging.Tags || params['Tags'] || [];\n    Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);\n    var xml = util.json2xml({Tagging: {TagSet: {Tag: Tags}}});\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketTagging',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'tagging',\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的标签设置\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction getBucketTagging(params, callback) {\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketTagging',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'tagging',\n    }, function (err, data) {\n        if (err) {\n            if (err.statusCode === 404 && err.error && (err.error === \"Not Found\" || err.error.Code === 'NoSuchTagSet')) {\n                var result = {\n                    Tags: [],\n                    statusCode: err.statusCode,\n                };\n                err.headers && (result.headers = err.headers);\n                callback(null, result);\n            } else {\n                callback(err);\n            }\n            return;\n        }\n        var Tags = [];\n        try {\n            Tags = data.Tagging.TagSet.Tag || [];\n        } catch (e) {\n        }\n        Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);\n        callback(null, {\n            Tags: Tags,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 删除 Bucket 的 标签设置\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回的数据\n */\nfunction deleteBucketTagging(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteBucketTagging',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'tagging',\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\nfunction putBucketLifecycle(params, callback) {\n\n    var LifecycleConfiguration = params['LifecycleConfiguration'] || {};\n    var Rules = LifecycleConfiguration.Rules || params.Rules || [];\n    Rules = util.clone(Rules);\n    var xml = util.json2xml({LifecycleConfiguration: {Rule: Rules}});\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketLifecycle',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'lifecycle',\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\nfunction getBucketLifecycle(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketLifecycle',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'lifecycle',\n    }, function (err, data) {\n        if (err) {\n            if (err.statusCode === 404 && err.error && err.error.Code === 'NoSuchLifecycleConfiguration') {\n                var result = {\n                    Rules: [],\n                    statusCode: err.statusCode,\n                };\n                err.headers && (result.headers = err.headers);\n                callback(null, result);\n            } else {\n                callback(err);\n            }\n            return;\n        }\n        var Rules = [];\n        try {\n            Rules = data.LifecycleConfiguration.Rule || [];\n        } catch (e) {\n        }\n        Rules = util.clone(util.isArray(Rules) ? Rules : [Rules]);\n        callback(null, {\n            Rules: Rules,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\nfunction deleteBucketLifecycle(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteBucketLifecycle',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'lifecycle',\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\nfunction putBucketVersioning(params, callback) {\n\n    if (!params['VersioningConfiguration']) {\n        callback(util.error(new Error('missing param VersioningConfiguration')));\n        return;\n    }\n    var VersioningConfiguration = params['VersioningConfiguration'] || {};\n    var xml = util.json2xml({VersioningConfiguration: VersioningConfiguration});\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketVersioning',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'versioning',\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\nfunction getBucketVersioning(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketVersioning',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'versioning',\n    }, function (err, data) {\n        if (!err) {\n            !data.VersioningConfiguration && (data.VersioningConfiguration = {});\n        }\n        callback(err, data);\n    });\n}\n\nfunction putBucketReplication(params, callback) {\n    var ReplicationConfiguration = util.clone(params.ReplicationConfiguration);\n    var xml = util.json2xml({ReplicationConfiguration: ReplicationConfiguration});\n    xml = xml.replace(/<(\\/?)Rules>/ig, '<$1Rule>');\n    xml = xml.replace(/<(\\/?)Tags>/ig, '<$1Tag>');\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketReplication',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'replication',\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\nfunction getBucketReplication(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketReplication',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'replication',\n    }, function (err, data) {\n        if (err) {\n            if (err.statusCode === 404 && err.error && (err.error === 'Not Found' || err.error.Code === 'ReplicationConfigurationnotFoundError')) {\n                var result = {\n                    ReplicationConfiguration: {Rules: []},\n                    statusCode: err.statusCode,\n                };\n                err.headers && (result.headers = err.headers);\n                callback(null, result);\n            } else {\n                callback(err);\n            }\n            return;\n        }\n        !data.ReplicationConfiguration && (data.ReplicationConfiguration = {});\n        if (data.ReplicationConfiguration.Rule) {\n            data.ReplicationConfiguration.Rules = util.makeArray(data.ReplicationConfiguration.Rule);\n            delete data.ReplicationConfiguration.Rule;\n        }\n        callback(err, data);\n    });\n}\n\nfunction deleteBucketReplication(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteBucketReplication',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'replication',\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 设置 Bucket 静态网站配置信息\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n *     @param  {Object}  params.WebsiteConfiguration                        地域名称，必须\n *         @param  {Object}   WebsiteConfiguration.IndexDocument            索引文档，必须\n *         @param  {Object}   WebsiteConfiguration.ErrorDocument            错误文档，非必须\n *         @param  {Object}   WebsiteConfiguration.RedirectAllRequestsTo    重定向所有请求，非必须\n *         @param  {Array}   params.RoutingRules                            重定向规则，非必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\nfunction putBucketWebsite(params, callback) {\n\n    if (!params['WebsiteConfiguration']) {\n        callback(util.error(new Error('missing param WebsiteConfiguration')));\n        return;\n    }\n\n    var WebsiteConfiguration = util.clone(params['WebsiteConfiguration'] || {});\n    var RoutingRules = WebsiteConfiguration['RoutingRules'] || WebsiteConfiguration['RoutingRule'] || [];\n    RoutingRules = util.isArray(RoutingRules) ? RoutingRules : [RoutingRules];\n    delete WebsiteConfiguration.RoutingRule;\n    delete WebsiteConfiguration.RoutingRules;\n    if (RoutingRules.length) WebsiteConfiguration.RoutingRules = { RoutingRule: RoutingRules };\n    var xml = util.json2xml({ WebsiteConfiguration: WebsiteConfiguration });\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketWebsite',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'website',\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的静态网站配置信息\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction getBucketWebsite(params, callback) {\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketWebsite',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        headers: params.Headers,\n        action: 'website',\n    }, function (err, data) {\n        if (err) {\n            if(err.statusCode === 404 && err.error.Code === 'NoSuchWebsiteConfiguration'){\n                var result = {\n                    WebsiteConfiguration: {},\n                    statusCode: err.statusCode,\n                };\n                err.headers && (result.headers = err.headers);\n                callback(null, result);\n            } else {\n                callback(err);\n            }\n            return;\n        }\n\n        var WebsiteConfiguration = data.WebsiteConfiguration || {};\n        if (WebsiteConfiguration['RoutingRules']) {\n            var RoutingRules = util.clone(WebsiteConfiguration['RoutingRules'].RoutingRule || []);\n            RoutingRules = util.makeArray(RoutingRules);\n            WebsiteConfiguration.RoutingRules = RoutingRules;\n        }\n\n        callback(null, {\n            WebsiteConfiguration: WebsiteConfiguration,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 删除 Bucket 的静态网站配置\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction deleteBucketWebsite(params, callback) {\n\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteBucketWebsite',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'website',\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 设置 Bucket 的防盗链白名单或者黑名单\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n *     @param  {Object}  params.RefererConfiguration                        地域名称，必须\n *         @param  {String}   RefererConfiguration.Status                   是否开启防盗链，枚举值：Enabled、Disabled\n *         @param  {String}   RefererConfiguration.RefererType              防盗链类型，枚举值：Black-List、White-List，必须\n *         @param  {Array}   RefererConfiguration.DomianList.Domain         生效域名，必须\n *         @param  {String}   RefererConfiguration.EmptyReferConfiguration  ，非必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\nfunction putBucketReferer(params, callback) {\n\n    if (!params['RefererConfiguration']) {\n        callback(util.error(new Error('missing param RefererConfiguration')));\n        return;\n    }\n\n    var RefererConfiguration = util.clone(params['RefererConfiguration'] || {});\n    var DomainList = RefererConfiguration['DomainList'] || {};\n    var Domains = DomainList['Domains'] || DomainList['Domain'] || [];\n    Domains = util.isArray(Domains) ? Domains : [Domains];\n    if (Domains.length) RefererConfiguration.DomainList = {Domain: Domains};\n    var xml = util.json2xml({ RefererConfiguration: RefererConfiguration });\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketReferer',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'referer',\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的防盗链白名单或者黑名单\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction getBucketReferer(params, callback) {\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketReferer',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        headers: params.Headers,\n        action: 'referer',\n    }, function (err, data) {\n        if (err) {\n            if(err.statusCode === 404 && err.error.Code === 'NoSuchRefererConfiguration'){\n                var result = {\n                    WebsiteConfiguration: {},\n                    statusCode: err.statusCode,\n                };\n                err.headers && (result.headers = err.headers);\n                callback(null, result);\n            } else {\n                callback(err);\n            }\n            return;\n        }\n\n        var RefererConfiguration = data.RefererConfiguration || {};\n        if (RefererConfiguration['DomainList']) {\n            var Domains = util.makeArray(RefererConfiguration['DomainList'].Domain || []);\n            RefererConfiguration.DomainList = {Domains: Domains};\n        }\n\n        callback(null, {\n            RefererConfiguration: RefererConfiguration,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 设置 Bucket 自定义域名\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\nfunction putBucketDomain(params, callback) {\n\n    var DomainConfiguration = params['DomainConfiguration'] || {};\n    var DomainRule = DomainConfiguration.DomainRule || params.DomainRule || [];\n    DomainRule = util.clone(DomainRule);\n    var xml = util.json2xml({DomainConfiguration: {DomainRule: DomainRule}});\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketDomain',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'domain',\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的自定义域名\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction getBucketDomain(params, callback) {\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketDomain',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'domain',\n    }, function (err, data) {\n        if (err) return callback(err);\n\n        var DomainRule = [];\n        try {\n            DomainRule = data.DomainConfiguration.DomainRule || [];\n        } catch (e) {\n        }\n        DomainRule = util.clone(util.isArray(DomainRule) ? DomainRule : [DomainRule]);\n        callback(null, {\n            DomainRule: DomainRule,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 删除 Bucket 自定义域名\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction deleteBucketDomain(params, callback) {\n\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteBucketDomain',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'domain',\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 设置 Bucket 的回源\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\nfunction putBucketOrigin(params, callback){\n    var OriginConfiguration = params['OriginConfiguration'] || {};\n    var OriginRule = OriginConfiguration.OriginRule || params.OriginRule || [];\n    OriginRule = util.clone(OriginRule);\n    var xml = util.json2xml({OriginConfiguration: {OriginRule: OriginRule}});\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketOrigin',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'origin',\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的回源\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction getBucketOrigin(params, callback) {\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketOrigin',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'origin',\n    }, function (err, data) {\n        if (err) return callback(err);\n\n        var OriginRule = [];\n        try {\n            OriginRule = data.OriginConfiguration.OriginRule || [];\n        } catch (e) {\n        }\n        OriginRule = util.clone(util.isArray(OriginRule) ? OriginRule : [OriginRule]);\n        callback(null, {\n            OriginRule: OriginRule,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 删除 Bucket 的回源\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction deleteBucketOrigin(params, callback) {\n\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteBucketOrigin',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'origin',\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 设置 Bucket 的日志记录\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n *     @param  {(Object|String)}  params.BucketLoggingStatus                         说明日志记录配置的状态，如果无子节点信息则意为关闭日志记录，必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\nfunction putBucketLogging(params, callback) {\n    var xml = util.json2xml({\n        BucketLoggingStatus: params['BucketLoggingStatus'] || ''\n    });\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketLogging',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'logging',\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的日志记录\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction getBucketLogging(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketLogging',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'logging',\n    }, function (err, data) {\n        if (err) return callback(err);\n        callback(null, {\n            BucketLoggingStatus: data.BucketLoggingStatus,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 创建/编辑 Bucket 的清单任务\n * @param  {Object}  params                                                 参数对象，必须\n *     @param  {String}  params.Bucket                                      Bucket名称，必须\n *     @param  {String}  params.Region                                      地域名称，必须\n *     @param  {String}  params.Id                                          清单任务的名称，必须\n *     @param  {Object}  params.InventoryConfiguration                      包含清单的配置参数，必须\n * @param  {Function}  callback                                             回调函数，必须\n * @return  {Object}  err                                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                                  返回数据\n */\nfunction putBucketInventory(params, callback) {\n    var InventoryConfiguration = util.clone(params['InventoryConfiguration']);\n\n    if (InventoryConfiguration.OptionalFields) {\n        var Field = InventoryConfiguration.OptionalFields || [];\n        InventoryConfiguration.OptionalFields = {\n            Field: Field\n        };\n    }\n\n    if (InventoryConfiguration.Destination\n        && InventoryConfiguration.Destination.COSBucketDestination\n        && InventoryConfiguration.Destination.COSBucketDestination.Encryption\n    ) {\n        var Encryption = InventoryConfiguration.Destination.COSBucketDestination.Encryption;\n        if (Object.keys(Encryption).indexOf('SSECOS') > -1) {\n            Encryption['SSE-COS'] = Encryption['SSECOS'];\n            delete Encryption['SSECOS'];\n        }\n    }\n\n    var xml = util.json2xml({\n        InventoryConfiguration: InventoryConfiguration\n    });\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketInventory',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'inventory',\n        qs: {\n            id: params['Id']\n        },\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的清单任务信息\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {String}  params.Id      清单任务的名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction getBucketInventory(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketInventory',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'inventory',\n        qs: {\n            id: params['Id']\n        }\n    }, function (err, data) {\n        if (err) return callback(err);\n\n        var InventoryConfiguration = data['InventoryConfiguration'];\n        if (InventoryConfiguration && InventoryConfiguration.OptionalFields && InventoryConfiguration.OptionalFields.Field) {\n            var Field = InventoryConfiguration.OptionalFields.Field;\n            if (!util.isArray(Field)) {\n                Field = [Field];\n            }\n            InventoryConfiguration.OptionalFields = Field;\n        }\n        if (InventoryConfiguration.Destination\n            && InventoryConfiguration.Destination.COSBucketDestination\n            && InventoryConfiguration.Destination.COSBucketDestination.Encryption\n        ) {\n            var Encryption = InventoryConfiguration.Destination.COSBucketDestination.Encryption;\n            if (Object.keys(Encryption).indexOf('SSE-COS') > -1) {\n                Encryption['SSECOS'] = Encryption['SSE-COS'];\n                delete Encryption['SSE-COS'];\n            }\n        }\n\n        callback(null, {\n            InventoryConfiguration: InventoryConfiguration,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Bucket 的清单任务信息\n * @param  {Object}  params                             参数对象，必须\n *     @param  {String}  params.Bucket                  Bucket名称，必须\n *     @param  {String}  params.Region                  地域名称，必须\n *     @param  {String}  params.ContinuationToken       当 COS 响应体中 IsTruncated 为 true，且 NextContinuationToken 节点中存在参数值时，您可以将这个参数作为 continuation-token 参数值，以获取下一页的清单任务信息，非必须\n * @param  {Function}  callback                         回调函数，必须\n * @return  {Object}  err                               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                              返回数据\n */\nfunction listBucketInventory(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:ListBucketInventory',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'inventory',\n        qs: {\n            'continuation-token': params['ContinuationToken']\n        }\n    }, function (err, data) {\n        if (err) return callback(err);\n        var ListInventoryConfigurationResult = data['ListInventoryConfigurationResult'];\n        var InventoryConfigurations = ListInventoryConfigurationResult.InventoryConfiguration || [];\n        InventoryConfigurations = util.isArray(InventoryConfigurations) ? InventoryConfigurations : [InventoryConfigurations];\n        delete ListInventoryConfigurationResult['InventoryConfiguration'];\n        util.each(InventoryConfigurations, function (InventoryConfiguration) {\n            if (InventoryConfiguration && InventoryConfiguration.OptionalFields && InventoryConfiguration.OptionalFields.Field) {\n                var Field = InventoryConfiguration.OptionalFields.Field;\n                if (!util.isArray(Field)) {\n                    Field = [Field];\n                }\n                InventoryConfiguration.OptionalFields = Field;\n            }\n\n            if (InventoryConfiguration.Destination\n                && InventoryConfiguration.Destination.COSBucketDestination\n                && InventoryConfiguration.Destination.COSBucketDestination.Encryption\n            ) {\n                var Encryption = InventoryConfiguration.Destination.COSBucketDestination.Encryption;\n                if (Object.keys(Encryption).indexOf('SSE-COS') > -1) {\n                    Encryption['SSECOS'] = Encryption['SSE-COS'];\n                    delete Encryption['SSE-COS'];\n                }\n            }\n        });\n        ListInventoryConfigurationResult.InventoryConfigurations = InventoryConfigurations;\n        util.extend(ListInventoryConfigurationResult, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n        callback(null, ListInventoryConfigurationResult);\n    });\n}\n\n/**\n * 删除 Bucket 的清单任务\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {String}  params.Id      清单任务的名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回数据\n */\nfunction deleteBucketInventory(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteBucketInventory',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'inventory',\n        qs: {\n            id: params['Id']\n        }\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/* 全球加速 */\nfunction putBucketAccelerate(params, callback) {\n\n    if (!params['AccelerateConfiguration']) {\n        callback(util.error(new Error('missing param AccelerateConfiguration')));\n        return;\n    }\n\n    var configuration = { AccelerateConfiguration: params.AccelerateConfiguration || {} };\n\n    var xml = util.json2xml(configuration);\n\n    var headers = {};\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketAccelerate',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'accelerate',\n        headers: headers,\n    }, function (err, data) {\n        if (err) return callback(err);\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\nfunction getBucketAccelerate(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketAccelerate',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        action: 'accelerate',\n    }, function (err, data) {\n        if (!err) {\n            !data.AccelerateConfiguration && (data.AccelerateConfiguration = {});\n        }\n        callback(err, data);\n    });\n}\n\nfunction putBucketEncryption(params, callback) {\n    var conf = params.ServerSideEncryptionConfiguration || {};\n    var Rules = conf.Rule || conf.Rules || [];\n    var xml = util.json2xml({ServerSideEncryptionConfiguration: {Rule:Rules}});\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutBucketEncryption',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'encryption',\n        headers: headers,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\nfunction getBucketEncryption(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketEncryption',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'encryption',\n    }, function (err, data) {\n        if (err) {\n            if (err.statusCode === 404 && err.code === 'NoSuchEncryptionConfiguration') {\n                var result = {\n                    EncryptionConfiguration: {Rules: []},\n                    statusCode: err.statusCode,\n                };\n                err.headers && (result.headers = err.headers);\n                callback(null, result);\n            } else {\n                callback(err);\n            }\n            return;\n        }\n        var Rules = util.makeArray(data.EncryptionConfiguration && data.EncryptionConfiguration.Rule || []);\n        data.EncryptionConfiguration = {Rules: Rules};\n        callback(err, data);\n    });\n}\n\nfunction deleteBucketEncryption(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteBucketReplication',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'encryption',\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n// Object 相关\n\n/**\n * 取回对应Object的元数据，Head的权限与Get的权限一致\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n *     @param  {String}  params.Key                 文件名称，必须\n *     @param  {String}  params.IfModifiedSince     当Object在指定时间后被修改，则返回对应Object元信息，否则返回304，非必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          为指定 object 的元数据，如果设置了 IfModifiedSince ，且文件未修改，则返回一个对象，NotModified 属性为 true\n *     @return  {Boolean}  data.NotModified         是否在 IfModifiedSince 时间点之后未修改该 object，则为 true\n */\nfunction headObject(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:HeadObject',\n        method: 'HEAD',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        VersionId: params.VersionId,\n        headers: params.Headers,\n    }, function (err, data) {\n        if (err) {\n            var statusCode = err.statusCode;\n            if (params.Headers['If-Modified-Since'] && statusCode && statusCode === 304) {\n                return callback(null, {\n                    NotModified: true,\n                    statusCode: statusCode,\n                });\n            }\n            return callback(err);\n        }\n        data.ETag = util.attr(data.headers, 'etag', '');\n        callback(null, data);\n    });\n}\n\n\nfunction listObjectVersions(params, callback) {\n    var reqParams = {};\n    reqParams['prefix'] = params['Prefix'] || '';\n    reqParams['delimiter'] = params['Delimiter'];\n    reqParams['key-marker'] = params['KeyMarker'];\n    reqParams['version-id-marker'] = params['VersionIdMarker'];\n    reqParams['max-keys'] = params['MaxKeys'];\n    reqParams['encoding-type'] = params['EncodingType'];\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetBucketObjectVersions',\n        ResourceKey: reqParams['prefix'],\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        qs: reqParams,\n        action: 'versions',\n    }, function (err, data) {\n        if (err) return callback(err);\n        var ListVersionsResult = data.ListVersionsResult || {};\n        var DeleteMarkers = ListVersionsResult.DeleteMarker || [];\n        DeleteMarkers = util.isArray(DeleteMarkers) ? DeleteMarkers : [DeleteMarkers];\n        var Versions = ListVersionsResult.Version || [];\n        Versions = util.isArray(Versions) ? Versions : [Versions];\n\n        var result = util.clone(ListVersionsResult);\n        delete result.DeleteMarker;\n        delete result.Version;\n        util.extend(result, {\n            DeleteMarkers: DeleteMarkers,\n            Versions: Versions,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n\n        callback(null, result);\n    });\n}\n\n/**\n * 下载 object\n * @param  {Object}  params                                 参数对象，必须\n *     @param  {String}  params.Bucket                      Bucket名称，必须\n *     @param  {String}  params.Region                      地域名称，必须\n *     @param  {String}  params.Key                         文件名称，必须\n *     @param  {WriteStream}  params.Output                 文件写入流，非必须\n *     @param  {String}  params.IfModifiedSince             当Object在指定时间后被修改，则返回对应Object元信息，否则返回304，非必须\n *     @param  {String}  params.IfUnmodifiedSince           如果文件修改时间早于或等于指定时间，才返回文件内容。否则返回 412 (precondition failed)，非必须\n *     @param  {String}  params.IfMatch                     当 ETag 与指定的内容一致，才返回文件。否则返回 412 (precondition failed)，非必须\n *     @param  {String}  params.IfNoneMatch                 当 ETag 与指定的内容不一致，才返回文件。否则返回304 (not modified)，非必须\n *     @param  {String}  params.ResponseContentType         设置返回头部中的 Content-Type 参数，非必须\n *     @param  {String}  params.ResponseContentLanguage     设置返回头部中的 Content-Language 参数，非必须\n *     @param  {String}  params.ResponseExpires             设置返回头部中的 Content-Expires 参数，非必须\n *     @param  {String}  params.ResponseCacheControl        设置返回头部中的 Cache-Control 参数，非必须\n *     @param  {String}  params.ResponseContentDisposition  设置返回头部中的 Content-Disposition 参数，非必须\n *     @param  {String}  params.ResponseContentEncoding     设置返回头部中的 Content-Encoding 参数，非必须\n * @param  {Function}  callback                             回调函数，必须\n * @param  {Object}  err                                    请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @param  {Object}  data                                   为对应的 object 数据，包括 body 和 headers\n */\nfunction getObject(params, callback) {\n    var reqParams = params.Query || {};\n    var reqParamsStr = params.QueryString || '';\n    var onProgress = util.throttleOnProgress.call(this, 0, params.onProgress);\n\n    reqParams['response-content-type'] = params['ResponseContentType'];\n    reqParams['response-content-language'] = params['ResponseContentLanguage'];\n    reqParams['response-expires'] = params['ResponseExpires'];\n    reqParams['response-cache-control'] = params['ResponseCacheControl'];\n    reqParams['response-content-disposition'] = params['ResponseContentDisposition'];\n    reqParams['response-content-encoding'] = params['ResponseContentEncoding'];\n\n    // 如果用户自己传入了 output\n    submitRequest.call(this, {\n        Action: 'name/cos:GetObject',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        VersionId: params.VersionId,\n        DataType: params.DataType,\n        headers: params.Headers,\n        qs: reqParams,\n        qsStr: reqParamsStr,\n        rawBody: true,\n        onDownloadProgress: onProgress,\n    }, function (err, data) {\n        onProgress(null, true);\n        if (err) {\n            var statusCode = err.statusCode;\n            if (params.Headers['If-Modified-Since'] && statusCode && statusCode === 304) {\n                return callback(null, {\n                    NotModified: true\n                });\n            }\n            return callback(err);\n        }\n        callback(null, {\n            Body: data.body,\n            ETag: util.attr(data.headers, 'etag', ''),\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n\n}\n\n/**\n * 上传 object\n * @param  {Object} params                                          参数对象，必须\n *     @param  {String}  params.Bucket                              Bucket名称，必须\n *     @param  {String}  params.Region                              地域名称，必须\n *     @param  {String}  params.Key                                 文件名称，必须\n *     @param  {File || Blob || String}  params.Body                上传文件对象或字符串，必须\n *     @param  {String}  params.CacheControl                        RFC 2616 中定义的缓存策略，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentDisposition                  RFC 2616 中定义的文件名称，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentEncoding                     RFC 2616 中定义的编码格式，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentLength                       RFC 2616 中定义的 HTTP 请求内容长度（字节），必须\n *     @param  {String}  params.ContentType                         RFC 2616 中定义的内容类型（MIME），将作为 Object 元数据保存，非必须\n *     @param  {String}  params.Expect                              当使用 Expect: 100-continue 时，在收到服务端确认后，才会发送请求内容，非必须\n *     @param  {String}  params.Expires                             RFC 2616 中定义的过期时间，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ACL                                 允许用户自定义文件权限，有效值：private | public-read，非必须\n *     @param  {String}  params.GrantRead                           赋予被授权者读取对象的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantReadAcp                        赋予被授权者读取对象的访问控制列表（ACL）的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantWriteAcp                       赋予被授权者写入对象的访问控制列表（ACL）的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantFullControl                    赋予被授权者操作对象的所有权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.StorageClass                        设置对象的存储级别，枚举值：STANDARD、STANDARD_IA、ARCHIVE，默认值：STANDARD，非必须\n *     @param  {String}  params.x-cos-meta-*                        允许用户自定义的头部信息，将作为对象的元数据保存。大小限制2KB，非必须\n *     @param  {String}  params.ContentSha1                         RFC 3174 中定义的 160-bit 内容 SHA-1 算法校验，非必须\n *     @param  {String}  params.ServerSideEncryption                支持按照指定的加密算法进行服务端数据加密，格式 x-cos-server-side-encryption: \"AES256\"，非必须\n *     @param  {Function}  params.onProgress                        上传进度回调函数\n * @param  {Function}  callback                                     回调函数，必须\n * @return  {Object}  err                                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                          为对应的 object 数据\n *     @return  {String}  data.ETag                                 为对应上传文件的 ETag 值\n */\nfunction putObject(params, callback) {\n    var self = this;\n    var FileSize = params.ContentLength;\n    var onProgress = util.throttleOnProgress.call(self, FileSize, params.onProgress);\n\n    // 特殊处理 Cache-Control、Content-Type，避免代理更改这两个字段导致写入到 Object 属性里\n    var headers = params.Headers;\n    if (!headers['Cache-Control'] && !headers['cache-control']) headers['Cache-Control'] = '';\n    if (!headers['Content-Type'] && !headers['content-type']) headers['Content-Type'] = params.Body && params.Body.type || '';\n    var needCalcMd5 = params.UploadAddMetaMd5 || self.options.UploadAddMetaMd5 || self.options.UploadCheckContentMd5;\n    util.getBodyMd5(needCalcMd5, params.Body, function (md5) {\n        if (md5) {\n            if (self.options.UploadCheckContentMd5) headers['Content-MD5'] = util.binaryBase64(md5);\n            if (params.UploadAddMetaMd5 || self.options.UploadAddMetaMd5) headers['x-cos-meta-md5'] = md5;\n        }\n        if (params.ContentLength !== undefined) headers['Content-Length'] = params.ContentLength;\n        onProgress(null, true); // 任务状态开始 uploading\n        submitRequest.call(self, {\n            Action: 'name/cos:PutObject',\n            TaskId: params.TaskId,\n            method: 'PUT',\n            Bucket: params.Bucket,\n            Region: params.Region,\n            Key: params.Key,\n            headers: params.Headers,\n            qs: params.Query,\n            body: params.Body,\n            onProgress: onProgress,\n        }, function (err, data) {\n            if (err) {\n                onProgress(null, true);\n                return callback(err);\n            }\n            onProgress({loaded: FileSize, total: FileSize}, true);\n            var url = getUrl({\n                ForcePathStyle: self.options.ForcePathStyle,\n                protocol: self.options.Protocol,\n                domain: self.options.Domain,\n                bucket: params.Bucket,\n                region: !self.options.UseAccelerate ? params.Region : 'accelerate',\n                object: params.Key,\n            });\n            url = url.substr(url.indexOf('://') + 3);\n            data.Location = url;\n            data.ETag = util.attr(data.headers, 'etag', '');\n            callback(null, data);\n        });\n    }, params.onHashProgress);\n}\n\n/**\n * 删除 object\n * @param  {Object}  params                     参数对象，必须\n *     @param  {String}  params.Bucket          Bucket名称，必须\n *     @param  {String}  params.Region          地域名称，必须\n *     @param  {String}  params.Key             object名称，必须\n * @param  {Function}  callback                 回调函数，必须\n * @param  {Object}  err                        请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @param  {Object}  data                       删除操作成功之后返回的数据\n */\nfunction deleteObject(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteObject',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        headers: params.Headers,\n        VersionId: params.VersionId,\n        action: params.Recursive ? 'recursive' : '',\n    }, function (err, data) {\n        if (err) {\n            var statusCode = err.statusCode;\n            if (statusCode && statusCode === 404) {\n                return callback(null, {BucketNotFound: true, statusCode: statusCode,});\n            } else {\n                return callback(err);\n            }\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 object 的 权限列表\n * @param  {Object}  params                         参数对象，必须\n *     @param  {String}  params.Bucket              Bucket名称，必须\n *     @param  {String}  params.Region              地域名称，必须\n *     @param  {String}  params.Key                 object名称，必须\n * @param  {Function}  callback                     回调函数，必须\n * @return  {Object}  err                           请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                          返回的数据\n *     @return  {Object}  data.AccessControlPolicy  权限列表\n */\nfunction getObjectAcl(params, callback) {\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetObjectACL',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        headers: params.Headers,\n        action: 'acl',\n    }, function (err, data) {\n        if (err) return callback(err);\n        var AccessControlPolicy = data.AccessControlPolicy || {};\n        var Owner = AccessControlPolicy.Owner || {};\n        var Grant = AccessControlPolicy.AccessControlList && AccessControlPolicy.AccessControlList.Grant || [];\n        Grant = util.isArray(Grant) ? Grant : [Grant];\n        var result = decodeAcl(AccessControlPolicy);\n        delete result.GrantWrite;\n        if (data.headers && data.headers['x-cos-acl']) {\n            result.ACL = data.headers['x-cos-acl'];\n        }\n        result = util.extend(result, {\n            Owner: Owner,\n            Grants: Grant,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n        callback(null, result);\n    });\n}\n\n/**\n * 设置 object 的 权限列表\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {String}  params.Key     object名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回的数据\n */\nfunction putObjectAcl(params, callback) {\n    var headers = params.Headers;\n\n    var xml = '';\n    if (params['AccessControlPolicy']) {\n        var AccessControlPolicy = util.clone(params['AccessControlPolicy'] || {});\n        var Grants = AccessControlPolicy.Grants || AccessControlPolicy.Grant;\n        Grants = util.isArray(Grants) ? Grants : [Grants];\n        delete AccessControlPolicy.Grant;\n        delete AccessControlPolicy.Grants;\n        AccessControlPolicy.AccessControlList = {Grant: Grants};\n        xml = util.json2xml({AccessControlPolicy: AccessControlPolicy});\n\n        headers['Content-Type'] = 'application/xml';\n        headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n    }\n\n    // Grant Header 去重\n    util.each(headers, function (val, key) {\n        if (key.indexOf('x-cos-grant-') === 0) {\n            headers[key] = uniqGrant(headers[key]);\n        }\n    });\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutObjectACL',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        action: 'acl',\n        headers: headers,\n        body: xml,\n    }, function (err, data) {\n        if (err) return callback(err);\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * Options Object请求实现跨域访问的预请求。即发出一个 OPTIONS 请求给服务器以确认是否可以进行跨域操作。\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {String}  params.Key     object名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data              返回的数据\n */\nfunction optionsObject(params, callback) {\n\n    var headers = params.Headers;\n    headers['Origin'] = params['Origin'];\n    headers['Access-Control-Request-Method'] = params['AccessControlRequestMethod'];\n    headers['Access-Control-Request-Headers'] = params['AccessControlRequestHeaders'];\n\n    submitRequest.call(this, {\n        Action: 'name/cos:OptionsObject',\n        method: 'OPTIONS',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        headers: headers,\n    }, function (err, data) {\n        if (err) {\n            if (err.statusCode && err.statusCode === 403) {\n                return callback(null, {\n                    OptionsForbidden: true,\n                    statusCode: err.statusCode\n                });\n            }\n            return callback(err);\n        }\n\n        var headers = data.headers || {};\n        callback(null, {\n            AccessControlAllowOrigin: headers['access-control-allow-origin'],\n            AccessControlAllowMethods: headers['access-control-allow-methods'],\n            AccessControlAllowHeaders: headers['access-control-allow-headers'],\n            AccessControlExposeHeaders: headers['access-control-expose-headers'],\n            AccessControlMaxAge: headers['access-control-max-age'],\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * @param  {Object}                                     参数列表\n *     @param  {String}  Bucket                         Bucket 名称\n *     @param  {String}  Region                         地域名称\n *     @param  {String}  Key                            文件名称\n *     @param  {String}  CopySource                     源文件URL绝对路径，可以通过versionid子资源指定历史版本\n *     @param  {String}  ACL                            允许用户自定义文件权限。有效值：private，public-read默认值：private。\n *     @param  {String}  GrantRead                      赋予被授权者读的权限，格式 x-cos-grant-read: uin=\" \",uin=\" \"，当需要给子账户授权时，uin=\"RootAcountID/SubAccountID\"，当需要给根账户授权时，uin=\"RootAcountID\"。\n *     @param  {String}  GrantWrite                     赋予被授权者写的权限，格式 x-cos-grant-write: uin=\" \",uin=\" \"，当需要给子账户授权时，uin=\"RootAcountID/SubAccountID\"，当需要给根账户授权时，uin=\"RootAcountID\"。\n *     @param  {String}  GrantFullControl               赋予被授权者读写权限，格式 x-cos-grant-full-control: uin=\" \",uin=\" \"，当需要给子账户授权时，uin=\"RootAcountID/SubAccountID\"，当需要给根账户授权时，uin=\"RootAcountID\"。\n *     @param  {String}  MetadataDirective              是否拷贝元数据，枚举值：Copy, Replaced，默认值Copy。假如标记为Copy，忽略Header中的用户元数据信息直接复制；假如标记为Replaced，按Header信息修改元数据。当目标路径和原路径一致，即用户试图修改元数据时，必须为Replaced\n *     @param  {String}  CopySourceIfModifiedSince      当Object在指定时间后被修改，则执行操作，否则返回412。可与x-cos-copy-source-If-None-Match一起使用，与其他条件联合使用返回冲突。\n *     @param  {String}  CopySourceIfUnmodifiedSince    当Object在指定时间后未被修改，则执行操作，否则返回412。可与x-cos-copy-source-If-Match一起使用，与其他条件联合使用返回冲突。\n *     @param  {String}  CopySourceIfMatch              当Object的ETag和给定一致时，则执行操作，否则返回412。可与x-cos-copy-source-If-Unmodified-Since一起使用，与其他条件联合使用返回冲突。\n *     @param  {String}  CopySourceIfNoneMatch          当Object的ETag和给定不一致时，则执行操作，否则返回412。可与x-cos-copy-source-If-Modified-Since一起使用，与其他条件联合使用返回冲突。\n *     @param  {String}  StorageClass                   存储级别，枚举值：存储级别，枚举值：Standard, Standard_IA，Archive；默认值：Standard\n *     @param  {String}  CacheControl                   指定所有缓存机制在整个请求/响应链中必须服从的指令。\n *     @param  {String}  ContentDisposition             MIME 协议的扩展，MIME 协议指示 MIME 用户代理如何显示附加的文件\n *     @param  {String}  ContentEncoding                HTTP 中用来对「采用何种编码格式传输正文」进行协定的一对头部字段\n *     @param  {String}  ContentLength                  设置响应消息的实体内容的大小，单位为字节\n *     @param  {String}  ContentType                    RFC 2616 中定义的 HTTP 请求内容类型（MIME），例如text/plain\n *     @param  {String}  Expect                         请求的特定的服务器行为\n *     @param  {String}  Expires                        响应过期的日期和时间\n *     @param  {String}  params.ServerSideEncryption   支持按照指定的加密算法进行服务端数据加密，格式 x-cos-server-side-encryption: \"AES256\"，非必须\n *     @param  {String}  ContentLanguage                指定内容语言\n *     @param  {String}  x-cos-meta-*                   允许用户自定义的头部信息，将作为 Object 元数据返回。大小限制2K。\n */\nfunction putObjectCopy(params, callback) {\n\n    // 特殊处理 Cache-Control\n    var self = this;\n    var headers = params.Headers;\n    if (!headers['Cache-Control'] && !headers['cache-control']) headers['Cache-Control'] = '';\n\n    var CopySource = params.CopySource || '';\n    var m = util.getSourceParams.call(this, CopySource);\n    if (!m) {\n        callback(util.error(new Error('CopySource format error')));\n        return;\n    }\n\n    var SourceBucket = m[1];\n    var SourceRegion = m[3];\n    var SourceKey = decodeURIComponent(m[4]);\n\n    submitRequest.call(this, {\n        Scope: [{\n            action: 'name/cos:GetObject',\n            bucket: SourceBucket,\n            region: SourceRegion,\n            prefix: SourceKey,\n        }, {\n            action: 'name/cos:PutObject',\n            bucket: params.Bucket,\n            region: params.Region,\n            prefix: params.Key,\n        }],\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        VersionId: params.VersionId,\n        headers: params.Headers,\n    }, function (err, data) {\n        if (err) return callback(err);\n        var result = util.clone(data.CopyObjectResult || {});\n        var url = getUrl({\n            ForcePathStyle: self.options.ForcePathStyle,\n            protocol: self.options.Protocol,\n            domain: self.options.Domain,\n            bucket: params.Bucket,\n            region: params.Region,\n            object: params.Key,\n            isLocation: true,\n        });\n        util.extend(result, {\n            Location: url,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n        callback(null, result);\n    });\n}\n\nfunction uploadPartCopy(params, callback) {\n\n    var CopySource = params.CopySource || '';\n    var m = util.getSourceParams.call(this, CopySource);\n    if (!m) {\n        callback(util.error(new Error('CopySource format error')));\n        return;\n    }\n\n    var SourceBucket = m[1];\n    var SourceRegion = m[3];\n    var SourceKey = decodeURIComponent(m[4]);\n\n    submitRequest.call(this, {\n        Scope: [{\n            action: 'name/cos:GetObject',\n            bucket: SourceBucket,\n            region: SourceRegion,\n            prefix: SourceKey,\n        }, {\n            action: 'name/cos:PutObject',\n            bucket: params.Bucket,\n            region: params.Region,\n            prefix: params.Key,\n        }],\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        VersionId: params.VersionId,\n        qs: {\n            partNumber: params['PartNumber'],\n            uploadId: params['UploadId'],\n        },\n        headers: params.Headers,\n    }, function (err, data) {\n        if (err) return callback(err);\n        var result = util.clone(data.CopyPartResult || {});\n        util.extend(result, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n        callback(null, result);\n    });\n}\n\nfunction deleteMultipleObject(params, callback) {\n    var Objects = params.Objects || [];\n    var Quiet = params.Quiet;\n    Objects = util.isArray(Objects) ? Objects : [Objects];\n\n    var xml = util.json2xml({Delete: {Object: Objects, Quiet: Quiet || false}});\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    var Scope = util.map(Objects, function (v) {\n        return {\n            action: 'name/cos:DeleteObject',\n            bucket: params.Bucket,\n            region: params.Region,\n            prefix: v.Key,\n        };\n    });\n\n    submitRequest.call(this, {\n        Scope: Scope,\n        method: 'POST',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        body: xml,\n        action: 'delete',\n        headers: headers,\n    }, function (err, data) {\n        if (err) return callback(err);\n        var DeleteResult = data.DeleteResult || {};\n        var Deleted = DeleteResult.Deleted || [];\n        var Errors = DeleteResult.Error || [];\n\n        Deleted = util.isArray(Deleted) ? Deleted : [Deleted];\n        Errors = util.isArray(Errors) ? Errors : [Errors];\n\n        var result = util.clone(DeleteResult);\n        util.extend(result, {\n            Error: Errors,\n            Deleted: Deleted,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n        callback(null, result);\n    });\n}\n\nfunction restoreObject(params, callback) {\n    var headers = params.Headers;\n    if (!params['RestoreRequest']) {\n        callback(util.error(new Error('missing param RestoreRequest')));\n        return;\n    }\n\n    var RestoreRequest = params.RestoreRequest || {};\n    var xml = util.json2xml({RestoreRequest: RestoreRequest});\n\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:RestoreObject',\n        method: 'POST',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        VersionId: params.VersionId,\n        body: xml,\n        action: 'restore',\n        headers: headers,\n    }, callback);\n}\n\n/**\n * 设置 Object 的标签\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Object名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n *     @param  {Array}   params.TagSet  标签设置，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/42998\n * @return  {Object}  data              返回数据\n */\nfunction putObjectTagging(params, callback) {\n\n    var Tagging = params['Tagging'] || {};\n    var Tags = Tagging.TagSet || Tagging.Tags || params['Tags'] || [];\n    Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);\n    var xml = util.json2xml({Tagging: {TagSet: {Tag: Tags}}});\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:PutObjectTagging',\n        method: 'PUT',\n        Bucket: params.Bucket,\n        Key: params.Key,\n        Region: params.Region,\n        body: xml,\n        action: 'tagging',\n        headers: headers,\n        VersionId: params.VersionId,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 获取 Object 的标签设置\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Bucket名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/42998\n * @return  {Object}  data              返回数据\n */\nfunction getObjectTagging(params, callback) {\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetObjectTagging',\n        method: 'GET',\n        Key: params.Key,\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        action: 'tagging',\n        VersionId: params.VersionId,\n    }, function (err, data) {\n        if (err) {\n            if (err.statusCode === 404 && err.error && (err.error === \"Not Found\" || err.error.Code === 'NoSuchTagSet')) {\n                var result = {\n                    Tags: [],\n                    statusCode: err.statusCode,\n                };\n                err.headers && (result.headers = err.headers);\n                callback(null, result);\n            } else {\n                callback(err);\n            }\n            return;\n        }\n        var Tags = [];\n        try {\n            Tags = data.Tagging.TagSet.Tag || [];\n        } catch (e) {\n        }\n        Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);\n        callback(null, {\n            Tags: Tags,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 删除 Object 的 标签设置\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Bucket  Object名称，必须\n *     @param  {String}  params.Region  地域名称，必须\n * @param  {Function}  callback         回调函数，必须\n * @return  {Object}  err               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/42998\n * @return  {Object}  data              返回的数据\n */\nfunction deleteObjectTagging(params, callback) {\n    submitRequest.call(this, {\n        Action: 'name/cos:DeleteObjectTagging',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        headers: params.Headers,\n        action: 'tagging',\n        VersionId: params.VersionId,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 使用 SQL 语句从指定对象（CSV 格式或者 JSON 格式）中检索内容\n * @param  {Object}  params                   参数对象，必须\n *     @param  {String}  params.Bucket        Object名称，必须\n *     @param  {String}  params.Region        地域名称，必须\n *     @param  {Object}  params.SelectRequest 地域名称，必须\n * @param  {Function}  callback               回调函数，必须\n * @return  {Object}  err                     请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/42998\n * @return  {Object}  data                    返回的数据\n */\nfunction selectObjectContent(params, callback) {\n    var SelectType = params['SelectType'];\n    if (!SelectType) return callback(util.error(new Error('missing param SelectType')));\n\n    var SelectRequest = params['SelectRequest'] || {};\n    var xml = util.json2xml({SelectRequest: SelectRequest});\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:GetObject',\n        method: 'POST',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        headers: params.Headers,\n        action: 'select',\n        qs: {\n            'select-type': params['SelectType'],\n        },\n        VersionId: params.VersionId,\n        body: xml,\n        DataType: 'arraybuffer',\n        rawBody: true,\n    }, function (err, data) {\n        if (err && err.statusCode === 204) {\n            return callback(null, {statusCode: err.statusCode});\n        } else if (err) {\n            return callback(err);\n        }\n        var result = util.parseSelectPayload(data.body);\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n            Body: result.body,\n            Payload: result.payload,\n        });\n    });\n}\n\n\n// 分块上传\n\n\n/**\n * 初始化分块上传\n * @param  {Object}  params                                     参数对象，必须\n *     @param  {String}  params.Bucket                          Bucket名称，必须\n *     @param  {String}  params.Region                          地域名称，必须\n *     @param  {String}  params.Key                             object名称，必须\n *     @param  {String}  params.UploadId                        object名称，必须\n *     @param  {String}  params.CacheControl                    RFC 2616 中定义的缓存策略，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentDisposition              RFC 2616 中定义的文件名称，将作为 Object 元数据保存    ，非必须\n *     @param  {String}  params.ContentEncoding                 RFC 2616 中定义的编码格式，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentType                     RFC 2616 中定义的内容类型（MIME），将作为 Object 元数据保存，非必须\n *     @param  {String}  params.Expires                         RFC 2616 中定义的过期时间，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ACL                             允许用户自定义文件权限，非必须\n *     @param  {String}  params.GrantRead                       赋予被授权者读的权限 ，非必须\n *     @param  {String}  params.GrantWrite                      赋予被授权者写的权限 ，非必须\n *     @param  {String}  params.GrantFullControl                赋予被授权者读写权限 ，非必须\n *     @param  {String}  params.StorageClass                    设置Object的存储级别，枚举值：Standard，Standard_IA，Archive，非必须\n *     @param  {String}  params.ServerSideEncryption           支持按照指定的加密算法进行服务端数据加密，格式 x-cos-server-side-encryption: \"AES256\"，非必须\n * @param  {Function}  callback                                 回调函数，必须\n * @return  {Object}  err                                       请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                      返回的数据\n */\nfunction multipartInit(params, callback) {\n\n    var self = this;\n    // 特殊处理 Cache-Control\n    var headers = params.Headers;\n\n    // 特殊处理 Cache-Control、Content-Type\n    if (!headers['Cache-Control'] && !headers['cache-control']) headers['Cache-Control'] = '';\n    if (!headers['Content-Type'] && !headers['content-type']) headers['Content-Type'] = params.Body && params.Body.type || '';\n\n    util.getBodyMd5(params.Body && (params.UploadAddMetaMd5 || self.options.UploadAddMetaMd5), params.Body, function (md5) {\n        if (md5) params.Headers['x-cos-meta-md5'] = md5;\n        submitRequest.call(self, {\n            Action: 'name/cos:InitiateMultipartUpload',\n            method: 'POST',\n            Bucket: params.Bucket,\n            Region: params.Region,\n            Key: params.Key,\n            action: 'uploads',\n            headers: params.Headers,\n            qs: params.Query,\n        }, function (err, data) {\n            if (err) return callback(err);\n            data = util.clone(data || {});\n            if (data && data.InitiateMultipartUploadResult) {\n                return callback(null, util.extend(data.InitiateMultipartUploadResult, {\n                    statusCode: data.statusCode,\n                    headers: data.headers,\n                }));\n            }\n            callback(null, data);\n        });\n    }, params.onHashProgress);\n}\n\n/**\n * 分块上传\n * @param  {Object}  params                                 参数对象，必须\n *     @param  {String}  params.Bucket                      Bucket名称，必须\n *     @param  {String}  params.Region                      地域名称，必须\n *     @param  {String}  params.Key                         object名称，必须\n *     @param  {File || Blob || String}  params.Body        上传文件对象或字符串\n *     @param  {String} params.ContentLength                RFC 2616 中定义的 HTTP 请求内容长度（字节），非必须\n *     @param  {String} params.Expect                       当使用 Expect: 100-continue 时，在收到服务端确认后，才会发送请求内容，非必须\n *     @param  {String} params.ServerSideEncryption         支持按照指定的加密算法进行服务端数据加密，格式 x-cos-server-side-encryption: \"AES256\"，非必须\n *     @param  {String} params.ContentSha1                  RFC 3174 中定义的 160-bit 内容 SHA-1 算法校验值，非必须\n * @param  {Function}  callback                             回调函数，必须\n *     @return  {Object}  err                               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n *     @return  {Object}  data                              返回的数据\n *     @return  {Object}  data.ETag                         返回的文件分块 sha1 值\n */\nfunction multipartUpload(params, callback) {\n\n    var self = this;\n    util.getFileSize('multipartUpload', params, function () {\n        util.getBodyMd5(self.options.UploadCheckContentMd5, params.Body, function (md5) {\n            if (md5) params.Headers['Content-MD5'] = util.binaryBase64(md5);\n            submitRequest.call(self, {\n                Action: 'name/cos:UploadPart',\n                TaskId: params.TaskId,\n                method: 'PUT',\n                Bucket: params.Bucket,\n                Region: params.Region,\n                Key: params.Key,\n                qs: {\n                    partNumber: params['PartNumber'],\n                    uploadId: params['UploadId'],\n                },\n                headers: params.Headers,\n                onProgress: params.onProgress,\n                body: params.Body || null\n            }, function (err, data) {\n                if (err) return callback(err);\n                callback(null, {\n                    ETag: util.attr(data.headers, 'etag', ''),\n                    statusCode: data.statusCode,\n                    headers: data.headers,\n                });\n            });\n        });\n    });\n\n}\n\n/**\n * 完成分块上传\n * @param  {Object}  params                             参数对象，必须\n *     @param  {String}  params.Bucket                  Bucket名称，必须\n *     @param  {String}  params.Region                  地域名称，必须\n *     @param  {String}  params.Key                     object名称，必须\n *     @param  {Array}   params.Parts                   分块信息列表，必须\n *     @param  {String}  params.Parts[i].PartNumber     块编号，必须\n *     @param  {String}  params.Parts[i].ETag           分块的 sha1 校验值\n * @param  {Function}  callback                         回调函数，必须\n * @return  {Object}  err                               请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                              返回的数据\n *     @return  {Object}  data.CompleteMultipartUpload  完成分块上传后的文件信息，包括Location, Bucket, Key 和 ETag\n */\nfunction multipartComplete(params, callback) {\n    var self = this;\n\n    var UploadId = params.UploadId;\n\n    var Parts = params['Parts'];\n\n    for (var i = 0, len = Parts.length; i < len; i++) {\n        if (Parts[i]['ETag'] && Parts[i]['ETag'].indexOf('\"') === 0) {\n            continue;\n        }\n        Parts[i]['ETag'] = '\"' + Parts[i]['ETag'] + '\"';\n    }\n\n    var xml = util.json2xml({CompleteMultipartUpload: {Part: Parts}});\n    // CSP/ceph CompleteMultipartUpload 接口 body 写死了限制 1MB，这里醉倒 10000 片时，xml 字符串去掉空格853KB\n    xml = xml.replace(/\\n\\s*/g, '');\n\n    var headers = params.Headers;\n    headers['Content-Type'] = 'application/xml';\n    headers['Content-MD5'] = util.binaryBase64(util.md5(xml));\n\n    submitRequest.call(this, {\n        Action: 'name/cos:CompleteMultipartUpload',\n        method: 'POST',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        qs: {\n            uploadId: UploadId\n        },\n        body: xml,\n        headers: headers,\n    }, function (err, data) {\n        if (err) return callback(err);\n        var url = getUrl({\n            ForcePathStyle: self.options.ForcePathStyle,\n            protocol: self.options.Protocol,\n            domain: self.options.Domain,\n            bucket: params.Bucket,\n            region: params.Region,\n            object: params.Key,\n            isLocation: true,\n        });\n        var res = data.CompleteMultipartUploadResult || {};\n        if (res.ProcessResults) {\n            if (res && res.ProcessResults) {\n                res.UploadResult = {\n                    OriginalInfo: {\n                        Key: res.Key,\n                        Location: url,\n                        ETag: res.ETag,\n                        ImageInfo: res.ImageInfo,\n                    },\n                    ProcessResults: res.ProcessResults,\n                };\n                delete res.ImageInfo;\n                delete res.ProcessResults;\n            }\n        }\n        var result = util.extend(res, {\n            Location: url,\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n        callback(null, result);\n    });\n}\n\n/**\n * 分块上传任务列表查询\n * @param  {Object}  params                                 参数对象，必须\n *     @param  {String}  params.Bucket                      Bucket名称，必须\n *     @param  {String}  params.Region                      地域名称，必须\n *     @param  {String}  params.Delimiter                   定界符为一个符号，如果有Prefix，则将Prefix到delimiter之间的相同路径归为一类，定义为Common Prefix，然后列出所有Common Prefix。如果没有Prefix，则从路径起点开始，非必须\n *     @param  {String}  params.EncodingType                规定返回值的编码方式，非必须\n *     @param  {String}  params.Prefix                      前缀匹配，用来规定返回的文件前缀地址，非必须\n *     @param  {String}  params.MaxUploads                  单次返回最大的条目数量，默认1000，非必须\n *     @param  {String}  params.KeyMarker                   与upload-id-marker一起使用 </Br>当upload-id-marker未被指定时，ObjectName字母顺序大于key-marker的条目将被列出 </Br>当upload-id-marker被指定时，ObjectName字母顺序大于key-marker的条目被列出，ObjectName字母顺序等于key-marker同时UploadId大于upload-id-marker的条目将被列出，非必须\n *     @param  {String}  params.UploadIdMarker              与key-marker一起使用 </Br>当key-marker未被指定时，upload-id-marker将被忽略 </Br>当key-marker被指定时，ObjectName字母顺序大于key-marker的条目被列出，ObjectName字母顺序等于key-marker同时UploadId大于upload-id-marker的条目将被列出，非必须\n * @param  {Function}  callback                             回调函数，必须\n * @return  {Object}  err                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                  返回的数据\n *     @return  {Object}  data.ListMultipartUploadsResult   分块上传任务信息\n */\nfunction multipartList(params, callback) {\n    var reqParams = {};\n\n    reqParams['delimiter'] = params['Delimiter'];\n    reqParams['encoding-type'] = params['EncodingType'];\n    reqParams['prefix'] = params['Prefix'] || '';\n\n    reqParams['max-uploads'] = params['MaxUploads'];\n\n    reqParams['key-marker'] = params['KeyMarker'];\n    reqParams['upload-id-marker'] = params['UploadIdMarker'];\n\n    reqParams = util.clearKey(reqParams);\n\n    submitRequest.call(this, {\n        Action: 'name/cos:ListMultipartUploads',\n        ResourceKey: reqParams['prefix'],\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        headers: params.Headers,\n        qs: reqParams,\n        action: 'uploads',\n    }, function (err, data) {\n        if (err) return callback(err);\n\n        if (data && data.ListMultipartUploadsResult) {\n            var Upload = data.ListMultipartUploadsResult.Upload || [];\n            Upload = util.isArray(Upload) ? Upload : [Upload];\n            data.ListMultipartUploadsResult.Upload = Upload;\n        }\n        var result = util.clone(data.ListMultipartUploadsResult || {});\n        util.extend(result, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n        callback(null, result);\n    });\n}\n\n/**\n * 上传的分块列表查询\n * @param  {Object}  params                                 参数对象，必须\n *     @param  {String}  params.Bucket                      Bucket名称，必须\n *     @param  {String}  params.Region                      地域名称，必须\n *     @param  {String}  params.Key                         object名称，必须\n *     @param  {String}  params.UploadId                    标示本次分块上传的ID，必须\n *     @param  {String}  params.EncodingType                规定返回值的编码方式，非必须\n *     @param  {String}  params.MaxParts                    单次返回最大的条目数量，默认1000，非必须\n *     @param  {String}  params.PartNumberMarker            默认以UTF-8二进制顺序列出条目，所有列出条目从marker开始，非必须\n * @param  {Function}  callback                             回调函数，必须\n * @return  {Object}  err                                   请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n * @return  {Object}  data                                  返回的数据\n *     @return  {Object}  data.ListMultipartUploadsResult   分块信息\n */\nfunction multipartListPart(params, callback) {\n    var reqParams = {};\n\n    reqParams['uploadId'] = params['UploadId'];\n    reqParams['encoding-type'] = params['EncodingType'];\n    reqParams['max-parts'] = params['MaxParts'];\n    reqParams['part-number-marker'] = params['PartNumberMarker'];\n\n    submitRequest.call(this, {\n        Action: 'name/cos:ListParts',\n        method: 'GET',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        headers: params.Headers,\n        qs: reqParams,\n    }, function (err, data) {\n        if (err) return callback(err);\n        var ListPartsResult = data.ListPartsResult || {};\n        var Part = ListPartsResult.Part || [];\n        Part = util.isArray(Part) ? Part : [Part];\n\n        ListPartsResult.Part = Part;\n        var result = util.clone(ListPartsResult);\n        util.extend(result, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n        callback(null, result);\n    });\n}\n\n/**\n * 抛弃分块上传\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n *     @param  {String}  params.Key         object名称，必须\n *     @param  {String}  params.UploadId    标示本次分块上传的ID，必须\n * @param  {Function}  callback             回调函数，必须\n *     @return  {Object}    err             请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n *     @return  {Object}    data            返回的数据\n */\nfunction multipartAbort(params, callback) {\n    var reqParams = {};\n\n    reqParams['uploadId'] = params['UploadId'];\n    submitRequest.call(this, {\n        Action: 'name/cos:AbortMultipartUpload',\n        method: 'DELETE',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        headers: params.Headers,\n        qs: reqParams,\n    }, function (err, data) {\n        if (err) return callback(err);\n        callback(null, {\n            statusCode: data.statusCode,\n            headers: data.headers,\n        });\n    });\n}\n\n/**\n * 抛弃分块上传\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n *     @param  {String}  params.Key         object名称，必须\n *     @param  {String}  params.UploadId    标示本次分块上传的ID，必须\n * @param  {Function}  callback             回调函数，必须\n *     @return  {Object}    err             请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n *     @return  {Object}    data            返回的数据\n */\nfunction request(params, callback) {\n    submitRequest.call(this, {\n        method: params.Method,\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Key: params.Key,\n        action: params.Action,\n        headers: params.Headers,\n        qs: params.Query,\n        body: params.Body,\n        Url: params.Url,\n        rawBody: params.RawBody,\n    }, function (err, data) {\n        if (err) return callback(err);\n        if (data && data.body) {\n            data.Body = data.body;\n            delete data.body;\n        }\n        callback(err, data);\n    });\n}\n\n/**\n * 追加上传\n * @param  {Object}  params                                         参数对象，必须\n *     @param  {String}  params.Bucket                              Bucket名称，必须\n *     @param  {String}  params.Region                              地域名称，必须\n *     @param  {String}  params.Key                                 object名称，必须\n *     @param  {File || Blob || String}  params.Body                上传文件对象或字符串\n *     @param  {Number}  params.Position                            追加操作的起始点，单位为字节，必须\n *     @param  {String}  params.CacheControl                        RFC 2616 中定义的缓存策略，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentDisposition                  RFC 2616 中定义的文件名称，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentEncoding                     RFC 2616 中定义的编码格式，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ContentLength                       RFC 2616 中定义的 HTTP 请求内容长度（字节），必须\n *     @param  {String}  params.ContentType                         RFC 2616 中定义的内容类型（MIME），将作为 Object 元数据保存，非必须\n *     @param  {String}  params.Expect                              当使用 Expect: 100-continue 时，在收到服务端确认后，才会发送请求内容，非必须\n *     @param  {String}  params.Expires                             RFC 2616 中定义的过期时间，将作为 Object 元数据保存，非必须\n *     @param  {String}  params.ACL                                 允许用户自定义文件权限，有效值：private | public-read，非必须\n *     @param  {String}  params.GrantRead                           赋予被授权者读取对象的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantReadAcp                        赋予被授权者读取对象的访问控制列表（ACL）的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantWriteAcp                       赋予被授权者写入对象的访问控制列表（ACL）的权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.GrantFullControl                    赋予被授权者操作对象的所有权限，格式：id=\"[OwnerUin]\"，可使用半角逗号（,）分隔多组被授权者，非必须\n *     @param  {String}  params.StorageClass                        设置对象的存储级别，枚举值：STANDARD、STANDARD_IA、ARCHIVE，默认值：STANDARD，非必须\n *     @param  {String}  params.x-cos-meta-*                        允许用户自定义的头部信息，将作为对象的元数据保存。大小限制2KB，非必须\n *     @param  {String}  params.ContentSha1                         RFC 3174 中定义的 160-bit 内容 SHA-1 算法校验，非必须\n *     @param  {String}  params.ServerSideEncryption                支持按照指定的加密算法进行服务端数据加密，格式 x-cos-server-side-encryption: \"AES256\"，非必须\n * @param  {Function}  callback                                     回调函数，必须\n *     @return  {Object}    err                                     请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n *     @return  {Object}    data                                    返回的数据\n */\nfunction appendObject(params, callback) {\n    // 特殊处理 Cache-Control、Content-Type，避免代理更改这两个字段导致写入到 Object 属性里\n    var headers = params.Headers;\n    if (!headers['Cache-Control'] && !headers['cache-control']) headers['Cache-Control'] = '';\n    if (!headers['Content-Type'] && !headers['content-type']) headers['Content-Type'] = params.Body && params.Body.type || '';\n    submitRequest.call(this, {\n        Action: 'name/cos:AppendObject',\n        method: 'POST',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        action: 'append',\n        Key: params.Key,\n        body: params.Body,\n        qs: {\n          position: params.Position\n        },\n        headers: params.Headers,\n    }, function (err, data) {\n        if (err) return callback(err);\n        callback(null, data);\n    });\n}\n\n/**\n * 获取签名\n * @param  {Object}  params             参数对象，必须\n *     @param  {String}  params.Method  请求方法，必须\n *     @param  {String}  params.Key     object名称，必须\n *     @param  {String}  params.Expires 名超时时间，单位秒，可选\n * @return  {String}  data              返回签名字符串\n */\nfunction getAuth(params) {\n    var self = this;\n    return util.getAuth({\n        SecretId: params.SecretId || this.options.SecretId || '',\n        SecretKey: params.SecretKey || this.options.SecretKey || '',\n        Bucket: params.Bucket,\n        Region: params.Region,\n        Method: params.Method,\n        Key: params.Key,\n        Query: params.Query,\n        Headers: params.Headers,\n        Expires: params.Expires,\n        UseRawKey: self.options.UseRawKey,\n        SystemClockOffset: self.options.SystemClockOffset,\n    });\n}\n\n/**\n * 获取文件下载链接\n * @param  {Object}  params                 参数对象，必须\n *     @param  {String}  params.Bucket      Bucket名称，必须\n *     @param  {String}  params.Region      地域名称，必须\n *     @param  {String}  params.Key         object名称，必须\n *     @param  {String}  params.Method      请求的方法，可选\n *     @param  {String}  params.Expires     签名超时时间，单位秒，可选\n * @param  {Function}  callback             回调函数，必须\n *     @return  {Object}    err             请求失败的错误，如果请求成功，则为空。https://cloud.tencent.com/document/product/436/7730\n *     @return  {Object}    data            返回的数据\n */\nfunction getObjectUrl(params, callback) {\n    var self = this;\n    var url = getUrl({\n        ForcePathStyle: self.options.ForcePathStyle,\n        protocol: params.Protocol || self.options.Protocol,\n        domain: params.Domain || self.options.Domain,\n        bucket: params.Bucket,\n        region: params.Region,\n        object: params.Key,\n    });\n\n    var queryParamsStr = '';\n    if(params.Query){\n      queryParamsStr += util.obj2str(params.Query);\n    }\n    if(params.QueryString){\n      queryParamsStr += (queryParamsStr ? '&' : '') + params.QueryString;\n    }\n\n    var syncUrl = url;\n    if (params.Sign !== undefined && !params.Sign) {\n        queryParamsStr && (syncUrl += '?' + queryParamsStr);\n        callback(null, {Url: syncUrl});\n        return syncUrl;\n    }\n    \n    // 签名加上 Host，避免跨桶访问\n    var SignHost = getSignHost.call(this, {Bucket: params.Bucket, Region: params.Region, Url: url});\n    var AuthData = getAuthorizationAsync.call(this, {\n        Action: ((params.Method || '').toUpperCase() === 'PUT' ? 'name/cos:PutObject' : 'name/cos:GetObject'),\n        Bucket: params.Bucket || '',\n        Region: params.Region || '',\n        Method: params.Method || 'get',\n        Key: params.Key,\n        Expires: params.Expires,\n        Headers: params.Headers,\n        Query: params.Query,\n        SignHost: SignHost,\n    }, function (err, AuthData) {\n        if (!callback) return;\n        if (err) {\n            callback(err);\n            return;\n        }\n\n        // 兼容万象url qUrlParamList需要再encode一次\n        var replaceUrlParamList = function(url) {\n            var urlParams = url.match(/q-url-param-list.*?(?=&)/g)[0];\n            var encodedParams = 'q-url-param-list=' + encodeURIComponent(urlParams.replace(/q-url-param-list=/, '')).toLowerCase();\n            var reg = new RegExp(urlParams, 'g');\n            var replacedUrl = url.replace(reg, encodedParams);\n            return replacedUrl;\n        }\n\n        var signUrl = url;\n        signUrl += '?' + (AuthData.Authorization.indexOf('q-signature') > -1 ?\n          replaceUrlParamList(AuthData.Authorization) : 'sign=' + encodeURIComponent(AuthData.Authorization));\n        AuthData.SecurityToken && (signUrl += '&x-cos-security-token=' + AuthData.SecurityToken);\n        AuthData.ClientIP && (signUrl += '&clientIP=' + AuthData.ClientIP);\n        AuthData.ClientUA && (signUrl += '&clientUA=' + AuthData.ClientUA);\n        AuthData.Token && (signUrl += '&token=' + AuthData.Token);\n        queryParamsStr && (signUrl += '&' + queryParamsStr);\n        setTimeout(function () {\n            callback(null, {Url: signUrl});\n        });\n    });\n    if (AuthData) {\n        syncUrl += '?' + AuthData.Authorization +\n            (AuthData.SecurityToken ? '&x-cos-security-token=' + AuthData.SecurityToken : '');\n        queryParamsStr && (syncUrl += '&' + queryParamsStr);\n    } else{\n        queryParamsStr && (syncUrl += '?' + queryParamsStr);\n    }\n    return syncUrl;\n}\n\n/**\n * 私有方法\n */\nfunction decodeAcl(AccessControlPolicy) {\n    var result = {\n        GrantFullControl: [],\n        GrantWrite: [],\n        GrantRead: [],\n        GrantReadAcp: [],\n        GrantWriteAcp: [],\n        ACL: '',\n    };\n    var GrantMap = {\n        'FULL_CONTROL': 'GrantFullControl',\n        'WRITE': 'GrantWrite',\n        'READ': 'GrantRead',\n        'READ_ACP': 'GrantReadAcp',\n        'WRITE_ACP': 'GrantWriteAcp',\n    };\n    var AccessControlList = AccessControlPolicy && AccessControlPolicy.AccessControlList || {};\n    var Grant = AccessControlList.Grant;\n    if (Grant) {\n        Grant = util.isArray(Grant) ? Grant : [Grant];\n    }\n    var PublicAcl = {READ: 0, WRITE: 0, FULL_CONTROL: 0};\n    Grant && Grant.length && util.each(Grant, function (item) {\n        if (item.Grantee.ID === 'qcs::cam::anyone:anyone' || item.Grantee.URI === 'http://cam.qcloud.com/groups/global/AllUsers') {\n            PublicAcl[item.Permission] = 1;\n        } else if (item.Grantee.ID !== AccessControlPolicy.Owner.ID) {\n            result[GrantMap[item.Permission]].push('id=\"' + item.Grantee.ID + '\"');\n        }\n    });\n    if (PublicAcl.FULL_CONTROL || (PublicAcl.WRITE && PublicAcl.READ)) {\n        result.ACL = 'public-read-write';\n    } else if (PublicAcl.READ) {\n        result.ACL = 'public-read';\n    } else {\n        result.ACL = 'private';\n    }\n    util.each(GrantMap, function (item) {\n        result[item] = uniqGrant(result[item].join(','));\n    });\n    return result;\n}\n\n// Grant 去重\nfunction uniqGrant(str) {\n    var arr = str.split(',');\n    var exist = {};\n    var i, item;\n    for (i = 0; i < arr.length; ) {\n        item = arr[i].trim();\n        if (exist[item]) {\n            arr.splice(i, 1);\n        } else {\n            exist[item] = true;\n            arr[i] = item;\n            i++;\n        }\n    }\n    return arr.join(',');\n}\n\n// 生成操作 url\nfunction getUrl(params) {\n    var region = params.region || '';\n    var longBucket = params.bucket || '';\n    var shortBucket = longBucket.substr(0, longBucket.lastIndexOf('-'));\n    var appId = longBucket.substr(longBucket.lastIndexOf('-') + 1);\n    var domain = params.domain;\n    var object = params.object;\n    if (typeof domain === 'function') {\n        domain = domain({Bucket: longBucket, Region: region});\n    }\n    var protocol = params.protocol || (util.isBrowser && location.protocol === 'http:' ? 'http:' : 'https:');\n    if (!domain) {\n        if (['cn-south', 'cn-south-2', 'cn-north', 'cn-east', 'cn-southwest', 'sg'].indexOf(region) > -1) {\n            domain = '{Region}.myqcloud.com';\n        } else {\n            domain = 'cos.{Region}.myqcloud.com';\n        }\n        if (!params.ForcePathStyle) {\n            domain = '{Bucket}.' + domain;\n        }\n    }\n    domain = domain.replace(/\\{\\{AppId\\}\\}/ig, appId)\n        .replace(/\\{\\{Bucket\\}\\}/ig, shortBucket)\n        .replace(/\\{\\{Region\\}\\}/ig, region)\n        .replace(/\\{\\{.*?\\}\\}/ig, '');\n    domain = domain.replace(/\\{AppId\\}/ig, appId)\n        .replace(/\\{BucketName\\}/ig, shortBucket)\n        .replace(/\\{Bucket\\}/ig, longBucket)\n        .replace(/\\{Region\\}/ig, region)\n        .replace(/\\{.*?\\}/ig, '');\n    if (!/^[a-zA-Z]+:\\/\\//.test(domain)) {\n        domain = protocol + '//' + domain;\n    }\n\n    // 去掉域名最后的斜杆\n    if (domain.slice(-1) === '/') {\n        domain = domain.slice(0, -1);\n    }\n    var url = domain;\n\n    if (params.ForcePathStyle) {\n        url += '/' + longBucket;\n    }\n    url += '/';\n    if (object) {\n        url += util.camSafeUrlEncode(object).replace(/%2F/g, '/');\n    }\n\n    if (params.isLocation) {\n        url = url.replace(/^https?:\\/\\//, '');\n    }\n    return url;\n}\n\nvar getSignHost = function (opt) {\n    if (!opt.Bucket || !opt.Bucket) return '';\n    var url = opt.Url || getUrl({\n        ForcePathStyle: this.options.ForcePathStyle,\n        protocol: this.options.Protocol,\n        domain: this.options.Domain,\n        bucket: opt.Bucket,\n        region: opt.Region,\n    });\n    var urlHost = url.replace(/^https?:\\/\\/([^/]+)(\\/.*)?$/, '$1');\n    var standardHostReg = new RegExp('^([a-z\\\\d-]+-\\\\d+\\\\.)?(cos|cosv6|ci|pic)\\\\.([a-z\\\\d-]+)\\\\.myqcloud\\\\.com$');\n    if (standardHostReg.test(urlHost)) return urlHost;\n    return '';\n}\n\n\n// 异步获取签名\nfunction getAuthorizationAsync(params, callback) {\n\n    var headers = util.clone(params.Headers);\n    var headerHost = '';\n    util.each(headers, function (v, k) {\n        (v === '' || ['content-type', 'cache-control', 'expires'].indexOf(k.toLowerCase()) > -1) && delete headers[k];\n        if (k.toLowerCase() === 'host') headerHost = v;\n    });\n\n    // Host 加入签名计算\n    if (!headerHost && params.SignHost) headers.Host = params.SignHost;\n\n    // 获取凭证的回调，避免用户 callback 多次\n    var cbDone = false;\n    var cb = function (err, AuthData) {\n        if (cbDone) return;\n        cbDone = true;\n        if (AuthData && AuthData.XCosSecurityToken && !AuthData.SecurityToken) {\n            AuthData = util.clone(AuthData);\n            AuthData.SecurityToken = AuthData.XCosSecurityToken;\n            delete AuthData.XCosSecurityToken;\n        }\n        callback && callback(err, AuthData);\n    };\n\n    var self = this;\n    var Bucket = params.Bucket || '';\n    var Region = params.Region || '';\n\n    // PathName\n    var KeyName = params.Key || '';\n    if (self.options.ForcePathStyle && Bucket) {\n        KeyName = Bucket + '/' + KeyName;\n    }\n    var Pathname = '/' + KeyName;\n\n    // Action、ResourceKey\n    var StsData = {};\n    var Scope = params.Scope;\n    if (!Scope) {\n        var Action = params.Action || '';\n        var ResourceKey = params.ResourceKey || params.Key || '';\n        Scope = params.Scope || [{\n            action: Action,\n            bucket: Bucket,\n            region: Region,\n            prefix: ResourceKey,\n        }];\n    }\n    var ScopeKey  = util.md5(JSON.stringify(Scope));\n\n    // STS\n    self._StsCache = self._StsCache ||[];\n    (function () {\n        var i, AuthData;\n        for (i = self._StsCache.length - 1; i >= 0; i--) {\n            AuthData = self._StsCache[i];\n            var compareTime = Math.round(util.getSkewTime(self.options.SystemClockOffset) / 1000) + 30;\n            if (AuthData.StartTime && compareTime < AuthData.StartTime || compareTime >= AuthData.ExpiredTime) {\n                self._StsCache.splice(i, 1);\n                continue;\n            }\n            if (!AuthData.ScopeLimit || AuthData.ScopeLimit && AuthData.ScopeKey === ScopeKey) {\n                StsData = AuthData;\n                break;\n            }\n        }\n    })();\n\n    var calcAuthByTmpKey = function () {\n        var KeyTime = StsData.StartTime && StsData.ExpiredTime ? StsData.StartTime + ';' + StsData.ExpiredTime : '';\n        var Authorization = util.getAuth({\n            SecretId: StsData.TmpSecretId,\n            SecretKey: StsData.TmpSecretKey,\n            Method: params.Method,\n            Pathname: Pathname,\n            Query: params.Query,\n            Headers: headers,\n            Expires: params.Expires,\n            UseRawKey: self.options.UseRawKey,\n            SystemClockOffset: self.options.SystemClockOffset,\n            KeyTime: KeyTime\n        });\n        var AuthData = {\n            Authorization: Authorization,\n            SecurityToken: StsData.SecurityToken || StsData.XCosSecurityToken || '',\n            Token: StsData.Token || '',\n            ClientIP: StsData.ClientIP || '',\n            ClientUA: StsData.ClientUA || '',\n        };\n        cb(null, AuthData);\n    };\n    var checkAuthError = function (AuthData) {\n        if (AuthData.Authorization) {\n            // 检查签名格式\n            var formatAllow = false;\n            var auth = AuthData.Authorization;\n            if (auth) {\n                if (auth.indexOf(' ') > -1) {\n                    formatAllow = false;\n                } else if (auth.indexOf('q-sign-algorithm=') > -1 &&\n                    auth.indexOf('q-ak=') > -1 &&\n                    auth.indexOf('q-sign-time=') > -1 &&\n                    auth.indexOf('q-key-time=') > -1 &&\n                    auth.indexOf('q-url-param-list=') > -1) {\n                    formatAllow = true;\n                } else {\n                    try {\n                        auth = atob(auth);\n                        if (auth.indexOf('a=') > -1 &&\n                            auth.indexOf('k=') > -1 &&\n                            auth.indexOf('t=') > -1 &&\n                            auth.indexOf('r=') > -1 &&\n                            auth.indexOf('b=') > -1) {\n                            formatAllow = true;\n                        }\n                    } catch (e) {}\n                }\n            }\n            if (!formatAllow) return util.error(new Error('getAuthorization callback params format error'));\n        } else {\n            if (!AuthData.TmpSecretId) return util.error(new Error('getAuthorization callback params missing \"TmpSecretId\"'));\n            if (!AuthData.TmpSecretKey) return util.error(new Error('getAuthorization callback params missing \"TmpSecretKey\"'));\n            if (!AuthData.SecurityToken && !AuthData.XCosSecurityToken) return util.error(new Error('getAuthorization callback params missing \"SecurityToken\"'));\n            if (!AuthData.ExpiredTime) return util.error(new Error('getAuthorization callback params missing \"ExpiredTime\"'));\n            if (AuthData.ExpiredTime && AuthData.ExpiredTime.toString().length !== 10) return util.error(new Error('getAuthorization callback params \"ExpiredTime\" should be 10 digits'));\n            if (AuthData.StartTime && AuthData.StartTime.toString().length !== 10) return util.error(new Error('getAuthorization callback params \"StartTime\" should be 10 StartTime'));\n        }\n        return false;\n    };\n\n    // 先判断是否有临时密钥\n    if (StsData.ExpiredTime && StsData.ExpiredTime - (util.getSkewTime(self.options.SystemClockOffset) / 1000) > 60) { // 如果缓存的临时密钥有效，并还有超过60秒有效期就直接使用\n        calcAuthByTmpKey();\n    } else if (self.options.getAuthorization) { // 外部计算签名或获取临时密钥\n        self.options.getAuthorization.call(self, {\n            Bucket: Bucket,\n            Region: Region,\n            Method: params.Method,\n            Key: KeyName,\n            Pathname: Pathname,\n            Query: params.Query,\n            Headers: headers,\n            Scope: Scope,\n            SystemClockOffset: self.options.SystemClockOffset,\n        }, function (AuthData) {\n            if (typeof AuthData === 'string') AuthData = {Authorization: AuthData};\n            var AuthError = checkAuthError(AuthData);\n            if (AuthError) return cb(AuthError);\n            if (AuthData.Authorization) {\n                cb(null, AuthData);\n            } else {\n                StsData = AuthData || {};\n                StsData.Scope = Scope;\n                StsData.ScopeKey = ScopeKey;\n                self._StsCache.push(StsData);\n                calcAuthByTmpKey();\n            }\n        });\n    } else if (self.options.getSTS) { // 外部获取临时密钥\n        self.options.getSTS.call(self, {\n            Bucket: Bucket,\n            Region: Region,\n        }, function (data) {\n            StsData = data || {};\n            StsData.Scope = Scope;\n            StsData.ScopeKey = ScopeKey;\n            if (!StsData.TmpSecretId) StsData.TmpSecretId = StsData.SecretId;\n            if (!StsData.TmpSecretKey) StsData.TmpSecretKey = StsData.SecretKey;\n            var AuthError = checkAuthError(StsData);\n            if (AuthError) return cb(AuthError);\n            self._StsCache.push(StsData);\n            calcAuthByTmpKey();\n        });\n    } else { // 内部计算获取签名\n        return (function () {\n            var Authorization = util.getAuth({\n                SecretId: params.SecretId || self.options.SecretId,\n                SecretKey: params.SecretKey || self.options.SecretKey,\n                Method: params.Method,\n                Pathname: Pathname,\n                Query: params.Query,\n                Headers: headers,\n                Expires: params.Expires,\n                UseRawKey: self.options.UseRawKey,\n                SystemClockOffset: self.options.SystemClockOffset,\n            });\n            var AuthData = {\n                Authorization: Authorization,\n                SecurityToken: self.options.SecurityToken || self.options.XCosSecurityToken,\n            };\n            cb(null, AuthData);\n            return AuthData;\n        })();\n    }\n    return '';\n}\n\n// 调整时间偏差\nfunction allowRetry(err) {\n    var allowRetry = false;\n    var isTimeError = false;\n    var serverDate = (err.headers && (err.headers.date || err.headers.Date)) || (err.error && err.error.ServerTime);\n    try {\n        var errorCode = err.error.Code;\n        var errorMessage = err.error.Message;\n        if (errorCode === 'RequestTimeTooSkewed' ||\n            (errorCode === 'AccessDenied' && errorMessage === 'Request has expired')) {\n            isTimeError = true;\n        }\n    } catch (e) {\n    }\n    if (err) {\n        if (isTimeError && serverDate) {\n            var serverTime = Date.parse(serverDate);\n            if (this.options.CorrectClockSkew && Math.abs(util.getSkewTime(this.options.SystemClockOffset) - serverTime) >= 30000) {\n                console.error('error: Local time is too skewed.');\n                this.options.SystemClockOffset = serverTime - Date.now();\n                allowRetry = true;\n            }\n        } else if (Math.floor(err.statusCode / 100) === 5) {\n            allowRetry = true;\n        }\n    }\n    return allowRetry;\n}\n\n// 获取签名并发起请求\nfunction submitRequest(params, callback) {\n    var self = this;\n\n    // 处理 headers\n    !params.headers && (params.headers = {});\n\n    // 处理 query\n    !params.qs && (params.qs = {});\n    params.VersionId && (params.qs.versionId = params.VersionId);\n    params.qs = util.clearKey(params.qs);\n\n    // 清理 undefined 和 null 字段\n    params.headers && (params.headers = util.clearKey(params.headers));\n    params.qs && (params.qs = util.clearKey(params.qs));\n\n    var Query = util.clone(params.qs);\n    params.action && (Query[params.action] = '');\n\n    var paramsUrl = params.url || params.Url;\n    var SignHost = params.SignHost || getSignHost.call(this, {Bucket: params.Bucket, Region: params.Region, Url: paramsUrl});\n    var next = function (tryTimes) {\n        var oldClockOffset = self.options.SystemClockOffset;\n        getAuthorizationAsync.call(self, {\n            Bucket: params.Bucket || '',\n            Region: params.Region || '',\n            Method: params.method,\n            Key: params.Key,\n            Query: Query,\n            Headers: params.headers,\n            SignHost: SignHost,\n            Action: params.Action,\n            ResourceKey: params.ResourceKey,\n            Scope: params.Scope,\n        }, function (err, AuthData) {\n            if (err) {\n                callback(err);\n                return;\n            }\n            params.AuthData = AuthData;\n            _submitRequest.call(self, params, function (err, data) {\n                if (err && tryTimes < 2 && (oldClockOffset !== self.options.SystemClockOffset || allowRetry.call(self, err))) {\n                    if (params.headers) {\n                        delete params.headers.Authorization;\n                        delete params.headers['token'];\n                        delete params.headers['clientIP'];\n                        delete params.headers['clientUA'];\n                        params.headers['x-cos-security-token'] && (delete params.headers['x-cos-security-token']);\n                        params.headers['x-ci-security-token'] && (delete params.headers['x-ci-security-token']);\n                    }\n                    next(tryTimes + 1);\n                } else {\n                    callback(err, data);\n                }\n            });\n        });\n    };\n    next(1);\n\n}\n\n// 发起请求\nfunction _submitRequest(params, callback) {\n    var self = this;\n    var TaskId = params.TaskId;\n    if (TaskId && !self._isRunningTask(TaskId)) return;\n\n    var bucket = params.Bucket;\n    var region = params.Region;\n    var object = params.Key;\n    var method = params.method || 'GET';\n    var url = params.Url || params.url;\n    var body = params.body;\n    var rawBody = params.rawBody;\n\n    // url\n    if (self.options.UseAccelerate) {\n        region = 'accelerate';\n    }\n    url = url || getUrl({\n        ForcePathStyle: self.options.ForcePathStyle,\n        protocol: self.options.Protocol,\n        domain: self.options.Domain,\n        bucket: bucket,\n        region: region,\n        object: object,\n    });\n    if (params.action) {\n        url = url + '?' + params.action;\n    }\n    if (params.qsStr) {\n        if(url.indexOf('?') > -1){\n          url = url + '&' + params.qsStr;\n        }else{\n          url = url + '?' + params.qsStr;\n        }\n    }\n\n    var opt = {\n        method: method,\n        url: url,\n        headers: params.headers,\n        qs: params.qs,\n        body: body,\n    };\n\n    // 兼容ci接口\n    var token = 'x-cos-security-token';\n    if (util.isCIHost(url)) {\n        token = 'x-ci-security-token';\n    }\n\n    // 获取签名\n    opt.headers.Authorization = params.AuthData.Authorization;\n    params.AuthData.Token && (opt.headers['token'] = params.AuthData.Token);\n    params.AuthData.ClientIP && (opt.headers['clientIP'] = params.AuthData.ClientIP);\n    params.AuthData.ClientUA && (opt.headers['clientUA'] = params.AuthData.ClientUA);\n    params.AuthData.SecurityToken && (opt.headers[token] = params.AuthData.SecurityToken);\n\n    // 清理 undefined 和 null 字段\n    opt.headers && (opt.headers = util.clearKey(opt.headers));\n    opt = util.clearKey(opt);\n\n    // progress\n    if (params.onProgress && typeof params.onProgress === 'function') {\n        var contentLength = body && (body.size || body.length) || 0;\n        opt.onProgress = function (e) {\n            if (TaskId && !self._isRunningTask(TaskId)) return;\n            var loaded = e ? e.loaded : 0;\n            params.onProgress({loaded: loaded, total: contentLength});\n        };\n    }\n    if (params.onDownloadProgress) {\n        opt.onDownloadProgress = params.onDownloadProgress;\n    }\n    if (params.DataType) {\n        opt.dataType = params.DataType;\n    }\n    if (this.options.Timeout) {\n        opt.timeout = this.options.Timeout;\n    }\n\n    self.options.ForcePathStyle && (opt.pathStyle = self.options.ForcePathStyle);\n    self.emit('before-send', opt);\n    var sender = (self.options.Request || REQUEST)(opt, function (r) {\n        if (r.error === 'abort') return;\n\n        var receive = {\n            options: opt,\n            error: err,\n            statusCode: response && response.statusCode || 0,\n            headers: response && response.headers || {},\n            body: body,\n        };\n        self.emit('after-receive', receive);\n        err = receive.error;\n        body = receive.body;\n        response = {\n            statusCode: receive.statusCode,\n            headers: receive.headers,\n        };\n\n        // 抛出事件，允许修改返回值的 error、statusCode、statusMessage、body\n        self.emit('after-receive', r);\n        var response = {statusCode: r.statusCode, statusMessage: r.statusMessage, headers: r.headers};\n        var err = r.error;\n        var body = r.body;\n\n        // 返回内容添加 状态码 和 headers\n        var hasReturned;\n        var cb = function (err, data) {\n            TaskId && self.off('inner-kill-task', killTask);\n            if (hasReturned) return;\n            hasReturned = true;\n            var attrs = {};\n            response && response.statusCode && (attrs.statusCode = response.statusCode);\n            response && response.headers && (attrs.headers = response.headers);\n\n            if (err) {\n                err = util.extend(err || {}, attrs)\n                callback(err, null);\n            } else {\n                data = util.extend(data || {}, attrs);\n                callback(null, data);\n            }\n            sender = null;\n        };\n\n        // 请求错误，发生网络错误\n        if (err) return cb(util.error(err));\n\n        // 请求返回码不为 200\n        var statusCode = response.statusCode;\n        var statusSuccess = Math.floor(statusCode / 100) === 2; // 200 202 204 206\n\n        // 不对 body 进行转换，body 直接挂载返回\n        if (rawBody && statusSuccess) return cb(null, {body: body});\n\n        // 解析 xml body\n        var json;\n        try {\n            json = body && body.indexOf('<') > -1 && body.indexOf('>') > -1 && util.xml2json(body) || {};\n        } catch (e) {\n            json = {};\n        }\n\n        // 处理返回值\n        var xmlError = json && json.Error;\n        if (statusSuccess) { // 正确返回，状态码 2xx 时，body 不会有 Error\n            cb(null, json);\n        } else if (xmlError) { // 正常返回了 xml body，且有 Error 节点\n            cb(util.error(new Error(xmlError.Message), {code: xmlError.Code, error: xmlError}));\n        } else if (statusCode) { // 有错误的状态码\n            cb(util.error(new Error(response.statusMessage), {code: '' + statusCode}));\n        } else if (statusCode) { // 无状态码，或者获取不到状态码\n            cb(util.error(new Error('statusCode error')));\n        }\n    });\n\n    // kill task\n    var killTask = function (data) {\n        if (data.TaskId === TaskId) {\n            sender && sender.abort && sender.abort();\n            self.off('inner-kill-task', killTask);\n        }\n    };\n    TaskId && self.on('inner-kill-task', killTask);\n\n}\n\n\nvar API_MAP = {\n    // Bucket 相关方法\n    getService: getService,                      // Bucket\n    putBucket: putBucket,\n    headBucket: headBucket,                      // Bucket\n    getBucket: getBucket,\n    deleteBucket: deleteBucket,\n    putBucketAcl: putBucketAcl,                  // BucketACL\n    getBucketAcl: getBucketAcl,\n    putBucketCors: putBucketCors,                // BucketCors\n    getBucketCors: getBucketCors,\n    deleteBucketCors: deleteBucketCors,\n    getBucketLocation: getBucketLocation,        // BucketLocation\n    getBucketPolicy: getBucketPolicy,            // BucketPolicy\n    putBucketPolicy: putBucketPolicy,\n    deleteBucketPolicy: deleteBucketPolicy,\n    putBucketTagging: putBucketTagging,          // BucketTagging\n    getBucketTagging: getBucketTagging,\n    deleteBucketTagging: deleteBucketTagging,\n    putBucketLifecycle: putBucketLifecycle,      // BucketLifecycle\n    getBucketLifecycle: getBucketLifecycle,\n    deleteBucketLifecycle: deleteBucketLifecycle,\n    putBucketVersioning: putBucketVersioning,    // BucketVersioning\n    getBucketVersioning: getBucketVersioning,\n    putBucketReplication: putBucketReplication,  // BucketReplication\n    getBucketReplication: getBucketReplication,\n    deleteBucketReplication: deleteBucketReplication,\n    putBucketWebsite: putBucketWebsite,          // BucketWebsite\n    getBucketWebsite: getBucketWebsite,\n    deleteBucketWebsite: deleteBucketWebsite,\n    putBucketReferer: putBucketReferer,          // BucketReferer\n    getBucketReferer: getBucketReferer,\n    putBucketDomain: putBucketDomain,            // BucketDomain\n    getBucketDomain: getBucketDomain,\n    deleteBucketDomain: deleteBucketDomain,\n    putBucketOrigin: putBucketOrigin,            // BucketOrigin\n    getBucketOrigin: getBucketOrigin,\n    deleteBucketOrigin: deleteBucketOrigin,\n    putBucketLogging: putBucketLogging,             // BucketLogging\n    getBucketLogging: getBucketLogging,\n    putBucketInventory: putBucketInventory,         // BucketInventory\n    getBucketInventory: getBucketInventory,\n    listBucketInventory: listBucketInventory,\n    deleteBucketInventory: deleteBucketInventory,\n    putBucketAccelerate: putBucketAccelerate,\n    getBucketAccelerate: getBucketAccelerate,\n    putBucketEncryption: putBucketEncryption,\n    getBucketEncryption: getBucketEncryption,\n    deleteBucketEncryption: deleteBucketEncryption,\n\n    // Object 相关方法\n    getObject: getObject,\n    headObject: headObject,\n    listObjectVersions: listObjectVersions,\n    putObject: putObject,\n    deleteObject: deleteObject,\n    getObjectAcl: getObjectAcl,\n    putObjectAcl: putObjectAcl,\n    optionsObject: optionsObject,\n    putObjectCopy: putObjectCopy,\n    deleteMultipleObject: deleteMultipleObject,\n    restoreObject: restoreObject,\n    putObjectTagging: putObjectTagging,\n    getObjectTagging: getObjectTagging,\n    deleteObjectTagging: deleteObjectTagging,\n    selectObjectContent: selectObjectContent,\n    appendObject: appendObject,\n\n    // 分块上传相关方法\n    uploadPartCopy: uploadPartCopy,\n    multipartInit: multipartInit,\n    multipartUpload: multipartUpload,\n    multipartComplete: multipartComplete,\n    multipartList: multipartList,\n    multipartListPart: multipartListPart,\n    multipartAbort: multipartAbort,\n\n    // 工具方法\n    request: request,\n    getObjectUrl: getObjectUrl,\n    getAuth: getAuth,\n};\n\nfunction warnOldApi(apiName, fn, proto) {\n    util.each(['Cors', 'Acl'], function (suffix) {\n        if (apiName.slice(-suffix.length) === suffix) {\n            var oldName = apiName.slice(0, -suffix.length) + suffix.toUpperCase();\n            var apiFn = util.apiWrapper(apiName, fn);\n            var warned = false;\n            proto[oldName] = function () {\n                !warned && console.warn('warning: cos.' + oldName + ' has been deprecated. Please Use cos.' + apiName + ' instead.');\n                warned = true;\n                apiFn.apply(this, arguments);\n            };\n        }\n    });\n}\n\nmodule.exports.init = function (COS, task) {\n    task.transferToTaskMethod(API_MAP, 'putObject');\n    util.each(API_MAP, function (fn, apiName) {\n        COS.prototype[apiName] = util.apiWrapper(apiName, fn);\n        warnOldApi(apiName, fn, COS.prototype);\n    });\n};\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}